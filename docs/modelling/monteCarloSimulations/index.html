
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation, guides and articles on creating, developing and implementing automated betting strategies, using data analysis to inform betting models and how to interact with the Betfair API.">
      
      
        <meta name="author" content="Betfair Data Scientists">
      
      
        <link rel="canonical" href="https://betfair-datascientists.github.io/modelling/monteCarloSimulations/">
      
      
        <link rel="prev" href="../cloudOrLocalMachine/">
      
      
        <link rel="next" href="../AFLPlayerDisposalsTutorial/">
      
      
      <link rel="icon" href="../../img/BetfairFavicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.5">
    
    
      
        <title>Monte Carlo Simulations - The Automation Hub</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/betfair.css">
    
      <link rel="stylesheet" href="../../css/buttons_and_animations.css">
    
      <link rel="stylesheet" href="../../css/fonts.css">
    
      <link rel="stylesheet" href="../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","UA-125973915-1"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","UA-125973915-1",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=UA-125973915-1",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="betfair" data-md-color-primary="amber" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#monte-carlo-simulations-in-python-brownlow-medal" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      
  
  <header class="md-header" data-md-component="header">
    <nav class="md-header__inner md-grid" aria-label="header.title">
      <a href="../.." title="The Automation Hub" class="md-header__button md-logo" aria-label="The Automation Hub" data-md-component="logo">
        
  <img src="../../img/logo.svg" alt="logo">

      </a>
      <label class="md-header__button md-icon" for="__drawer">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
      </label>
      <div class="md-header__title" data-md-component="header-title">
        <div class="md-header__ellipsis">
          <div class="md-header__topic">
            <span class="md-ellipsis">
              The Automation Hub
            </span>
          </div>
          <div class="md-header__topic" data-md-component="header-topic">
            <span class="md-ellipsis">
              
                Monte Carlo Simulations
              
            </span>
          </div>
        </div>
      </div>

      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="betfair" data-md-color-primary="amber" data-md-color-accent="orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
              </label>
            
          
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
              </label>
            
          
        </form>
      
      

      
     
      <div class="bf-nav">
        <a class="bf-hidable" href="https://www.betfair.com.au/exchange/plus/"><svg class="exchangeLogo" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#"
          xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 38.775 4.59" width="24" height="17">
          <path class="st1" d="m 160.3,-136.95 v 26" />
          <g transform="translate(18.8,-137.15)">
            <path d="m 2.2901089,126.53441 v 5.20093 H -3.3107216 L 7.4888397,144.33446 18.2884,131.73534 h -5.598633 v -5.20093 z m -8.6000974,8.10132 -10.8017585,12.59913 h 5.60083 v 5.2998 h 10.3996581 v -5.2998 h 5.6008306 z" />
          </g>
        </svg><span> Exchange</span></a>
        <a href="https://www.betfair.com.au/hub/">Hub</a>
      </div>

      

    </nav>
    
  </header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../data/dataListing/" class="md-tabs__link">
          
  
  Data

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../wagering/betfairHowTo/" class="md-tabs__link">
          
  
  Wagering

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/apiResources/" class="md-tabs__link">
          
  
  API

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../howToModel/" class="md-tabs__link">
          
  
  Modelling

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/goldenRulesOfAutomation/" class="md-tabs__link">
          
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../mentalGame/intro/" class="md-tabs__link">
          
  
  Mental Game

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../contactUs/test/" class="md-tabs__link">
          
  
  Contact Us

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="The Automation Hub" class="md-nav__button md-logo" aria-label="The Automation Hub" data-md-component="logo">
      
  <img src="../../img/logo.svg" alt="logo">

    </a>
    The Automation Hub
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/dataListing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSV Files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/usingHistoricDataSite/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Historic Data Site
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Wagering
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Wagering
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wagering/betfairHowTo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Betfair How-To
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wagering/bettingGlossary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Betting Glossary
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wagering/stakingMethods/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Staking Methods and Bankroll Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wagering/valueAndOdds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Value and Odds
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wagering/commission/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commission and other charges
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wagering/hubPredictionsModel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hub Predictions Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wagering/2ndPlaceVoid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cashback 2nd Markets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wagering/exactaQuinella/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exactas & Quinella
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/apiResources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API resources
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/apiappkey/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to access the Betfair API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/apiRtutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API tutorial in R
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/apiPythontutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API tutorial in Python
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Modelling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Modelling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howToModel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro to modelling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataSources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pricing Data Sources
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cloudOrLocalMachine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud or Local
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Monte Carlo Simulations
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Monte Carlo Simulations
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-file" class="md-nav__link">
    <span class="md-ellipsis">
      Data File
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-poisson-distribution" class="md-nav__link">
    <span class="md-ellipsis">
      Using the Poisson distribution.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-rated-prices-for-our-model" class="md-nav__link">
    <span class="md-ellipsis">
      Creating rated prices for our model
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#team-to-poll-most-votes" class="md-nav__link">
    <span class="md-ellipsis">
      Team To Poll Most Votes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#to-poll-most-votes-in-team" class="md-nav__link">
    <span class="md-ellipsis">
      To Poll Most Votes in Team
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#player-lines" class="md-nav__link">
    <span class="md-ellipsis">
      Player Lines
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#player-head-to-head" class="md-nav__link">
    <span class="md-ellipsis">
      Player Head-To-Head
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#winner-top-x-finish" class="md-nav__link">
    <span class="md-ellipsis">
      Winner &amp; Top X Finish
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#to-poll-x-votes" class="md-nav__link">
    <span class="md-ellipsis">
      To Poll X Votes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combine-ratings-and-join-to-betfair-markets" class="md-nav__link">
    <span class="md-ellipsis">
      Combine Ratings and Join to Betfair markets
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conclusion">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disclaimer" class="md-nav__link">
    <span class="md-ellipsis">
      Disclaimer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    AFL
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            AFL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AFLPlayerDisposalsTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Player Disposal Lines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AFLPlayerDisposalsFlumine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Betting Player Disposal Markets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modellingTheBrownlowMedal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How does a Data Scientist model the Brownlow?
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    AFL (Archive)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            AFL (Archive)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AFLmodellingPython/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AFL modelling walk through in Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../brownlowModelTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modelling the Brownlow Medal in Python
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_7" >
        
          
          <label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Greyhounds
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_7">
            <span class="md-nav__icon md-icon"></span>
            Greyhounds
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../topazTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Greyhound Topaz API (Python)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Greyhounds (Archive)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            Greyhounds (Archive)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fasttrackTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Greyhound FastTrack API (Python)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../greyhoundModellingPython/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Greyhound modelling (Python)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_9" >
        
          
          <label class="md-nav__link" for="__nav_5_9" id="__nav_5_9_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Soccer
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9">
            <span class="md-nav__icon md-icon"></span>
            Soccer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howToBuildASoccerBotPartI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How To Build A Soccer Bot P1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howToBuildASoccerBotPartII/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How To Build A Soccer Bot P2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howToBuildASoccerBotPartIII/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How To Build A Soccer Bot P3
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_10" >
        
          
          <label class="md-nav__link" for="__nav_5_10" id="__nav_5_10_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Soccer (Archive)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10">
            <span class="md-nav__icon md-icon"></span>
            Soccer (Archive)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../soccerModellingTutorialPython/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Soccer modelling (Python)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../EPLmlPython/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EPL Machine Learning (Python)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../soccerModellingELO2022WorldCup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Soccer modelling (R) - 2022 FIFA World Cup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../soccerEloTutorialR/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Elo soccer tutorial (R)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../soccerModellingTutorialR/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Soccer modelling (R)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_11" >
        
          
          <label class="md-nav__link" for="__nav_5_11" id="__nav_5_11_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Tennis (Archive)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_11">
            <span class="md-nav__icon md-icon"></span>
            Tennis (Archive)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howToModelTheAusOpen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to model the Australian Open
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AusOpenRTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aus Open R Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AusOpenPythonTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aus Open Python Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/goldenRulesOfAutomation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Golden Rules of Automation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/How_to_Automate_1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Automate 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/How_to_Automate_2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Automate 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/How_to_Automate_3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Automate 3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/How_to_Automate_4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Automate 4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/How_to_Automate_5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Automate 5
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/historicStreamFiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Making Sense of the Stream Files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/resultsLoggingTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flumine Results to CSV Files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/flumineSimulations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flumine Simulations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/processingTarFiles101/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Take away the pain! Processing TAR Files 101
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/jsonToCsvRevisited/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON to CSV | Revisited
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/backtestingRatingsTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Back testing ratings in Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/automatedBettingAnglesTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automated betting angles in Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/analysingAndPredictingMarketMovements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Do they know? Analysing Betfair market formation & market movements
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/analysingAndPredictingBSP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wisdom of the crowd? Analysing & understanding BSP
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Mental Game
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Mental Game
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/roleOfEmotions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/mapYourEmotions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/handlingBadVariance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/winbyBeingGreatatLosing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/correctingyouremotions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 5
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/responsibleGambling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 6
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/InchwormConcept/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 7
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/HighExpectations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 8
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/TappingYourIntuition/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 9
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Contact Us
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Contact Us
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contactUs/test/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Meet the Team
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="monte-carlo-simulations-in-python-brownlow-medal">Monte Carlo Simulations in Python - Brownlow Medal</h1>
<p>Monte Carlo simulations are a way to estimate outcomes by running a model many times with random inputs to see the range of possible results. It’s useful when you have uncertainty or variability, like in sports or finance.</p>
<p>Imagine you're trying to predict how many goals a team will score in a match, but there are many factors you can't control, like weather or player form. Instead of guessing a single outcome, you run a simulation where you randomly vary these factors based on their likelihood (like rolling dice). After running the simulation thousands of times, you can see the most common results and the likelihood of different outcomes.</p>
<p>It's called Monte Carlo because it’s similar to gambling in a casino, where random events affect the result.</p>
<p>In this tutorial we will run through a basic python script for running Monte Carlo simulations on an entry submitted for the 2024 Brownlow Medal Datathon.
In this datathon we predicted the expected votes each player would receive in each match as the output of a regression model. This output however, did not generate a rated price for a player to win the whole event or to poll the most votes in their team.</p>
<h2 id="data-file">Data File</h2>
<ul>
<li><a href="src/modelling/assets/Brownlow_Medal_Datathon_2024_Submission_Form.csv">Brownlow Medal Predictions</a></li>
</ul>
<h2 id="using-the-poisson-distribution">Using the Poisson distribution.</h2>
<p>Monte Carlo simulations the probability of each class occurring to generate outcomes, and so we need to calculate the probability of each class occurring from our regression value.</p>
<p>We need to use the Poisson distribution to calculate the probability that our player will poll 1, 2, or 3 votes. (for more info on the Poisson distribution see <a href="https://en.wikipedia.org/wiki/Poisson_distribution">here</a>)</p>
<p>In excel, the probabilities of each class would be (where x is the regression value):</p>
<table>
<thead>
<tr>
<th>number of votes</th>
<th>excel formula</th>
</tr>
</thead>
<tbody>
<tr>
<td>3</td>
<td>1 - POISSON.DIST(2,x,TRUE)</td>
</tr>
<tr>
<td>2</td>
<td>POISSON.DIST(2,x,FALSE)</td>
</tr>
<tr>
<td>1</td>
<td>POISSON.DIST(1,x,FALSE)</td>
</tr>
</tbody>
</table>
<p>We use the <strong>TRUE</strong> parameter for calculating the value for 3 because the Poisson distribution assumes a non-zero probability of values more than 3, where we know that for the brownlow medal that isn't possible.
This method assigns the probability of the player polling 4 votes by adding it to the probability of the player polling 3 votes. The values should then be normalised across all players in the match so that the sum of the 3,2,1 votes equals exactly 1 (as only player per match can receive these votes). </p>
<p>The probability of the player polling 0 votes will then be <strong>1 - Pr(3) - Pr(2) - Pr(1)</strong></p>
<p>In Python, this looks like:</p>
<div class="highlight"><span class="filename">Creating Poisson Predictions</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="kn">import</span> <span class="n">poisson</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1"># Load the CSV file</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;Brownlow_Medal_Datathon_2024_Submission_Form.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># Define Poisson functions for different vote counts</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="n">df</span><span class="p">[</span><span class="s1">&#39;poisson_3_votes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">poisson</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;brownlow_votes&#39;</span><span class="p">])</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="n">df</span><span class="p">[</span><span class="s1">&#39;poisson_2_votes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisson</span><span class="o">.</span><span class="n">pmf</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;brownlow_votes&#39;</span><span class="p">])</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="n">df</span><span class="p">[</span><span class="s1">&#39;poisson_1_votes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisson</span><span class="o">.</span><span class="n">pmf</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;brownlow_votes&#39;</span><span class="p">])</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="c1"># Calculate votes, grouped by match_id</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="n">df</span><span class="p">[</span><span class="s1">&#39;3_votes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;poisson_3_votes&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;match_id&#39;</span><span class="p">)[</span><span class="s1">&#39;poisson_3_votes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="n">df</span><span class="p">[</span><span class="s1">&#39;2_votes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;poisson_2_votes&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;match_id&#39;</span><span class="p">)[</span><span class="s1">&#39;poisson_2_votes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="n">df</span><span class="p">[</span><span class="s1">&#39;1_votes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;poisson_1_votes&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;match_id&#39;</span><span class="p">)[</span><span class="s1">&#39;poisson_1_votes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="c1"># Calculate 0_votes</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="n">df</span><span class="p">[</span><span class="s1">&#39;0_votes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;3_votes&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;2_votes&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;1_votes&#39;</span><span class="p">]</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="c1"># Drop columns with &#39;poisson&#39; in the name</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s1">&#39;poisson&#39;</span> <span class="ow">in</span> <span class="n">col</span><span class="p">])</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="c1"># Save the modified DataFrame to a new CSV file</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;brownlow_datathon_poisson.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;CSV file has been saved with new columns.&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Now that we've generated the probabilities for each class, we will perform the simulations to predict the number of votes each player will poll across the entire season.
We will then use the results of these simulations to generate rated prices for some of the markets offered for the Brownlow medal count.</p>
<div class="highlight"><span class="filename">Monte Carlo Simulations</span><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">tqdm</span><span class="w"> </span><span class="kn">import</span> <span class="n">tqdm</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="c1"># Load the CSV file</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;brownlow_datathon_poisson.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="c1"># Define the number of Monte Carlo simulations</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="n">num_simulations</span> <span class="o">=</span> <span class="mi">10000</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="c1"># Dictionary to store the results</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="sd">The code here can handle multiple models (if you&#39;ve trained multiple variations of a model for example)</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="sd">It will easily handle just one model of course</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="c1"># Group the data by &#39;model&#39;</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="n">models</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;model&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Running simulations for </span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>    <span class="n">model_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;model&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">model</span><span class="p">]</span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>    <span class="c1"># Get unique match_ids and player_ids</span>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>    <span class="n">match_ids</span> <span class="o">=</span> <span class="n">model_df</span><span class="p">[</span><span class="s1">&#39;match_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>    <span class="n">player_ids</span> <span class="o">=</span> <span class="n">model_df</span><span class="p">[</span><span class="s1">&#39;player_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>    <span class="c1"># Initialize a DataFrame to store simulation results</span>
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a>    <span class="n">simulation_results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a>
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a>    <span class="c1"># Run the Monte Carlo simulations with a progress bar</span>
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a>    <span class="k">for</span> <span class="n">simulation_number</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">num_simulations</span><span class="p">),</span> <span class="n">desc</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Simulating model </span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">):</span>
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a>        <span class="c1"># Initialize vote counts for this simulation</span>
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a>        <span class="n">vote_totals</span> <span class="o">=</span> <span class="p">{</span><span class="n">player_id</span><span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">player_id</span> <span class="ow">in</span> <span class="n">player_ids</span><span class="p">}</span>
<a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a>
<a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a>        <span class="c1"># Simulate votes for each match</span>
<a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a>        <span class="k">for</span> <span class="n">match_id</span> <span class="ow">in</span> <span class="n">match_ids</span><span class="p">:</span>
<a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a>            <span class="n">match_df</span> <span class="o">=</span> <span class="n">model_df</span><span class="p">[</span><span class="n">model_df</span><span class="p">[</span><span class="s1">&#39;match_id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">match_id</span><span class="p">]</span>
<a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a>
<a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a><span class="w">            </span><span class="sd">&#39;&#39;&#39;</span>
<a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a><span class="sd">            We had already normalised across the markets but sometimes floating point errors can causing some rounding issues</span>
<a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a><span class="sd">            So we normalise again just to ensure we don&#39;t hit any errors.</span>
<a id="__codelineno-1-45" name="__codelineno-1-45" href="#__codelineno-1-45"></a><span class="sd">            &#39;&#39;&#39;</span>
<a id="__codelineno-1-46" name="__codelineno-1-46" href="#__codelineno-1-46"></a>            <span class="n">p_3_votes</span> <span class="o">=</span> <span class="n">match_df</span><span class="p">[</span><span class="s1">&#39;3_votes&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">match_df</span><span class="p">[</span><span class="s1">&#39;3_votes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<a id="__codelineno-1-47" name="__codelineno-1-47" href="#__codelineno-1-47"></a>            <span class="n">p_2_votes</span> <span class="o">=</span> <span class="n">match_df</span><span class="p">[</span><span class="s1">&#39;2_votes&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">match_df</span><span class="p">[</span><span class="s1">&#39;2_votes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<a id="__codelineno-1-48" name="__codelineno-1-48" href="#__codelineno-1-48"></a>            <span class="n">p_1_votes</span> <span class="o">=</span> <span class="n">match_df</span><span class="p">[</span><span class="s1">&#39;1_votes&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">match_df</span><span class="p">[</span><span class="s1">&#39;1_votes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<a id="__codelineno-1-49" name="__codelineno-1-49" href="#__codelineno-1-49"></a>
<a id="__codelineno-1-50" name="__codelineno-1-50" href="#__codelineno-1-50"></a>            <span class="c1"># Select one player for 3 votes, 2 votes, and 1 vote</span>
<a id="__codelineno-1-51" name="__codelineno-1-51" href="#__codelineno-1-51"></a>            <span class="n">player_3_votes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">match_df</span><span class="p">[</span><span class="s1">&#39;player_id&#39;</span><span class="p">],</span> <span class="n">p</span><span class="o">=</span><span class="n">p_3_votes</span><span class="p">)</span>
<a id="__codelineno-1-52" name="__codelineno-1-52" href="#__codelineno-1-52"></a>            <span class="n">player_2_votes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">match_df</span><span class="p">[</span><span class="s1">&#39;player_id&#39;</span><span class="p">],</span> <span class="n">p</span><span class="o">=</span><span class="n">p_2_votes</span><span class="p">)</span>
<a id="__codelineno-1-53" name="__codelineno-1-53" href="#__codelineno-1-53"></a>            <span class="n">player_1_votes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">match_df</span><span class="p">[</span><span class="s1">&#39;player_id&#39;</span><span class="p">],</span> <span class="n">p</span><span class="o">=</span><span class="n">p_1_votes</span><span class="p">)</span>
<a id="__codelineno-1-54" name="__codelineno-1-54" href="#__codelineno-1-54"></a>
<a id="__codelineno-1-55" name="__codelineno-1-55" href="#__codelineno-1-55"></a>            <span class="c1"># Update vote totals</span>
<a id="__codelineno-1-56" name="__codelineno-1-56" href="#__codelineno-1-56"></a>            <span class="n">vote_totals</span><span class="p">[</span><span class="n">player_3_votes</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">3</span>
<a id="__codelineno-1-57" name="__codelineno-1-57" href="#__codelineno-1-57"></a>            <span class="n">vote_totals</span><span class="p">[</span><span class="n">player_2_votes</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">2</span>
<a id="__codelineno-1-58" name="__codelineno-1-58" href="#__codelineno-1-58"></a>            <span class="n">vote_totals</span><span class="p">[</span><span class="n">player_1_votes</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-1-59" name="__codelineno-1-59" href="#__codelineno-1-59"></a>
<a id="__codelineno-1-60" name="__codelineno-1-60" href="#__codelineno-1-60"></a>        <span class="c1"># Store the results for this simulation</span>
<a id="__codelineno-1-61" name="__codelineno-1-61" href="#__codelineno-1-61"></a>        <span class="n">simulation_row</span> <span class="o">=</span> <span class="p">{</span><span class="n">player_id</span><span class="p">:</span> <span class="n">vote_totals</span><span class="p">[</span><span class="n">player_id</span><span class="p">]</span> <span class="k">for</span> <span class="n">player_id</span> <span class="ow">in</span> <span class="n">player_ids</span><span class="p">}</span>
<a id="__codelineno-1-62" name="__codelineno-1-62" href="#__codelineno-1-62"></a>        <span class="n">simulation_row</span><span class="p">[</span><span class="s1">&#39;Simulation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">simulation_number</span>
<a id="__codelineno-1-63" name="__codelineno-1-63" href="#__codelineno-1-63"></a>        <span class="n">simulation_row</span><span class="p">[</span><span class="s1">&#39;Model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">model</span>
<a id="__codelineno-1-64" name="__codelineno-1-64" href="#__codelineno-1-64"></a>        <span class="n">simulation_results</span> <span class="o">=</span> <span class="n">simulation_results</span><span class="o">.</span> <span class="n">_append</span><span class="p">(</span><span class="n">simulation_row</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-1-65" name="__codelineno-1-65" href="#__codelineno-1-65"></a>
<a id="__codelineno-1-66" name="__codelineno-1-66" href="#__codelineno-1-66"></a>    <span class="c1"># Save the results to a CSV file</span>
<a id="__codelineno-1-67" name="__codelineno-1-67" href="#__codelineno-1-67"></a>    <span class="n">output_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;AFL-Brownlow/simulation_results_</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s1">.csv&#39;</span>
<a id="__codelineno-1-68" name="__codelineno-1-68" href="#__codelineno-1-68"></a>    <span class="n">simulation_results</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-1-69" name="__codelineno-1-69" href="#__codelineno-1-69"></a>
<a id="__codelineno-1-70" name="__codelineno-1-70" href="#__codelineno-1-70"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Simulation results for </span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s1"> saved to </span><span class="si">{</span><span class="n">output_file</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>
<h2 id="creating-rated-prices-for-our-model">Creating rated prices for our model</h2>
<p>Now let's walk through a subset of markets offered on the exchange on the day of the Brownlow:</p>
<ul>
<li>Winner</li>
<li>Top X Finish (3, 5, 10, 20)</li>
<li>Poll X Votes (1, 10, 15, 20)</li>
<li>Player to Poll Over/Under X Votes</li>
<li>Player to Poll Most Votes in Team</li>
<li>H2H Player Match-Ups</li>
<li>Team to Poll Most Votes</li>
</ul>
<p>We'll create a dictionary of lists which will contain each team as the key and a list of player_ids as the value.
We'll also create a dataframe containing the player ids and the players' full names so we can match to the Betfair data.</p>
<div class="highlight"><span class="filename">Grouping players by teams</span><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="c1"># Load the CSV file into a dataframe</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;Brownlow_Medal_Datathon_2024_Submission_Form.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="c1"># Step 1: Replace spaces with underscores in &#39;player_team&#39; column</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="n">df</span><span class="p">[</span><span class="s1">&#39;player_team&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;player_team&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="c1"># Step 2: Create a list of unique &#39;player_team&#39; values</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="n">unique_teams</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;player_team&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="c1"># Step 3: Iterate over unique teams and get unique &#39;player_id&#39; values for each team</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="n">team_player_ids</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="k">for</span> <span class="n">team</span> <span class="ow">in</span> <span class="n">unique_teams</span><span class="p">:</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>    <span class="c1"># Create a sub-dataframe for each team</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>    <span class="n">sub_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;player_team&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">team</span><span class="p">]</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>    <span class="c1"># Get the list of unique player_ids for that team</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>    <span class="n">unique_player_ids</span> <span class="o">=</span> <span class="n">sub_df</span><span class="p">[</span><span class="s1">&#39;player_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>    <span class="c1"># Store in dictionary with team as key</span>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a>    <span class="n">team_player_ids</span><span class="p">[</span><span class="n">team</span><span class="p">]</span> <span class="o">=</span> <span class="n">unique_player_ids</span>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="n">df</span><span class="p">[</span><span class="s1">&#39;runner_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;player_first_name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;player_last_name&#39;</span><span class="p">]</span>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="n">player_ids_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;player_id&#39;</span><span class="p">,</span><span class="s1">&#39;runner_name&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="n">player_ids_df</span><span class="p">[</span><span class="s1">&#39;player_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">player_ids_df</span><span class="p">[</span><span class="s1">&#39;player_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
</code></pre></div>
<hr />
<h2 id="team-to-poll-most-votes">Team To Poll Most Votes</h2>
<div class="highlight"><span class="filename">Team To Poll Most Votes</span><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    <span class="n">sim_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;simulation_results_</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s1">.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>    <span class="c1"># The column names are player_ids, so this line fixes any issues with player_ids being turned into floats</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>    <span class="n">sim_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">sim_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\.0$&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>    <span class="c1"># Initialize a dictionary to hold the team scores</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>    <span class="n">team_scores</span> <span class="o">=</span> <span class="p">{</span><span class="n">team</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">team</span> <span class="ow">in</span> <span class="n">team_player_ids</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>    <span class="c1"># Initialize a counter for each team to store the number of times they were the highest scorer</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>    <span class="n">team_highest_count</span> <span class="o">=</span> <span class="p">{</span><span class="n">team</span><span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">team</span> <span class="ow">in</span> <span class="n">team_player_ids</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>    <span class="c1"># Iterate through each row of the DataFrame</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">sim_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>        <span class="c1"># Calculate the sum of votes for each team in the current row</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>        <span class="n">team_scores_for_row</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Temporary list to hold scores for this row</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>        <span class="k">for</span> <span class="n">team</span><span class="p">,</span> <span class="n">player_ids</span> <span class="ow">in</span> <span class="n">team_player_ids</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>            <span class="c1"># Convert player_ids to strings since sim_df columns are strings</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>            <span class="n">player_ids_str</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">player_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">player_id</span> <span class="ow">in</span> <span class="n">player_ids</span><span class="p">]</span>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>            <span class="c1"># Filter the player_ids to only include those present in sim_df columns</span>
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>            <span class="n">valid_player_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">player_id</span> <span class="k">for</span> <span class="n">player_id</span> <span class="ow">in</span> <span class="n">player_ids_str</span> <span class="k">if</span> <span class="n">player_id</span> <span class="ow">in</span> <span class="n">sim_df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>            <span class="c1"># Sum votes for all valid players in the team</span>
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a>            <span class="n">team_score</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="n">valid_player_ids</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="k">if</span> <span class="n">valid_player_ids</span> <span class="k">else</span> <span class="mi">0</span>
<a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>            <span class="n">team_scores_for_row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">team_score</span><span class="p">)</span>
<a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a>
<a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a>        <span class="c1"># Find the maximum score in the row</span>
<a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a>        <span class="n">max_score</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">team_scores_for_row</span><span class="p">)</span>
<a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a>
<a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a>        <span class="c1"># Count how many teams have the max score</span>
<a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a>        <span class="n">count_of_max</span> <span class="o">=</span> <span class="n">team_scores_for_row</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">max_score</span><span class="p">)</span>
<a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a>
<a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a>        <span class="c1"># Add 1 / count to each team with the highest score</span>
<a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a>        <span class="k">for</span> <span class="n">team_index</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">team_scores_for_row</span><span class="p">):</span>
<a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a>            <span class="k">if</span> <span class="n">score</span> <span class="o">==</span> <span class="n">max_score</span><span class="p">:</span>
<a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a>                <span class="n">team_highest_count</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">team_player_ids</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="n">team_index</span><span class="p">]]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">count_of_max</span>
<a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a>
<a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a>    <span class="c1"># Convert the team_highest_count dictionary to a list of values</span>
<a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a>    <span class="n">team_highest_count_values</span> <span class="o">=</span> <span class="p">[</span><span class="n">team_highest_count</span><span class="p">[</span><span class="n">team</span><span class="p">]</span> <span class="k">for</span> <span class="n">team</span> <span class="ow">in</span> <span class="n">team_player_ids</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
<a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a>
<a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a>    <span class="c1"># Create a DataFrame with team names and their highest count</span>
<a id="__codelineno-3-44" name="__codelineno-3-44" href="#__codelineno-3-44"></a>    <span class="n">df_team_highest_count</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<a id="__codelineno-3-45" name="__codelineno-3-45" href="#__codelineno-3-45"></a>        <span class="s1">&#39;Model&#39;</span><span class="p">:</span> <span class="n">model</span><span class="p">,</span>
<a id="__codelineno-3-46" name="__codelineno-3-46" href="#__codelineno-3-46"></a>        <span class="s1">&#39;market_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Team To Poll Most Votes (Incl. Ineligible)&#39;</span><span class="p">,</span>
<a id="__codelineno-3-47" name="__codelineno-3-47" href="#__codelineno-3-47"></a>        <span class="s1">&#39;runner_name&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">team_player_ids</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
<a id="__codelineno-3-48" name="__codelineno-3-48" href="#__codelineno-3-48"></a>        <span class="s1">&#39;rated_price&#39;</span><span class="p">:</span> <span class="n">team_highest_count_values</span>
<a id="__codelineno-3-49" name="__codelineno-3-49" href="#__codelineno-3-49"></a>    <span class="p">})</span>
<a id="__codelineno-3-50" name="__codelineno-3-50" href="#__codelineno-3-50"></a>
<a id="__codelineno-3-51" name="__codelineno-3-51" href="#__codelineno-3-51"></a>    <span class="n">df_team_highest_count</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-3-52" name="__codelineno-3-52" href="#__codelineno-3-52"></a>        <span class="mi">1000</span> <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="n">count</span> <span class="o">/</span> <span class="n">num_simulations</span><span class="p">)</span> 
<a id="__codelineno-3-53" name="__codelineno-3-53" href="#__codelineno-3-53"></a>        <span class="k">for</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">team_highest_count_values</span>
<a id="__codelineno-3-54" name="__codelineno-3-54" href="#__codelineno-3-54"></a>    <span class="p">]</span>
<a id="__codelineno-3-55" name="__codelineno-3-55" href="#__codelineno-3-55"></a>    <span class="n">df_team_highest_count</span><span class="p">[</span><span class="s1">&#39;runner_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_team_highest_count</span><span class="p">[</span><span class="s1">&#39;runner_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
<a id="__codelineno-3-56" name="__codelineno-3-56" href="#__codelineno-3-56"></a>
<a id="__codelineno-3-57" name="__codelineno-3-57" href="#__codelineno-3-57"></a>    <span class="k">if</span> <span class="n">counter</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-3-58" name="__codelineno-3-58" href="#__codelineno-3-58"></a>        <span class="n">df_team_highest_count</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;teamToPollMostVotes.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
<a id="__codelineno-3-59" name="__codelineno-3-59" href="#__codelineno-3-59"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-3-60" name="__codelineno-3-60" href="#__codelineno-3-60"></a>        <span class="n">df_team_highest_count</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;teamToPollMostVotes.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
<a id="__codelineno-3-61" name="__codelineno-3-61" href="#__codelineno-3-61"></a>
<a id="__codelineno-3-62" name="__codelineno-3-62" href="#__codelineno-3-62"></a>    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-3-63" name="__codelineno-3-63" href="#__codelineno-3-63"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;model </span><span class="si">{</span><span class="n">counter</span><span class="si">}</span><span class="s1"> processed&#39;</span><span class="p">)</span>
</code></pre></div>
<h2 id="to-poll-most-votes-in-team">To Poll Most Votes in Team</h2>
<p>This section here is very prescriptive, and could certainly be condensed into a more efficient way.
However, I've given the full, unabridged code to carefully outline exactly what is being done here.</p>
<div class="highlight"><span class="filename">Most Votes in Team</span><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># Remove specific player IDs from the relevant teams in team_player_ids</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="c1"># This is done because some of these markets have excluded certain players</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="k">if</span> <span class="s1">&#39;Brisbane&#39;</span> <span class="ow">in</span> <span class="n">team_player_ids</span><span class="p">:</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    <span class="k">if</span> <span class="mi">12061</span> <span class="ow">in</span> <span class="n">team_player_ids</span><span class="p">[</span><span class="s1">&#39;Brisbane&#39;</span><span class="p">]:</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>        <span class="n">team_player_ids</span><span class="p">[</span><span class="s1">&#39;Brisbane&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">12061</span><span class="p">)</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="k">if</span> <span class="s1">&#39;Carlton&#39;</span> <span class="ow">in</span> <span class="n">team_player_ids</span><span class="p">:</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>    <span class="k">if</span> <span class="mi">12685</span> <span class="ow">in</span> <span class="n">team_player_ids</span><span class="p">[</span><span class="s1">&#39;Carlton&#39;</span><span class="p">]:</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>        <span class="n">team_player_ids</span><span class="p">[</span><span class="s1">&#39;Carlton&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">12685</span><span class="p">)</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>    <span class="k">if</span> <span class="mi">12269</span> <span class="ow">in</span> <span class="n">team_player_ids</span><span class="p">[</span><span class="s1">&#39;Carlton&#39;</span><span class="p">]:</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>        <span class="n">team_player_ids</span><span class="p">[</span><span class="s1">&#39;Carlton&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">12269</span><span class="p">)</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="k">if</span> <span class="s1">&#39;Collingwood&#39;</span> <span class="ow">in</span> <span class="n">team_player_ids</span><span class="p">:</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>    <span class="k">if</span> <span class="mi">12948</span> <span class="ow">in</span> <span class="n">team_player_ids</span><span class="p">[</span><span class="s1">&#39;Collingwood&#39;</span><span class="p">]:</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>        <span class="n">team_player_ids</span><span class="p">[</span><span class="s1">&#39;Collingwood&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">12948</span><span class="p">)</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="k">if</span> <span class="s1">&#39;Essendon&#39;</span> <span class="ow">in</span> <span class="n">team_player_ids</span><span class="p">:</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>    <span class="k">if</span> <span class="mi">12249</span> <span class="ow">in</span> <span class="n">team_player_ids</span><span class="p">[</span><span class="s1">&#39;Essendon&#39;</span><span class="p">]:</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>        <span class="n">team_player_ids</span><span class="p">[</span><span class="s1">&#39;Essendon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">12249</span><span class="p">)</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;simulation_results_</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s1">.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>    <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\.0$&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>    <span class="c1"># Initialise the dictionary to store every selection across this market type in the format f&#39;{market_name} - {runner_name}&#39;</span>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>    <span class="n">players</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>        <span class="s2">&quot;Adelaide - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>        <span class="s2">&quot;Adelaide - Ben Keays&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>        <span class="s2">&quot;Adelaide - Izak Rankine&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a>        <span class="s2">&quot;Adelaide - Jordan Dawson&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a>        <span class="s2">&quot;Adelaide - Rory Laird&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>        <span class="s2">&quot;Brisbane Without Neale - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a>        <span class="s2">&quot;Brisbane Without Neale - Cam Rayner&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a>        <span class="s2">&quot;Brisbane Without Neale - Dayne Zorko&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a>        <span class="s2">&quot;Brisbane Without Neale - Hugh McCluggage&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a>        <span class="s2">&quot;Brisbane Without Neale - Joe Daniher&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a>        <span class="s2">&quot;Brisbane Without Neale - Josh Dunkley&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a>        <span class="s2">&quot;Carlton Without Cripps/Walsh - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a>        <span class="s2">&quot;Carlton Without Cripps/Walsh - Charlie Curnow&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a>        <span class="s2">&quot;Carlton Without Cripps/Walsh - George Hewett&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a>        <span class="s2">&quot;Carlton Without Cripps/Walsh - Harry McKay&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a>        <span class="s2">&quot;Carlton Without Cripps/Walsh - Tom De Koning&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a>        <span class="s2">&quot;Collingwood Without N Daicos - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-47" name="__codelineno-4-47" href="#__codelineno-4-47"></a>        <span class="s2">&quot;Collingwood Without N Daicos - Jack Crisp&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-48" name="__codelineno-4-48" href="#__codelineno-4-48"></a>        <span class="s2">&quot;Collingwood Without N Daicos - Jordan De Goey&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-49" name="__codelineno-4-49" href="#__codelineno-4-49"></a>        <span class="s2">&quot;Collingwood Without N Daicos - Josh Daicos&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-50" name="__codelineno-4-50" href="#__codelineno-4-50"></a>        <span class="s2">&quot;Collingwood Without N Daicos - Scott Pendlebury&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-51" name="__codelineno-4-51" href="#__codelineno-4-51"></a>        <span class="s2">&quot;Collingwood Without N Daicos - Will Hoskin Elliott&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-52" name="__codelineno-4-52" href="#__codelineno-4-52"></a>        <span class="s2">&quot;Essendon Without Merrett - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-53" name="__codelineno-4-53" href="#__codelineno-4-53"></a>        <span class="s2">&quot;Essendon Without Merrett - Jye Caldwell&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-54" name="__codelineno-4-54" href="#__codelineno-4-54"></a>        <span class="s2">&quot;Essendon Without Merrett - Nic Martin&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-55" name="__codelineno-4-55" href="#__codelineno-4-55"></a>        <span class="s2">&quot;Essendon Without Merrett - Sam Durham&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-56" name="__codelineno-4-56" href="#__codelineno-4-56"></a>        <span class="s2">&quot;Fremantle - Andrew Brayshaw&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-57" name="__codelineno-4-57" href="#__codelineno-4-57"></a>        <span class="s2">&quot;Fremantle - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-58" name="__codelineno-4-58" href="#__codelineno-4-58"></a>        <span class="s2">&quot;Fremantle - Caleb Serong&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-59" name="__codelineno-4-59" href="#__codelineno-4-59"></a>        <span class="s2">&quot;Fremantle - Hayden Young&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-60" name="__codelineno-4-60" href="#__codelineno-4-60"></a>        <span class="s2">&quot;Geelong - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-61" name="__codelineno-4-61" href="#__codelineno-4-61"></a>        <span class="s2">&quot;Geelong - Jeremy Cameron&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-62" name="__codelineno-4-62" href="#__codelineno-4-62"></a>        <span class="s2">&quot;Geelong - Max Holmes&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-63" name="__codelineno-4-63" href="#__codelineno-4-63"></a>        <span class="s2">&quot;Geelong - Patrick Dangerfield&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-64" name="__codelineno-4-64" href="#__codelineno-4-64"></a>        <span class="s2">&quot;Geelong - Tom Stewart&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-65" name="__codelineno-4-65" href="#__codelineno-4-65"></a>        <span class="s2">&quot;Gold Coast - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-66" name="__codelineno-4-66" href="#__codelineno-4-66"></a>        <span class="s2">&quot;Gold Coast - Matt Rowell&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-67" name="__codelineno-4-67" href="#__codelineno-4-67"></a>        <span class="s2">&quot;Gold Coast - Noah Anderson&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-68" name="__codelineno-4-68" href="#__codelineno-4-68"></a>        <span class="s2">&quot;Gold Coast - Sam Flanders&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-69" name="__codelineno-4-69" href="#__codelineno-4-69"></a>        <span class="s2">&quot;GWS - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-70" name="__codelineno-4-70" href="#__codelineno-4-70"></a>        <span class="s2">&quot;GWS - Jesse Hogan&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-71" name="__codelineno-4-71" href="#__codelineno-4-71"></a>        <span class="s2">&quot;GWS - Lachie Whitfield&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-72" name="__codelineno-4-72" href="#__codelineno-4-72"></a>        <span class="s2">&quot;GWS - Toby Greene&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-73" name="__codelineno-4-73" href="#__codelineno-4-73"></a>        <span class="s2">&quot;GWS - Tom Green&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-74" name="__codelineno-4-74" href="#__codelineno-4-74"></a>        <span class="s2">&quot;Hawthorn - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-75" name="__codelineno-4-75" href="#__codelineno-4-75"></a>        <span class="s2">&quot;Hawthorn - Dylan Moore&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-76" name="__codelineno-4-76" href="#__codelineno-4-76"></a>        <span class="s2">&quot;Hawthorn - Jai Newcombe&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-77" name="__codelineno-4-77" href="#__codelineno-4-77"></a>        <span class="s2">&quot;Hawthorn - James Sicily&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-78" name="__codelineno-4-78" href="#__codelineno-4-78"></a>        <span class="s2">&quot;Hawthorn - James Worpel&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-79" name="__codelineno-4-79" href="#__codelineno-4-79"></a>        <span class="s2">&quot;Hawthorn - Will Day&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-80" name="__codelineno-4-80" href="#__codelineno-4-80"></a>        <span class="s2">&quot;Melbourne - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-81" name="__codelineno-4-81" href="#__codelineno-4-81"></a>        <span class="s2">&quot;Melbourne - Christian Petracca&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-82" name="__codelineno-4-82" href="#__codelineno-4-82"></a>        <span class="s2">&quot;Melbourne - Jack Viney&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-83" name="__codelineno-4-83" href="#__codelineno-4-83"></a>        <span class="s2">&quot;Melbourne - Max Gawn&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-84" name="__codelineno-4-84" href="#__codelineno-4-84"></a>        <span class="s2">&quot;North Melbourne - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-85" name="__codelineno-4-85" href="#__codelineno-4-85"></a>        <span class="s2">&quot;North Melbourne - Harry Sheezel&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-86" name="__codelineno-4-86" href="#__codelineno-4-86"></a>        <span class="s2">&quot;North Melbourne - Luke Davies Uniacke&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-87" name="__codelineno-4-87" href="#__codelineno-4-87"></a>        <span class="s2">&quot;North Melbourne - Tristan Xerri&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-88" name="__codelineno-4-88" href="#__codelineno-4-88"></a>        <span class="s2">&quot;Port Adelaide - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-89" name="__codelineno-4-89" href="#__codelineno-4-89"></a>        <span class="s2">&quot;Port Adelaide - Connor Rozee&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-90" name="__codelineno-4-90" href="#__codelineno-4-90"></a>        <span class="s2">&quot;Port Adelaide - Jason Horne Francis&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-91" name="__codelineno-4-91" href="#__codelineno-4-91"></a>        <span class="s2">&quot;Port Adelaide - Ollie Wines&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-92" name="__codelineno-4-92" href="#__codelineno-4-92"></a>        <span class="s2">&quot;Port Adelaide - Zak Butters&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-93" name="__codelineno-4-93" href="#__codelineno-4-93"></a>        <span class="s2">&quot;Richmond - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-94" name="__codelineno-4-94" href="#__codelineno-4-94"></a>        <span class="s2">&quot;Richmond - Daniel Rioli&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-95" name="__codelineno-4-95" href="#__codelineno-4-95"></a>        <span class="s2">&quot;Richmond - Jayden Short&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-96" name="__codelineno-4-96" href="#__codelineno-4-96"></a>        <span class="s2">&quot;Richmond - Liam Baker&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-97" name="__codelineno-4-97" href="#__codelineno-4-97"></a>        <span class="s2">&quot;Richmond - Nick Vlastuin&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-98" name="__codelineno-4-98" href="#__codelineno-4-98"></a>        <span class="s2">&quot;Richmond - Shai Bolton&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-99" name="__codelineno-4-99" href="#__codelineno-4-99"></a>        <span class="s2">&quot;Richmond - Tim Taranto&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-100" name="__codelineno-4-100" href="#__codelineno-4-100"></a>        <span class="s2">&quot;Richmond - Toby Nankervis&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-101" name="__codelineno-4-101" href="#__codelineno-4-101"></a>        <span class="s2">&quot;St Kilda - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-102" name="__codelineno-4-102" href="#__codelineno-4-102"></a>        <span class="s2">&quot;St Kilda - Jack Sinclair&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-103" name="__codelineno-4-103" href="#__codelineno-4-103"></a>        <span class="s2">&quot;St Kilda - Jack Steele&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-104" name="__codelineno-4-104" href="#__codelineno-4-104"></a>        <span class="s2">&quot;St Kilda - Nasiah Wanganeen Milera&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-105" name="__codelineno-4-105" href="#__codelineno-4-105"></a>        <span class="s2">&quot;St Kilda - Rowan Marshall&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-106" name="__codelineno-4-106" href="#__codelineno-4-106"></a>        <span class="s2">&quot;Sydney - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-107" name="__codelineno-4-107" href="#__codelineno-4-107"></a>        <span class="s2">&quot;Sydney - Chad Warner&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-108" name="__codelineno-4-108" href="#__codelineno-4-108"></a>        <span class="s2">&quot;Sydney - Errol Gulden&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-109" name="__codelineno-4-109" href="#__codelineno-4-109"></a>        <span class="s2">&quot;Sydney - Isaac Heeney&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-110" name="__codelineno-4-110" href="#__codelineno-4-110"></a>        <span class="s2">&quot;West Coast - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-111" name="__codelineno-4-111" href="#__codelineno-4-111"></a>        <span class="s2">&quot;West Coast - Elliot Yeo&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-112" name="__codelineno-4-112" href="#__codelineno-4-112"></a>        <span class="s2">&quot;West Coast - Harley Reid&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-113" name="__codelineno-4-113" href="#__codelineno-4-113"></a>        <span class="s2">&quot;West Coast - Jake Waterman&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-114" name="__codelineno-4-114" href="#__codelineno-4-114"></a>        <span class="s2">&quot;West Coast - Tim Kelly&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-115" name="__codelineno-4-115" href="#__codelineno-4-115"></a>        <span class="s2">&quot;Western Bulldogs - Adam Treloar&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-116" name="__codelineno-4-116" href="#__codelineno-4-116"></a>        <span class="s2">&quot;Western Bulldogs - Any Other Player&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-117" name="__codelineno-4-117" href="#__codelineno-4-117"></a>        <span class="s2">&quot;Western Bulldogs - Ed Richards&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-118" name="__codelineno-4-118" href="#__codelineno-4-118"></a>        <span class="s2">&quot;Western Bulldogs - Marcus Bontempelli&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-4-119" name="__codelineno-4-119" href="#__codelineno-4-119"></a>        <span class="s2">&quot;Western Bulldogs - Tom Liberatore&quot;</span><span class="p">:</span><span class="mi">0</span>
<a id="__codelineno-4-120" name="__codelineno-4-120" href="#__codelineno-4-120"></a>    <span class="p">}</span>
<a id="__codelineno-4-121" name="__codelineno-4-121" href="#__codelineno-4-121"></a>
<a id="__codelineno-4-122" name="__codelineno-4-122" href="#__codelineno-4-122"></a>    <span class="k">for</span> <span class="n">team</span><span class="p">,</span> <span class="n">player_ids</span> <span class="ow">in</span> <span class="n">team_player_ids</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># Iterate over the dictionary keys (teams) and their values (player IDs)</span>
<a id="__codelineno-4-123" name="__codelineno-4-123" href="#__codelineno-4-123"></a>
<a id="__codelineno-4-124" name="__codelineno-4-124" href="#__codelineno-4-124"></a>        <span class="c1"># Create a DataFrame for the team with columns corresponding to the player_ids (converted to strings)</span>
<a id="__codelineno-4-125" name="__codelineno-4-125" href="#__codelineno-4-125"></a>        <span class="n">team_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="nb">str</span><span class="p">(</span><span class="n">player_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">player_id</span> <span class="ow">in</span> <span class="n">player_ids</span><span class="p">]]</span>
<a id="__codelineno-4-126" name="__codelineno-4-126" href="#__codelineno-4-126"></a>
<a id="__codelineno-4-127" name="__codelineno-4-127" href="#__codelineno-4-127"></a>        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">team_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
<a id="__codelineno-4-128" name="__codelineno-4-128" href="#__codelineno-4-128"></a>
<a id="__codelineno-4-129" name="__codelineno-4-129" href="#__codelineno-4-129"></a>            <span class="n">team_sorted_players</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-4-130" name="__codelineno-4-130" href="#__codelineno-4-130"></a>
<a id="__codelineno-4-131" name="__codelineno-4-131" href="#__codelineno-4-131"></a>            <span class="c1"># Find the maximum value in the row</span>
<a id="__codelineno-4-132" name="__codelineno-4-132" href="#__codelineno-4-132"></a>            <span class="n">max_value</span> <span class="o">=</span> <span class="n">team_sorted_players</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<a id="__codelineno-4-133" name="__codelineno-4-133" href="#__codelineno-4-133"></a>
<a id="__codelineno-4-134" name="__codelineno-4-134" href="#__codelineno-4-134"></a>            <span class="c1"># Count how many times the maximum value occurs in this row</span>
<a id="__codelineno-4-135" name="__codelineno-4-135" href="#__codelineno-4-135"></a>            <span class="n">winners</span> <span class="o">=</span> <span class="p">(</span><span class="n">team_sorted_players</span> <span class="o">==</span> <span class="n">max_value</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<a id="__codelineno-4-136" name="__codelineno-4-136" href="#__codelineno-4-136"></a>
<a id="__codelineno-4-137" name="__codelineno-4-137" href="#__codelineno-4-137"></a>            <span class="k">for</span> <span class="n">player_id</span><span class="p">,</span> <span class="n">player_value</span> <span class="ow">in</span> <span class="n">team_sorted_players</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-4-138" name="__codelineno-4-138" href="#__codelineno-4-138"></a>                <span class="k">if</span> <span class="n">player_value</span> <span class="o">==</span> <span class="n">max_value</span><span class="p">:</span>
<a id="__codelineno-4-139" name="__codelineno-4-139" href="#__codelineno-4-139"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;Adelaide&#39;</span><span class="p">:</span>
<a id="__codelineno-4-140" name="__codelineno-4-140" href="#__codelineno-4-140"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12171&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Adelaide - Rory Laird&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-141" name="__codelineno-4-141" href="#__codelineno-4-141"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12519&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Adelaide - Jordan Dawson&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-142" name="__codelineno-4-142" href="#__codelineno-4-142"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12797&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Adelaide - Izak Rankine&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-143" name="__codelineno-4-143" href="#__codelineno-4-143"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12441&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Adelaide - Ben Keays&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-144" name="__codelineno-4-144" href="#__codelineno-4-144"></a>                        <span class="k">else</span><span class="p">:</span> <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Adelaide - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-145" name="__codelineno-4-145" href="#__codelineno-4-145"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;Brisbane&#39;</span><span class="p">:</span>
<a id="__codelineno-4-146" name="__codelineno-4-146" href="#__codelineno-4-146"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12421&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Brisbane Without Neale - Josh Dunkley&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-147" name="__codelineno-4-147" href="#__codelineno-4-147"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12205&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Brisbane Without Neale - Joe Daniher&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-148" name="__codelineno-4-148" href="#__codelineno-4-148"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12526&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Brisbane Without Neale - Hugh McCluggage&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-149" name="__codelineno-4-149" href="#__codelineno-4-149"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12082&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Brisbane Without Neale - Dayne Zorko&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-150" name="__codelineno-4-150" href="#__codelineno-4-150"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12594&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Brisbane Without Neale - Cam Rayner&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-151" name="__codelineno-4-151" href="#__codelineno-4-151"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Brisbane Without Neale - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-152" name="__codelineno-4-152" href="#__codelineno-4-152"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;Carlton&#39;</span><span class="p">:</span>
<a id="__codelineno-4-153" name="__codelineno-4-153" href="#__codelineno-4-153"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12681&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Carlton Without Cripps/Walsh - Tom De Koning&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-154" name="__codelineno-4-154" href="#__codelineno-4-154"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12575&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Carlton Without Cripps/Walsh - Harry McKay&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-155" name="__codelineno-4-155" href="#__codelineno-4-155"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12417&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Carlton Without Cripps/Walsh - George Hewett&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-156" name="__codelineno-4-156" href="#__codelineno-4-156"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12428&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Carlton Without Cripps/Walsh - Charlie Curnow&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-157" name="__codelineno-4-157" href="#__codelineno-4-157"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Carlton Without Cripps/Walsh - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-158" name="__codelineno-4-158" href="#__codelineno-4-158"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;Collingwood&#39;</span><span class="p">:</span>
<a id="__codelineno-4-159" name="__codelineno-4-159" href="#__codelineno-4-159"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12029&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Collingwood Without N Daicos - Will Hoskin Elliott&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-160" name="__codelineno-4-160" href="#__codelineno-4-160"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;11506&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Collingwood Without N Daicos - Scott Pendlebury&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-161" name="__codelineno-4-161" href="#__codelineno-4-161"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12582&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Collingwood Without N Daicos - Josh Daicos&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-162" name="__codelineno-4-162" href="#__codelineno-4-162"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12333&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Collingwood Without N Daicos - Jordan De Goey&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-163" name="__codelineno-4-163" href="#__codelineno-4-163"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12067&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Collingwood Without N Daicos - Jack Crisp&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-164" name="__codelineno-4-164" href="#__codelineno-4-164"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Collingwood Without N Daicos - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-165" name="__codelineno-4-165" href="#__codelineno-4-165"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;Essendon&#39;</span><span class="p">:</span>
<a id="__codelineno-4-166" name="__codelineno-4-166" href="#__codelineno-4-166"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12926&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Essendon Without Merrett - Sam Durham&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-167" name="__codelineno-4-167" href="#__codelineno-4-167"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12950&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Essendon Without Merrett - Nic Martin&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-168" name="__codelineno-4-168" href="#__codelineno-4-168"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12752&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Essendon Without Merrett - Jye Caldwell&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-169" name="__codelineno-4-169" href="#__codelineno-4-169"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Essendon Without Merrett - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-170" name="__codelineno-4-170" href="#__codelineno-4-170"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;Fremantle&#39;</span><span class="p">:</span>
<a id="__codelineno-4-171" name="__codelineno-4-171" href="#__codelineno-4-171"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12777&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Fremantle - Hayden Young&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-172" name="__codelineno-4-172" href="#__codelineno-4-172"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12786&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Fremantle - Caleb Serong&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-173" name="__codelineno-4-173" href="#__codelineno-4-173"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12596&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Fremantle - Andrew Brayshaw&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-174" name="__codelineno-4-174" href="#__codelineno-4-174"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Fremantle - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-175" name="__codelineno-4-175" href="#__codelineno-4-175"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;Geelong&#39;</span><span class="p">:</span>
<a id="__codelineno-4-176" name="__codelineno-4-176" href="#__codelineno-4-176"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12514&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Geelong - Tom Stewart&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-177" name="__codelineno-4-177" href="#__codelineno-4-177"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;11706&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Geelong - Patrick Dangerfield&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-178" name="__codelineno-4-178" href="#__codelineno-4-178"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12882&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Geelong - Max Holmes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-179" name="__codelineno-4-179" href="#__codelineno-4-179"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12022&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Geelong - Jeremy Cameron&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-180" name="__codelineno-4-180" href="#__codelineno-4-180"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Geelong - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-181" name="__codelineno-4-181" href="#__codelineno-4-181"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;Gold_Coast&#39;</span><span class="p">:</span>
<a id="__codelineno-4-182" name="__codelineno-4-182" href="#__codelineno-4-182"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12825&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Gold Coast - Sam Flanders&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-183" name="__codelineno-4-183" href="#__codelineno-4-183"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12767&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Gold Coast - Noah Anderson&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-184" name="__codelineno-4-184" href="#__codelineno-4-184"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12769&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Gold Coast - Matt Rowell&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-185" name="__codelineno-4-185" href="#__codelineno-4-185"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Gold Coast - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-186" name="__codelineno-4-186" href="#__codelineno-4-186"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;GWS&#39;</span><span class="p">:</span>
<a id="__codelineno-4-187" name="__codelineno-4-187" href="#__codelineno-4-187"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12766&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;GWS - Tom Green&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-188" name="__codelineno-4-188" href="#__codelineno-4-188"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12026&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;GWS - Toby Greene&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-189" name="__codelineno-4-189" href="#__codelineno-4-189"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12147&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;GWS - Lachie Whitfield&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-190" name="__codelineno-4-190" href="#__codelineno-4-190"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12326&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;GWS - Jesse Hogan&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-191" name="__codelineno-4-191" href="#__codelineno-4-191"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;GWS - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-192" name="__codelineno-4-192" href="#__codelineno-4-192"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;Hawthorn&#39;</span><span class="p">:</span>
<a id="__codelineno-4-193" name="__codelineno-4-193" href="#__codelineno-4-193"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12794&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Hawthorn - Will Day&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-194" name="__codelineno-4-194" href="#__codelineno-4-194"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12626&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Hawthorn - James Worpel&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-195" name="__codelineno-4-195" href="#__codelineno-4-195"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12342&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Hawthorn - James Sicily&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-196" name="__codelineno-4-196" href="#__codelineno-4-196"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12913&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Hawthorn - Jai Newcombe&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-197" name="__codelineno-4-197" href="#__codelineno-4-197"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12710&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Hawthorn - Dylan Moore&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-198" name="__codelineno-4-198" href="#__codelineno-4-198"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Hawthorn - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-199" name="__codelineno-4-199" href="#__codelineno-4-199"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;Melbourne&#39;</span><span class="p">:</span>
<a id="__codelineno-4-200" name="__codelineno-4-200" href="#__codelineno-4-200"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;11972&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Melbourne - Max Gawn&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-201" name="__codelineno-4-201" href="#__codelineno-4-201"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12152&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Melbourne - Jack Viney&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-202" name="__codelineno-4-202" href="#__codelineno-4-202"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12437&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Melbourne - Christian Petracca&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-203" name="__codelineno-4-203" href="#__codelineno-4-203"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Melbourne - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-204" name="__codelineno-4-204" href="#__codelineno-4-204"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;North_Melbourne&#39;</span><span class="p">:</span>
<a id="__codelineno-4-205" name="__codelineno-4-205" href="#__codelineno-4-205"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12789&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;North Melbourne - Tristan Xerri&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-206" name="__codelineno-4-206" href="#__codelineno-4-206"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12599&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;North Melbourne - Luke Davies Uniacke&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-207" name="__codelineno-4-207" href="#__codelineno-4-207"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;13030&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;North Melbourne - Harry Sheezel&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-208" name="__codelineno-4-208" href="#__codelineno-4-208"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;North Melbourne - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-209" name="__codelineno-4-209" href="#__codelineno-4-209"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;Port_Adelaide&#39;</span><span class="p">:</span>
<a id="__codelineno-4-210" name="__codelineno-4-210" href="#__codelineno-4-210"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12693&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Port Adelaide - Zak Butters&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-211" name="__codelineno-4-211" href="#__codelineno-4-211"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12155&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Port Adelaide - Ollie Wines&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-212" name="__codelineno-4-212" href="#__codelineno-4-212"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12955&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Port Adelaide - Jason Horne Francis&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-213" name="__codelineno-4-213" href="#__codelineno-4-213"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12696&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Port Adelaide - Connor Rozee&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-214" name="__codelineno-4-214" href="#__codelineno-4-214"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Port Adelaide - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-215" name="__codelineno-4-215" href="#__codelineno-4-215"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;Richmond&#39;</span><span class="p">:</span>
<a id="__codelineno-4-216" name="__codelineno-4-216" href="#__codelineno-4-216"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12379&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Richmond - Toby Nankervis&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-217" name="__codelineno-4-217" href="#__codelineno-4-217"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12512&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Richmond - Tim Taranto&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-218" name="__codelineno-4-218" href="#__codelineno-4-218"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12542&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Richmond - Shai Bolton&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-219" name="__codelineno-4-219" href="#__codelineno-4-219"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12180&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Richmond - Nick Vlastuin&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-220" name="__codelineno-4-220" href="#__codelineno-4-220"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12668&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Richmond - Liam Baker&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-221" name="__codelineno-4-221" href="#__codelineno-4-221"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12425&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Richmond - Jayden Short&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-222" name="__codelineno-4-222" href="#__codelineno-4-222"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12409&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Richmond - Daniel Rioli&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-223" name="__codelineno-4-223" href="#__codelineno-4-223"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Richmond - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-224" name="__codelineno-4-224" href="#__codelineno-4-224"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;St_Kilda&#39;</span><span class="p">:</span>
<a id="__codelineno-4-225" name="__codelineno-4-225" href="#__codelineno-4-225"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12572&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;St Kilda - Rowan Marshall&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-226" name="__codelineno-4-226" href="#__codelineno-4-226"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12947&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;St Kilda - Nasiah Wanganeen Milera&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-227" name="__codelineno-4-227" href="#__codelineno-4-227"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12377&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;St Kilda - Jack Steele&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-228" name="__codelineno-4-228" href="#__codelineno-4-228"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12337&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;St Kilda - Jack Sinclair&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-229" name="__codelineno-4-229" href="#__codelineno-4-229"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;St Kilda - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-230" name="__codelineno-4-230" href="#__codelineno-4-230"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;Sydney&#39;</span><span class="p">:</span>
<a id="__codelineno-4-231" name="__codelineno-4-231" href="#__codelineno-4-231"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12331&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Sydney - Isaac Heeney&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-232" name="__codelineno-4-232" href="#__codelineno-4-232"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12864&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Sydney - Errol Gulden&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-233" name="__codelineno-4-233" href="#__codelineno-4-233"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12799&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Sydney - Chad Warner&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-234" name="__codelineno-4-234" href="#__codelineno-4-234"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Sydney - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-235" name="__codelineno-4-235" href="#__codelineno-4-235"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;West_Coast&#39;</span><span class="p">:</span>
<a id="__codelineno-4-236" name="__codelineno-4-236" href="#__codelineno-4-236"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12605&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;West Coast - Tim Kelly&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-237" name="__codelineno-4-237" href="#__codelineno-4-237"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12609&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;West Coast - Jake Waterman&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-238" name="__codelineno-4-238" href="#__codelineno-4-238"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;13112&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;West Coast - Harley Reid&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-239" name="__codelineno-4-239" href="#__codelineno-4-239"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12093&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;West Coast - Elliot Yeo&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-240" name="__codelineno-4-240" href="#__codelineno-4-240"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;West Coast - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-241" name="__codelineno-4-241" href="#__codelineno-4-241"></a>                    <span class="k">if</span> <span class="n">team</span> <span class="o">==</span> <span class="s1">&#39;Western_Bulldogs&#39;</span><span class="p">:</span>
<a id="__codelineno-4-242" name="__codelineno-4-242" href="#__codelineno-4-242"></a>                        <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;11904&#39;</span><span class="p">:</span>    <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Western Bulldogs - Tom Liberatore&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-243" name="__codelineno-4-243" href="#__codelineno-4-243"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12277&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Western Bulldogs - Marcus Bontempelli&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-244" name="__codelineno-4-244" href="#__codelineno-4-244"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12612&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Western Bulldogs - Ed Richards&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-245" name="__codelineno-4-245" href="#__codelineno-4-245"></a>                        <span class="k">elif</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12058&#39;</span><span class="p">:</span>  <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Western Bulldogs - Adam Treloar&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-246" name="__codelineno-4-246" href="#__codelineno-4-246"></a>                        <span class="k">else</span><span class="p">:</span>   <span class="n">players</span><span class="p">[</span><span class="s1">&#39;Western Bulldogs - Any Other Player&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-4-247" name="__codelineno-4-247" href="#__codelineno-4-247"></a>
<a id="__codelineno-4-248" name="__codelineno-4-248" href="#__codelineno-4-248"></a>    <span class="n">player_team_votes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">players</span><span class="p">,</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
<a id="__codelineno-4-249" name="__codelineno-4-249" href="#__codelineno-4-249"></a>    <span class="n">player_team_votes</span><span class="p">[</span><span class="s1">&#39;Model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">model</span>
<a id="__codelineno-4-250" name="__codelineno-4-250" href="#__codelineno-4-250"></a>
<a id="__codelineno-4-251" name="__codelineno-4-251" href="#__codelineno-4-251"></a>    <span class="c1"># We reset the index because the market_name and runner_name are in the index</span>
<a id="__codelineno-4-252" name="__codelineno-4-252" href="#__codelineno-4-252"></a>    <span class="n">player_team_votes</span> <span class="o">=</span> <span class="n">player_team_votes</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<a id="__codelineno-4-253" name="__codelineno-4-253" href="#__codelineno-4-253"></a>    <span class="n">player_team_votes</span><span class="p">[[</span><span class="s1">&#39;market_name&#39;</span><span class="p">,</span> <span class="s1">&#39;runner_name&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">player_team_votes</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; - &#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-4-254" name="__codelineno-4-254" href="#__codelineno-4-254"></a>    <span class="n">player_team_votes</span> <span class="o">=</span> <span class="n">player_team_votes</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;rated_price&#39;</span><span class="p">})</span>
<a id="__codelineno-4-255" name="__codelineno-4-255" href="#__codelineno-4-255"></a>    <span class="n">player_team_votes</span> <span class="o">=</span> <span class="n">player_team_votes</span><span class="p">[[</span><span class="s1">&#39;Model&#39;</span><span class="p">,</span><span class="s1">&#39;market_name&#39;</span><span class="p">,</span><span class="s1">&#39;runner_name&#39;</span><span class="p">,</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]]</span>
<a id="__codelineno-4-256" name="__codelineno-4-256" href="#__codelineno-4-256"></a>
<a id="__codelineno-4-257" name="__codelineno-4-257" href="#__codelineno-4-257"></a>    <span class="c1"># Calculate rated_price</span>
<a id="__codelineno-4-258" name="__codelineno-4-258" href="#__codelineno-4-258"></a>    <span class="n">player_team_votes</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">player_team_votes</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">num_simulations</span><span class="p">)</span>
<a id="__codelineno-4-259" name="__codelineno-4-259" href="#__codelineno-4-259"></a>
<a id="__codelineno-4-260" name="__codelineno-4-260" href="#__codelineno-4-260"></a>    <span class="k">if</span> <span class="n">counter</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-4-261" name="__codelineno-4-261" href="#__codelineno-4-261"></a>        <span class="n">player_team_votes</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;pollMostVotesInTeam.csv&#39;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
<a id="__codelineno-4-262" name="__codelineno-4-262" href="#__codelineno-4-262"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-4-263" name="__codelineno-4-263" href="#__codelineno-4-263"></a>        <span class="n">player_team_votes</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;pollMostVotesInTeam.csv&#39;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
<a id="__codelineno-4-264" name="__codelineno-4-264" href="#__codelineno-4-264"></a>
<a id="__codelineno-4-265" name="__codelineno-4-265" href="#__codelineno-4-265"></a>    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-4-266" name="__codelineno-4-266" href="#__codelineno-4-266"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;model </span><span class="si">{</span><span class="n">counter</span><span class="si">}</span><span class="s1"> processed&#39;</span><span class="p">)</span>
</code></pre></div>
<h2 id="player-lines">Player Lines</h2>
<div class="highlight"><span class="filename">Player Vote Lines</span><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;simulation_results_</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s1">.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>    <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\.0$&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>    <span class="n">lines</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>    <span class="s1">&#39;Caleb Serong - Over 23.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>    <span class="s1">&#39;Caleb Serong - Under 23.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>    <span class="s1">&#39;Errol Gulden - Over 22.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>    <span class="s1">&#39;Errol Gulden - Under 22.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>    <span class="s1">&#39;Isaac Heeney - Over 26.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>    <span class="s1">&#39;Isaac Heeney - Under 26.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>    <span class="s1">&#39;Lachie Neale - Over 27.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>    <span class="s1">&#39;Lachie Neale - Under 27.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>    <span class="s1">&#39;Marcus Bontempelli - Over 24.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>    <span class="s1">&#39;Marcus Bontempelli - Under 24.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>    <span class="s1">&#39;Nick Daicos - Over 31.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>    <span class="s1">&#39;Nick Daicos - Under 31.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>    <span class="s1">&#39;Patrick Cripps - Over 32.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a>    <span class="s1">&#39;Patrick Cripps - Under 32.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a>    <span class="s1">&#39;Tom Green - Over 21.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>    <span class="s1">&#39;Tom Green - Under 21.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a>    <span class="s1">&#39;Zach Merrett - Over 23.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a>    <span class="s1">&#39;Zach Merrett - Under 23.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a>    <span class="s1">&#39;Zak Butters - Over 20.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a>    <span class="s1">&#39;Zak Butters - Under 20.5 Votes&#39;</span><span class="p">:</span><span class="mi">0</span>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a>    <span class="p">}</span>
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a>    <span class="c1"># Iterate over each row (simulation)</span>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a>    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a>
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a>        <span class="k">for</span> <span class="n">player_id</span><span class="p">,</span> <span class="n">total_votes</span> <span class="ow">in</span> <span class="n">row</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12786&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&gt;</span> <span class="mf">23.5</span><span class="p">:</span>
<a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Caleb Serong - Over 23.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12786&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&lt;</span> <span class="mf">23.5</span><span class="p">:</span>
<a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Caleb Serong - Under 23.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12864&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&gt;</span> <span class="mf">22.5</span><span class="p">:</span>
<a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Errol Gulden - Over 22.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12864&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&lt;</span> <span class="mf">22.5</span><span class="p">:</span>
<a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Errol Gulden - Under 22.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12331&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&gt;</span> <span class="mf">26.5</span><span class="p">:</span>
<a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Isaac Heeney - Over 26.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12331&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&lt;</span> <span class="mf">26.5</span><span class="p">:</span>
<a id="__codelineno-5-46" name="__codelineno-5-46" href="#__codelineno-5-46"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Isaac Heeney - Under 26.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-47" name="__codelineno-5-47" href="#__codelineno-5-47"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12061&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&gt;</span> <span class="mf">27.5</span><span class="p">:</span>
<a id="__codelineno-5-48" name="__codelineno-5-48" href="#__codelineno-5-48"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Lachie Neale - Over 27.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-49" name="__codelineno-5-49" href="#__codelineno-5-49"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12061&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&lt;</span> <span class="mf">27.5</span><span class="p">:</span>
<a id="__codelineno-5-50" name="__codelineno-5-50" href="#__codelineno-5-50"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Lachie Neale - Under 27.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-51" name="__codelineno-5-51" href="#__codelineno-5-51"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12277&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&gt;</span> <span class="mf">24.5</span><span class="p">:</span>
<a id="__codelineno-5-52" name="__codelineno-5-52" href="#__codelineno-5-52"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Marcus Bontempelli - Over 24.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-53" name="__codelineno-5-53" href="#__codelineno-5-53"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12277&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&lt;</span> <span class="mf">24.5</span><span class="p">:</span>
<a id="__codelineno-5-54" name="__codelineno-5-54" href="#__codelineno-5-54"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Marcus Bontempelli - Under 24.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-55" name="__codelineno-5-55" href="#__codelineno-5-55"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12948&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&gt;</span> <span class="mf">31.5</span><span class="p">:</span>
<a id="__codelineno-5-56" name="__codelineno-5-56" href="#__codelineno-5-56"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Nick Daicos - Over 31.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-57" name="__codelineno-5-57" href="#__codelineno-5-57"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12948&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&lt;</span> <span class="mf">31.5</span><span class="p">:</span>
<a id="__codelineno-5-58" name="__codelineno-5-58" href="#__codelineno-5-58"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Nick Daicos - Under 31.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-59" name="__codelineno-5-59" href="#__codelineno-5-59"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12269&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&gt;</span> <span class="mf">32.5</span><span class="p">:</span>
<a id="__codelineno-5-60" name="__codelineno-5-60" href="#__codelineno-5-60"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Patrick Cripps - Over 32.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-61" name="__codelineno-5-61" href="#__codelineno-5-61"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12269&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&lt;</span> <span class="mf">32.5</span><span class="p">:</span>
<a id="__codelineno-5-62" name="__codelineno-5-62" href="#__codelineno-5-62"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Patrick Cripps - Under 32.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-63" name="__codelineno-5-63" href="#__codelineno-5-63"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12766&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&gt;</span> <span class="mf">21.5</span><span class="p">:</span>
<a id="__codelineno-5-64" name="__codelineno-5-64" href="#__codelineno-5-64"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Tom Green - Over 21.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-65" name="__codelineno-5-65" href="#__codelineno-5-65"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12766&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&lt;</span> <span class="mf">21.5</span><span class="p">:</span>
<a id="__codelineno-5-66" name="__codelineno-5-66" href="#__codelineno-5-66"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Tom Green - Under 21.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-67" name="__codelineno-5-67" href="#__codelineno-5-67"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12249&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&gt;</span> <span class="mf">23.5</span><span class="p">:</span>
<a id="__codelineno-5-68" name="__codelineno-5-68" href="#__codelineno-5-68"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Zach Merrett - Over 23.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-69" name="__codelineno-5-69" href="#__codelineno-5-69"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12249&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&lt;</span> <span class="mf">23.5</span><span class="p">:</span>
<a id="__codelineno-5-70" name="__codelineno-5-70" href="#__codelineno-5-70"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Zach Merrett - Under 23.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-71" name="__codelineno-5-71" href="#__codelineno-5-71"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12693&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&gt;</span> <span class="mf">20.5</span><span class="p">:</span>
<a id="__codelineno-5-72" name="__codelineno-5-72" href="#__codelineno-5-72"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Zak Butters - Over 20.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-73" name="__codelineno-5-73" href="#__codelineno-5-73"></a>            <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12693&#39;</span> <span class="ow">and</span> <span class="n">total_votes</span> <span class="o">&lt;</span> <span class="mf">20.5</span><span class="p">:</span>
<a id="__codelineno-5-74" name="__codelineno-5-74" href="#__codelineno-5-74"></a>                <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Zak Butters - Over 20.5 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-75" name="__codelineno-5-75" href="#__codelineno-5-75"></a>
<a id="__codelineno-5-76" name="__codelineno-5-76" href="#__codelineno-5-76"></a>    <span class="n">lines</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
<a id="__codelineno-5-77" name="__codelineno-5-77" href="#__codelineno-5-77"></a>    <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;Model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">model</span>
<a id="__codelineno-5-78" name="__codelineno-5-78" href="#__codelineno-5-78"></a>
<a id="__codelineno-5-79" name="__codelineno-5-79" href="#__codelineno-5-79"></a>    <span class="c1"># We reset the index because the market_name and runner_name are in the index</span>
<a id="__codelineno-5-80" name="__codelineno-5-80" href="#__codelineno-5-80"></a>    <span class="n">lines</span> <span class="o">=</span> <span class="n">lines</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<a id="__codelineno-5-81" name="__codelineno-5-81" href="#__codelineno-5-81"></a>    <span class="n">lines</span><span class="p">[[</span><span class="s1">&#39;market_name&#39;</span><span class="p">,</span> <span class="s1">&#39;runner_name&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; - &#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-5-82" name="__codelineno-5-82" href="#__codelineno-5-82"></a>    <span class="n">lines</span> <span class="o">=</span> <span class="n">lines</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;rated_price&#39;</span><span class="p">})</span>
<a id="__codelineno-5-83" name="__codelineno-5-83" href="#__codelineno-5-83"></a>    <span class="n">lines</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[[</span><span class="s1">&#39;Model&#39;</span><span class="p">,</span><span class="s1">&#39;market_name&#39;</span><span class="p">,</span><span class="s1">&#39;runner_name&#39;</span><span class="p">,</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]]</span>
<a id="__codelineno-5-84" name="__codelineno-5-84" href="#__codelineno-5-84"></a>
<a id="__codelineno-5-85" name="__codelineno-5-85" href="#__codelineno-5-85"></a>    <span class="n">lines</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">num_simulations</span><span class="p">)</span>
<a id="__codelineno-5-86" name="__codelineno-5-86" href="#__codelineno-5-86"></a>
<a id="__codelineno-5-87" name="__codelineno-5-87" href="#__codelineno-5-87"></a>    <span class="k">if</span> <span class="n">counter</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-5-88" name="__codelineno-5-88" href="#__codelineno-5-88"></a>        <span class="n">lines</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;playerVoteLines.csv&#39;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
<a id="__codelineno-5-89" name="__codelineno-5-89" href="#__codelineno-5-89"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-5-90" name="__codelineno-5-90" href="#__codelineno-5-90"></a>        <span class="n">lines</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;playerVoteLines.csv&#39;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
<a id="__codelineno-5-91" name="__codelineno-5-91" href="#__codelineno-5-91"></a>
<a id="__codelineno-5-92" name="__codelineno-5-92" href="#__codelineno-5-92"></a>    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-5-93" name="__codelineno-5-93" href="#__codelineno-5-93"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;model </span><span class="si">{</span><span class="n">counter</span><span class="si">}</span><span class="s1"> processed&#39;</span><span class="p">)</span>
</code></pre></div>
<h2 id="player-head-to-head">Player Head-To-Head</h2>
<div class="highlight"><span class="filename">Head to Head Markets</span><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># Create lists for each market match up</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="n">Keays_Rayner</span><span class="o">=</span> <span class="p">[</span><span class="s1">&#39;12441&#39;</span><span class="p">,</span><span class="s1">&#39;12594&#39;</span><span class="p">]</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="n">Serong_Merrett</span><span class="o">=</span> <span class="p">[</span><span class="s1">&#39;12786&#39;</span><span class="p">,</span><span class="s1">&#39;12249&#39;</span><span class="p">]</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="n">Zorko_Whitfield</span><span class="o">=</span> <span class="p">[</span><span class="s1">&#39;12082&#39;</span><span class="p">,</span><span class="s1">&#39;12147&#39;</span><span class="p">]</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="n">Moore_Sinclair</span><span class="o">=</span> <span class="p">[</span><span class="s1">&#39;12710&#39;</span><span class="p">,</span><span class="s1">&#39;12337&#39;</span><span class="p">]</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="n">Reid_Dempsey</span><span class="o">=</span> <span class="p">[</span><span class="s1">&#39;13112&#39;</span><span class="p">,</span><span class="s1">&#39;12976&#39;</span><span class="p">]</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="n">Sheezel_Flanders</span><span class="o">=</span> <span class="p">[</span><span class="s1">&#39;13030&#39;</span><span class="p">,</span><span class="s1">&#39;12825&#39;</span><span class="p">]</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="n">Yeo_Worpel</span><span class="o">=</span> <span class="p">[</span><span class="s1">&#39;12093&#39;</span><span class="p">,</span><span class="s1">&#39;12626&#39;</span><span class="p">]</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="n">Heeney_Neale</span><span class="o">=</span> <span class="p">[</span><span class="s1">&#39;12331&#39;</span><span class="p">,</span><span class="s1">&#39;12061&#39;</span><span class="p">]</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="n">Warner_Anderson</span><span class="o">=</span> <span class="p">[</span><span class="s1">&#39;12799&#39;</span><span class="p">,</span><span class="s1">&#39;12767&#39;</span><span class="p">]</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="n">Dangerfield_Greene</span><span class="o">=</span> <span class="p">[</span><span class="s1">&#39;11706&#39;</span><span class="p">,</span><span class="s1">&#39;12026&#39;</span><span class="p">]</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="c1"># Create a list of lists</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="n">head_to_head_markets</span> <span class="o">=</span> <span class="p">[</span><span class="n">Keays_Rayner</span><span class="p">,</span><span class="n">Serong_Merrett</span><span class="p">,</span><span class="n">Zorko_Whitfield</span><span class="p">,</span><span class="n">Moore_Sinclair</span><span class="p">,</span><span class="n">Reid_Dempsey</span><span class="p">,</span><span class="n">Sheezel_Flanders</span><span class="p">,</span><span class="n">Yeo_Worpel</span><span class="p">,</span><span class="n">Heeney_Neale</span><span class="p">,</span><span class="n">Warner_Anderson</span><span class="p">,</span><span class="n">Dangerfield_Greene</span><span class="p">]</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;simulation_results_</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s1">.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>    <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\.0$&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>    <span class="c1"># Initialise a dictionary with every market_name and runner_name</span>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>    <span class="n">head_to_head</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>        <span class="s1">&#39;Ben Keays v Cam Rayner - Ben Keays&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a>        <span class="s1">&#39;Ben Keays v Cam Rayner - Cam Rayner&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a>        <span class="s1">&#39;Caleb Serong v Zach Merrett - Caleb Serong&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a>        <span class="s1">&#39;Caleb Serong v Zach Merrett - Zach Merrett&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a>        <span class="s1">&#39;Dayne Zorko v Lachie Whitfield - Dayne Zorko&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a>        <span class="s1">&#39;Dayne Zorko v Lachie Whitfield - Lachie Whitfield&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a>        <span class="s1">&#39;Dylan Moore v Jack Sinclair - Dylan Moore&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a>        <span class="s1">&#39;Dylan Moore v Jack Sinclair - Jack Sinclair&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a>        <span class="s1">&#39;Harley Reid v Oliver Dempsey - Harley Reid&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a>        <span class="s1">&#39;Harley Reid v Oliver Dempsey - Oliver Dempsey&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a>        <span class="s1">&#39;Harry Sheezel v Sam Flanders - Harry Sheezel&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a>        <span class="s1">&#39;Harry Sheezel v Sam Flanders - Sam Flanders&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a>        <span class="s1">&#39;James Worpel v Elliot Yeo - Elliot Yeo&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a>        <span class="s1">&#39;James Worpel v Elliot Yeo - James Worpel&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a>        <span class="s1">&#39;Lachie Neale v Isaac Heeney - Isaac Heeney&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a>        <span class="s1">&#39;Lachie Neale v Isaac Heeney - Lachie Neale&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a>        <span class="s1">&#39;Noah Anderson v Chad Warner - Chad Warner&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a>        <span class="s1">&#39;Noah Anderson v Chad Warner - Noah Anderson&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a>        <span class="s1">&#39;Patrick Dangerfield v Toby Greene - Patrick Dangerfield&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-44" name="__codelineno-6-44" href="#__codelineno-6-44"></a>        <span class="s1">&#39;Patrick Dangerfield v Toby Greene - Toby Greene&#39;</span> <span class="p">:</span> <span class="mi">0</span>
<a id="__codelineno-6-45" name="__codelineno-6-45" href="#__codelineno-6-45"></a>    <span class="p">}</span>
<a id="__codelineno-6-46" name="__codelineno-6-46" href="#__codelineno-6-46"></a>
<a id="__codelineno-6-47" name="__codelineno-6-47" href="#__codelineno-6-47"></a>    <span class="k">for</span> <span class="n">market</span> <span class="ow">in</span> <span class="n">head_to_head_markets</span><span class="p">:</span>
<a id="__codelineno-6-48" name="__codelineno-6-48" href="#__codelineno-6-48"></a>
<a id="__codelineno-6-49" name="__codelineno-6-49" href="#__codelineno-6-49"></a>        <span class="n">market_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">market</span><span class="p">]</span>
<a id="__codelineno-6-50" name="__codelineno-6-50" href="#__codelineno-6-50"></a>
<a id="__codelineno-6-51" name="__codelineno-6-51" href="#__codelineno-6-51"></a>        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">market_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
<a id="__codelineno-6-52" name="__codelineno-6-52" href="#__codelineno-6-52"></a>
<a id="__codelineno-6-53" name="__codelineno-6-53" href="#__codelineno-6-53"></a>            <span class="n">market_sorted_head_to_head</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-6-54" name="__codelineno-6-54" href="#__codelineno-6-54"></a>
<a id="__codelineno-6-55" name="__codelineno-6-55" href="#__codelineno-6-55"></a>            <span class="n">max_value</span> <span class="o">=</span> <span class="n">market_sorted_head_to_head</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<a id="__codelineno-6-56" name="__codelineno-6-56" href="#__codelineno-6-56"></a>
<a id="__codelineno-6-57" name="__codelineno-6-57" href="#__codelineno-6-57"></a>            <span class="n">winners</span> <span class="o">=</span> <span class="p">(</span><span class="n">market_sorted_head_to_head</span> <span class="o">==</span> <span class="n">max_value</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<a id="__codelineno-6-58" name="__codelineno-6-58" href="#__codelineno-6-58"></a>
<a id="__codelineno-6-59" name="__codelineno-6-59" href="#__codelineno-6-59"></a>            <span class="k">for</span> <span class="n">player_id</span><span class="p">,</span> <span class="n">player_value</span> <span class="ow">in</span> <span class="n">market_sorted_head_to_head</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-6-60" name="__codelineno-6-60" href="#__codelineno-6-60"></a>                <span class="k">if</span> <span class="n">player_value</span> <span class="o">==</span> <span class="n">max_value</span><span class="p">:</span>
<a id="__codelineno-6-61" name="__codelineno-6-61" href="#__codelineno-6-61"></a>
<a id="__codelineno-6-62" name="__codelineno-6-62" href="#__codelineno-6-62"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12441&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Ben Keays v Cam Rayner - Ben Keays&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-63" name="__codelineno-6-63" href="#__codelineno-6-63"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12786&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Caleb Serong v Zach Merrett - Caleb Serong&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-64" name="__codelineno-6-64" href="#__codelineno-6-64"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12082&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Dayne Zorko v Lachie Whitfield - Dayne Zorko&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-65" name="__codelineno-6-65" href="#__codelineno-6-65"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12710&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Dylan Moore v Jack Sinclair - Dylan Moore&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-66" name="__codelineno-6-66" href="#__codelineno-6-66"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;13112&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Harley Reid v Oliver Dempsey - Harley Reid&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-67" name="__codelineno-6-67" href="#__codelineno-6-67"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;13030&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Harry Sheezel v Sam Flanders - Harry Sheezel&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-68" name="__codelineno-6-68" href="#__codelineno-6-68"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12093&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;James Worpel v Elliot Yeo - Elliot Yeo&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-69" name="__codelineno-6-69" href="#__codelineno-6-69"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12331&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Lachie Neale v Isaac Heeney - Isaac Heeney&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-70" name="__codelineno-6-70" href="#__codelineno-6-70"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12799&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Noah Anderson v Chad Warner - Chad Warner&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-71" name="__codelineno-6-71" href="#__codelineno-6-71"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;11706&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Patrick Dangerfield v Toby Greene - Patrick Dangerfield&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-72" name="__codelineno-6-72" href="#__codelineno-6-72"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12594&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Ben Keays v Cam Rayner - Cam Rayner&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-73" name="__codelineno-6-73" href="#__codelineno-6-73"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12249&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Caleb Serong v Zach Merrett - Zach Merrett&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-74" name="__codelineno-6-74" href="#__codelineno-6-74"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12147&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Dayne Zorko v Lachie Whitfield - Lachie Whitfield&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-75" name="__codelineno-6-75" href="#__codelineno-6-75"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12337&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Dylan Moore v Jack Sinclair - Jack Sinclair&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-76" name="__codelineno-6-76" href="#__codelineno-6-76"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12976&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Harley Reid v Oliver Dempsey - Oliver Dempsey&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-77" name="__codelineno-6-77" href="#__codelineno-6-77"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12825&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Harry Sheezel v Sam Flanders - Sam Flanders&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-78" name="__codelineno-6-78" href="#__codelineno-6-78"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12626&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;James Worpel v Elliot Yeo - James Worpel&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-79" name="__codelineno-6-79" href="#__codelineno-6-79"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12061&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Lachie Neale v Isaac Heeney - Lachie Neale&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-80" name="__codelineno-6-80" href="#__codelineno-6-80"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12767&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Noah Anderson v Chad Warner - Noah Anderson&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-81" name="__codelineno-6-81" href="#__codelineno-6-81"></a>                    <span class="k">if</span> <span class="n">player_id</span> <span class="o">==</span> <span class="s1">&#39;12026&#39;</span><span class="p">:</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Patrick Dangerfield v Toby Greene - Toby Greene&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">winners</span>
<a id="__codelineno-6-82" name="__codelineno-6-82" href="#__codelineno-6-82"></a>
<a id="__codelineno-6-83" name="__codelineno-6-83" href="#__codelineno-6-83"></a>    <span class="n">head_to_head</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">head_to_head</span><span class="p">,</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
<a id="__codelineno-6-84" name="__codelineno-6-84" href="#__codelineno-6-84"></a>
<a id="__codelineno-6-85" name="__codelineno-6-85" href="#__codelineno-6-85"></a>    <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;Model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">model</span>
<a id="__codelineno-6-86" name="__codelineno-6-86" href="#__codelineno-6-86"></a>
<a id="__codelineno-6-87" name="__codelineno-6-87" href="#__codelineno-6-87"></a>    <span class="c1"># We reset the index because the market_name and runner_name are in the index</span>
<a id="__codelineno-6-88" name="__codelineno-6-88" href="#__codelineno-6-88"></a>    <span class="n">head_to_head</span> <span class="o">=</span> <span class="n">head_to_head</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<a id="__codelineno-6-89" name="__codelineno-6-89" href="#__codelineno-6-89"></a>    <span class="n">head_to_head</span><span class="p">[[</span><span class="s1">&#39;market_name&#39;</span><span class="p">,</span> <span class="s1">&#39;runner_name&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; - &#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-6-90" name="__codelineno-6-90" href="#__codelineno-6-90"></a>    <span class="n">head_to_head</span> <span class="o">=</span> <span class="n">head_to_head</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;rated_price&#39;</span><span class="p">})</span>
<a id="__codelineno-6-91" name="__codelineno-6-91" href="#__codelineno-6-91"></a>    <span class="n">head_to_head</span> <span class="o">=</span> <span class="n">head_to_head</span><span class="p">[[</span><span class="s1">&#39;Model&#39;</span><span class="p">,</span><span class="s1">&#39;market_name&#39;</span><span class="p">,</span><span class="s1">&#39;runner_name&#39;</span><span class="p">,</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]]</span>
<a id="__codelineno-6-92" name="__codelineno-6-92" href="#__codelineno-6-92"></a>
<a id="__codelineno-6-93" name="__codelineno-6-93" href="#__codelineno-6-93"></a>    <span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">head_to_head</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">num_simulations</span><span class="p">)</span>
<a id="__codelineno-6-94" name="__codelineno-6-94" href="#__codelineno-6-94"></a>
<a id="__codelineno-6-95" name="__codelineno-6-95" href="#__codelineno-6-95"></a>    <span class="k">if</span> <span class="n">counter</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-6-96" name="__codelineno-6-96" href="#__codelineno-6-96"></a>        <span class="n">head_to_head</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;headToHeadVotes.csv&#39;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
<a id="__codelineno-6-97" name="__codelineno-6-97" href="#__codelineno-6-97"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-6-98" name="__codelineno-6-98" href="#__codelineno-6-98"></a>        <span class="n">head_to_head</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;headToHeadVotes.csv&#39;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
<a id="__codelineno-6-99" name="__codelineno-6-99" href="#__codelineno-6-99"></a>
<a id="__codelineno-6-100" name="__codelineno-6-100" href="#__codelineno-6-100"></a>    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-6-101" name="__codelineno-6-101" href="#__codelineno-6-101"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;model </span><span class="si">{</span><span class="n">counter</span><span class="si">}</span><span class="s1"> processed&#39;</span><span class="p">)</span>
</code></pre></div>
<h2 id="winner-top-x-finish">Winner &amp; Top X Finish</h2>
<div class="highlight"><span class="filename">Winner & Top X markets</span><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;simulation_results_</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s1">.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>    <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\.0$&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>    <span class="c1"># Drop the &#39;Model&#39; and &#39;Simulation&#39; columns</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>    <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Model&#39;</span><span class="p">,</span> <span class="s1">&#39;Simulation&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>    <span class="n">top_rank_counts</span> <span class="o">=</span> <span class="p">{</span><span class="n">pid</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Winner&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Top 3 (Incl. Ineligible)&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Top 5 (Incl. Ineligible)&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Top 10 (Incl. Ineligible)&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Top 20 (Incl. Ineligible)&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span> <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">}</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>    <span class="c1"># Iterate over each row (simulation)</span>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>        <span class="c1"># Isolate the numeric values (votes) and sort them in descending order</span>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>        <span class="n">numeric_votes</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>  <span class="c1"># Convert the row to numeric, ignoring non-numeric values</span>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>        <span class="n">sorted_players</span> <span class="o">=</span> <span class="n">numeric_votes</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>        <span class="c1"># Get the top ranks (1, 3, 5, 10, 20)</span>
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>        <span class="k">for</span> <span class="n">rank</span><span class="p">,</span> <span class="p">(</span><span class="n">player_id</span><span class="p">,</span> <span class="n">player_value</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sorted_players</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="mi">1</span><span class="p">):</span>
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>            <span class="c1"># Count the number of players with the same value as the current player up to the current rank</span>
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>            <span class="n">rank_count</span> <span class="o">=</span> <span class="p">(</span><span class="n">sorted_players</span><span class="p">[:</span><span class="n">rank</span><span class="p">]</span> <span class="o">==</span> <span class="n">player_value</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>
<a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>            <span class="k">if</span> <span class="n">rank</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>                <span class="n">top_rank_counts</span><span class="p">[</span><span class="n">player_id</span><span class="p">][</span><span class="s1">&#39;Winner&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">rank_count</span>
<a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>            <span class="k">if</span> <span class="n">rank</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">:</span>
<a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>                <span class="n">top_rank_counts</span><span class="p">[</span><span class="n">player_id</span><span class="p">][</span><span class="s1">&#39;Top 3 (Incl. Ineligible)&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">rank_count</span>
<a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>            <span class="k">if</span> <span class="n">rank</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">:</span>
<a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a>                <span class="n">top_rank_counts</span><span class="p">[</span><span class="n">player_id</span><span class="p">][</span><span class="s1">&#39;Top 5 (Incl. Ineligible)&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">rank_count</span>
<a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a>            <span class="k">if</span> <span class="n">rank</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">:</span>
<a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a>                <span class="n">top_rank_counts</span><span class="p">[</span><span class="n">player_id</span><span class="p">][</span><span class="s1">&#39;Top 10 (Incl. Ineligible)&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">rank_count</span>
<a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a>            <span class="k">if</span> <span class="n">rank</span> <span class="o">&lt;=</span> <span class="mi">20</span><span class="p">:</span>
<a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a>                <span class="n">top_rank_counts</span><span class="p">[</span><span class="n">player_id</span><span class="p">][</span><span class="s1">&#39;Top 20 (Incl. Ineligible)&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">rank_count</span>
<a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a>
<a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a>    <span class="c1"># Convert the result dictionaries into DataFrames for easy viewing</span>
<a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a>    <span class="n">top_rank_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">top_rank_counts</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a>    <span class="n">top_rank_df</span><span class="p">[</span><span class="s1">&#39;Model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">model</span>
<a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a>
<a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a>    <span class="n">top_rank_df</span> <span class="o">=</span> <span class="n">top_rank_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<a id="__codelineno-7-40" name="__codelineno-7-40" href="#__codelineno-7-40"></a>    <span class="n">top_rank_df</span> <span class="o">=</span> <span class="n">top_rank_df</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">player_ids_df</span><span class="p">,</span><span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span><span class="n">left_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">],</span><span class="n">right_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;player_id&#39;</span><span class="p">])</span>
<a id="__codelineno-7-41" name="__codelineno-7-41" href="#__codelineno-7-41"></a>
<a id="__codelineno-7-42" name="__codelineno-7-42" href="#__codelineno-7-42"></a>    <span class="n">market_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;winner&#39;</span><span class="p">,</span> <span class="s1">&#39;top3&#39;</span><span class="p">,</span> <span class="s1">&#39;top5&#39;</span><span class="p">,</span> <span class="s1">&#39;top10&#39;</span><span class="p">,</span> <span class="s1">&#39;top20&#39;</span><span class="p">]</span>  <span class="c1"># Market labels</span>
<a id="__codelineno-7-43" name="__codelineno-7-43" href="#__codelineno-7-43"></a>    <span class="n">markets</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-7-44" name="__codelineno-7-44" href="#__codelineno-7-44"></a>
<a id="__codelineno-7-45" name="__codelineno-7-45" href="#__codelineno-7-45"></a>    <span class="c1"># Loop through the market labels and create DataFrames</span>
<a id="__codelineno-7-46" name="__codelineno-7-46" href="#__codelineno-7-46"></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">market_labels</span><span class="p">):</span>
<a id="__codelineno-7-47" name="__codelineno-7-47" href="#__codelineno-7-47"></a>        <span class="n">market_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<a id="__codelineno-7-48" name="__codelineno-7-48" href="#__codelineno-7-48"></a>            <span class="s1">&#39;Model&#39;</span><span class="p">:</span> <span class="n">top_rank_df</span><span class="p">[</span><span class="s1">&#39;Model&#39;</span><span class="p">],</span>
<a id="__codelineno-7-49" name="__codelineno-7-49" href="#__codelineno-7-49"></a>            <span class="s1">&#39;market_name&#39;</span><span class="p">:</span> <span class="n">top_rank_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span>
<a id="__codelineno-7-50" name="__codelineno-7-50" href="#__codelineno-7-50"></a>            <span class="s1">&#39;runner_name&#39;</span><span class="p">:</span> <span class="n">top_rank_df</span><span class="p">[</span><span class="s1">&#39;runner_name&#39;</span><span class="p">],</span>
<a id="__codelineno-7-51" name="__codelineno-7-51" href="#__codelineno-7-51"></a>            <span class="s1">&#39;rated_price&#39;</span><span class="p">:</span> <span class="n">top_rank_df</span><span class="p">[</span><span class="n">top_rank_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]]</span>
<a id="__codelineno-7-52" name="__codelineno-7-52" href="#__codelineno-7-52"></a>        <span class="p">})</span>
<a id="__codelineno-7-53" name="__codelineno-7-53" href="#__codelineno-7-53"></a>        <span class="n">markets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">market_df</span><span class="p">)</span>
<a id="__codelineno-7-54" name="__codelineno-7-54" href="#__codelineno-7-54"></a>
<a id="__codelineno-7-55" name="__codelineno-7-55" href="#__codelineno-7-55"></a>    <span class="c1"># Concatenate all the DataFrames into one</span>
<a id="__codelineno-7-56" name="__codelineno-7-56" href="#__codelineno-7-56"></a>    <span class="n">final_rank_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">markets</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-7-57" name="__codelineno-7-57" href="#__codelineno-7-57"></a>
<a id="__codelineno-7-58" name="__codelineno-7-58" href="#__codelineno-7-58"></a>    <span class="c1"># This is the list of players disqualified from winning the medal</span>
<a id="__codelineno-7-59" name="__codelineno-7-59" href="#__codelineno-7-59"></a>    <span class="n">disqualified_players</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-7-60" name="__codelineno-7-60" href="#__codelineno-7-60"></a>        <span class="s1">&#39;Isaac Heeney&#39;</span><span class="p">,</span>
<a id="__codelineno-7-61" name="__codelineno-7-61" href="#__codelineno-7-61"></a>        <span class="s1">&#39;Toby Greene&#39;</span><span class="p">,</span>
<a id="__codelineno-7-62" name="__codelineno-7-62" href="#__codelineno-7-62"></a>        <span class="s1">&#39;Izak Rankine&#39;</span><span class="p">,</span>
<a id="__codelineno-7-63" name="__codelineno-7-63" href="#__codelineno-7-63"></a>        <span class="s1">&#39;Kysaiah Pickett&#39;</span><span class="p">,</span>
<a id="__codelineno-7-64" name="__codelineno-7-64" href="#__codelineno-7-64"></a>        <span class="s1">&#39;Tom Liberatore&#39;</span><span class="p">,</span>
<a id="__codelineno-7-65" name="__codelineno-7-65" href="#__codelineno-7-65"></a>        <span class="s1">&#39;Dan Houston&#39;</span><span class="p">,</span>
<a id="__codelineno-7-66" name="__codelineno-7-66" href="#__codelineno-7-66"></a>        <span class="s1">&#39;Harley Reid&#39;</span><span class="p">,</span>
<a id="__codelineno-7-67" name="__codelineno-7-67" href="#__codelineno-7-67"></a>        <span class="s1">&#39;Nat Fyfe&#39;</span>
<a id="__codelineno-7-68" name="__codelineno-7-68" href="#__codelineno-7-68"></a>    <span class="p">]</span>
<a id="__codelineno-7-69" name="__codelineno-7-69" href="#__codelineno-7-69"></a>
<a id="__codelineno-7-70" name="__codelineno-7-70" href="#__codelineno-7-70"></a>    <span class="c1"># Calculate the sum of &#39;rated_price&#39; for specified runner names where market_name is &#39;Winner&#39;</span>
<a id="__codelineno-7-71" name="__codelineno-7-71" href="#__codelineno-7-71"></a>    <span class="n">rated_price_sum</span> <span class="o">=</span> <span class="n">final_rank_df</span><span class="p">[</span>
<a id="__codelineno-7-72" name="__codelineno-7-72" href="#__codelineno-7-72"></a>        <span class="p">(</span><span class="n">final_rank_df</span><span class="p">[</span><span class="s1">&#39;runner_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">disqualified_players</span><span class="p">))</span> <span class="o">&amp;</span>
<a id="__codelineno-7-73" name="__codelineno-7-73" href="#__codelineno-7-73"></a>        <span class="p">(</span><span class="n">final_rank_df</span><span class="p">[</span><span class="s1">&#39;market_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Winner&#39;</span><span class="p">)</span>
<a id="__codelineno-7-74" name="__codelineno-7-74" href="#__codelineno-7-74"></a>    <span class="p">][</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<a id="__codelineno-7-75" name="__codelineno-7-75" href="#__codelineno-7-75"></a>
<a id="__codelineno-7-76" name="__codelineno-7-76" href="#__codelineno-7-76"></a>    <span class="c1"># Calculate winner_simulations</span>
<a id="__codelineno-7-77" name="__codelineno-7-77" href="#__codelineno-7-77"></a>    <span class="n">winner_simulations</span> <span class="o">=</span> <span class="n">num_simulations</span> <span class="o">-</span> <span class="n">rated_price_sum</span>
<a id="__codelineno-7-78" name="__codelineno-7-78" href="#__codelineno-7-78"></a>
<a id="__codelineno-7-79" name="__codelineno-7-79" href="#__codelineno-7-79"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_rated_price</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
<a id="__codelineno-7-80" name="__codelineno-7-80" href="#__codelineno-7-80"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-7-81" name="__codelineno-7-81" href="#__codelineno-7-81"></a>            <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;market_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Winner&#39;</span><span class="p">:</span>
<a id="__codelineno-7-82" name="__codelineno-7-82" href="#__codelineno-7-82"></a>                <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">winner_simulations</span><span class="p">)</span>
<a id="__codelineno-7-83" name="__codelineno-7-83" href="#__codelineno-7-83"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-7-84" name="__codelineno-7-84" href="#__codelineno-7-84"></a>                <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">num_simulations</span><span class="p">)</span>
<a id="__codelineno-7-85" name="__codelineno-7-85" href="#__codelineno-7-85"></a>        <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
<a id="__codelineno-7-86" name="__codelineno-7-86" href="#__codelineno-7-86"></a>            <span class="k">return</span> <span class="mi">1000</span>
<a id="__codelineno-7-87" name="__codelineno-7-87" href="#__codelineno-7-87"></a>
<a id="__codelineno-7-88" name="__codelineno-7-88" href="#__codelineno-7-88"></a>    <span class="c1"># This function will create rated prices for all markets (including removing disqualified players from the Winner prices)</span>
<a id="__codelineno-7-89" name="__codelineno-7-89" href="#__codelineno-7-89"></a>    <span class="n">final_rank_df</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_rank_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">calculate_rated_price</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-7-90" name="__codelineno-7-90" href="#__codelineno-7-90"></a>
<a id="__codelineno-7-91" name="__codelineno-7-91" href="#__codelineno-7-91"></a>    <span class="c1"># Write results to CSV</span>
<a id="__codelineno-7-92" name="__codelineno-7-92" href="#__codelineno-7-92"></a>    <span class="k">if</span> <span class="n">counter</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-7-93" name="__codelineno-7-93" href="#__codelineno-7-93"></a>        <span class="n">final_rank_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;winnerTopXMarkets.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
<a id="__codelineno-7-94" name="__codelineno-7-94" href="#__codelineno-7-94"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-7-95" name="__codelineno-7-95" href="#__codelineno-7-95"></a>        <span class="n">final_rank_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;winnerTopXMarkets.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
<a id="__codelineno-7-96" name="__codelineno-7-96" href="#__codelineno-7-96"></a>
<a id="__codelineno-7-97" name="__codelineno-7-97" href="#__codelineno-7-97"></a>    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-7-98" name="__codelineno-7-98" href="#__codelineno-7-98"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;model </span><span class="si">{</span><span class="n">counter</span><span class="si">}</span><span class="s1"> processed&#39;</span><span class="p">)</span>
</code></pre></div>
<h2 id="to-poll-x-votes">To Poll X Votes</h2>
<div class="highlight"><span class="filename">To Poll X Votes markets</span><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;simulation_results_</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s1">.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>    <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\.0$&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>    <span class="c1"># Drop the &#39;Model&#39; and &#39;Simulation&#39; columns</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>    <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Model&#39;</span><span class="p">,</span> <span class="s1">&#39;Simulation&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>    <span class="n">vote_sum_counts</span> <span class="o">=</span> <span class="p">{</span><span class="n">pid</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;To Poll a Vote&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;To Poll 10 Votes&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;To Poll 15 Votes&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;To Poll 20 Votes&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span> <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">}</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>    <span class="c1"># Iterate over each row (simulation)</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>        <span class="c1"># Isolate the numeric values (votes) and sort them in descending order</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>        <span class="n">numeric_votes</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>  <span class="c1"># Convert the row to numeric, ignoring non-numeric values</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>        <span class="n">sorted_players</span> <span class="o">=</span> <span class="n">numeric_votes</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>        <span class="c1"># Process the sum of votes for each player</span>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a>        <span class="k">for</span> <span class="n">player_id</span><span class="p">,</span> <span class="n">total_votes</span> <span class="ow">in</span> <span class="n">row</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a>            <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">total_votes</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a>                <span class="n">vote_sum_counts</span><span class="p">[</span><span class="n">player_id</span><span class="p">][</span><span class="s1">&#39;To Poll a Vote&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a>            <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">total_votes</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">:</span>
<a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a>                <span class="n">vote_sum_counts</span><span class="p">[</span><span class="n">player_id</span><span class="p">][</span><span class="s1">&#39;To Poll 10 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a>            <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">total_votes</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">15</span><span class="p">:</span>
<a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a>                <span class="n">vote_sum_counts</span><span class="p">[</span><span class="n">player_id</span><span class="p">][</span><span class="s1">&#39;To Poll 15 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a>            <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">total_votes</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">20</span><span class="p">:</span>
<a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a>                <span class="n">vote_sum_counts</span><span class="p">[</span><span class="n">player_id</span><span class="p">][</span><span class="s1">&#39;To Poll 20 Votes&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a>
<a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a>    <span class="n">vote_sum_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">vote_sum_counts</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a>    <span class="n">vote_sum_df</span><span class="p">[</span><span class="s1">&#39;Model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">model</span>
<a id="__codelineno-8-32" name="__codelineno-8-32" href="#__codelineno-8-32"></a>
<a id="__codelineno-8-33" name="__codelineno-8-33" href="#__codelineno-8-33"></a>    <span class="c1"># Reset index for vote_sum_df and merge with player_ids_df</span>
<a id="__codelineno-8-34" name="__codelineno-8-34" href="#__codelineno-8-34"></a>    <span class="n">vote_sum_df</span> <span class="o">=</span> <span class="n">vote_sum_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<a id="__codelineno-8-35" name="__codelineno-8-35" href="#__codelineno-8-35"></a>    <span class="n">vote_sum_df</span> <span class="o">=</span> <span class="n">vote_sum_df</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">player_ids_df</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">],</span> <span class="n">right_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;player_id&#39;</span><span class="p">])</span>
<a id="__codelineno-8-36" name="__codelineno-8-36" href="#__codelineno-8-36"></a>
<a id="__codelineno-8-37" name="__codelineno-8-37" href="#__codelineno-8-37"></a>    <span class="c1"># Market labels</span>
<a id="__codelineno-8-38" name="__codelineno-8-38" href="#__codelineno-8-38"></a>    <span class="n">market_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;To Poll a Vote&#39;</span><span class="p">,</span> <span class="s1">&#39;To Poll 10 Votes&#39;</span><span class="p">,</span> <span class="s1">&#39;To Poll 15 Votes&#39;</span><span class="p">,</span> <span class="s1">&#39;To Poll 20 Votes&#39;</span><span class="p">]</span>
<a id="__codelineno-8-39" name="__codelineno-8-39" href="#__codelineno-8-39"></a>    <span class="n">markets</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-8-40" name="__codelineno-8-40" href="#__codelineno-8-40"></a>
<a id="__codelineno-8-41" name="__codelineno-8-41" href="#__codelineno-8-41"></a>    <span class="c1"># Loop through the market labels and create DataFrames</span>
<a id="__codelineno-8-42" name="__codelineno-8-42" href="#__codelineno-8-42"></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">market_labels</span><span class="p">):</span>
<a id="__codelineno-8-43" name="__codelineno-8-43" href="#__codelineno-8-43"></a>        <span class="n">market_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<a id="__codelineno-8-44" name="__codelineno-8-44" href="#__codelineno-8-44"></a>            <span class="s1">&#39;Model&#39;</span><span class="p">:</span> <span class="n">vote_sum_df</span><span class="p">[</span><span class="s1">&#39;Model&#39;</span><span class="p">],</span>
<a id="__codelineno-8-45" name="__codelineno-8-45" href="#__codelineno-8-45"></a>            <span class="s1">&#39;market_name&#39;</span><span class="p">:</span> <span class="n">vote_sum_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span>  <span class="c1"># i + 1 to skip the &#39;Model&#39; column</span>
<a id="__codelineno-8-46" name="__codelineno-8-46" href="#__codelineno-8-46"></a>            <span class="s1">&#39;runner_name&#39;</span><span class="p">:</span> <span class="n">vote_sum_df</span><span class="p">[</span><span class="s1">&#39;runner_name&#39;</span><span class="p">],</span>
<a id="__codelineno-8-47" name="__codelineno-8-47" href="#__codelineno-8-47"></a>            <span class="s1">&#39;rated_price&#39;</span><span class="p">:</span> <span class="n">vote_sum_df</span><span class="p">[</span><span class="n">vote_sum_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]]</span>
<a id="__codelineno-8-48" name="__codelineno-8-48" href="#__codelineno-8-48"></a>        <span class="p">})</span>
<a id="__codelineno-8-49" name="__codelineno-8-49" href="#__codelineno-8-49"></a>        <span class="n">markets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">market_df</span><span class="p">)</span>
<a id="__codelineno-8-50" name="__codelineno-8-50" href="#__codelineno-8-50"></a>
<a id="__codelineno-8-51" name="__codelineno-8-51" href="#__codelineno-8-51"></a>    <span class="c1"># Concatenate all the DataFrames into one</span>
<a id="__codelineno-8-52" name="__codelineno-8-52" href="#__codelineno-8-52"></a>    <span class="n">final_vote_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">markets</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-8-53" name="__codelineno-8-53" href="#__codelineno-8-53"></a>    <span class="n">final_vote_df</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">final_vote_df</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">num_simulations</span><span class="p">)</span>
<a id="__codelineno-8-54" name="__codelineno-8-54" href="#__codelineno-8-54"></a>
<a id="__codelineno-8-55" name="__codelineno-8-55" href="#__codelineno-8-55"></a>    <span class="c1"># Write results to CSV</span>
<a id="__codelineno-8-56" name="__codelineno-8-56" href="#__codelineno-8-56"></a>    <span class="k">if</span> <span class="n">counter</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-8-57" name="__codelineno-8-57" href="#__codelineno-8-57"></a>        <span class="n">final_vote_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;toPollXVotesMarkets.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
<a id="__codelineno-8-58" name="__codelineno-8-58" href="#__codelineno-8-58"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-8-59" name="__codelineno-8-59" href="#__codelineno-8-59"></a>        <span class="n">final_vote_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;toPollXVotesMarkets.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
<a id="__codelineno-8-60" name="__codelineno-8-60" href="#__codelineno-8-60"></a>
<a id="__codelineno-8-61" name="__codelineno-8-61" href="#__codelineno-8-61"></a>    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-8-62" name="__codelineno-8-62" href="#__codelineno-8-62"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;model </span><span class="si">{</span><span class="n">counter</span><span class="si">}</span><span class="s1"> processed&#39;</span><span class="p">)</span>
</code></pre></div>
<h2 id="combine-ratings-and-join-to-betfair-markets">Combine Ratings and Join to Betfair markets</h2>
<p>Now just combine all our csv files and then join to our market data that we've pulled from the Betfair API - <a href="src/modelling/assets/brownlow_market_prices.csv">API File</a></p>
<div class="highlight"><span class="filename">Combine Files</span><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">monte_carlo_rated_prices</span> <span class="o">=</span> <span class="p">[</span><span class="n">final_vote_df</span><span class="p">,</span><span class="n">final_rank_df</span><span class="p">,</span><span class="n">head_to_head</span><span class="p">,</span><span class="n">lines</span><span class="p">,</span><span class="n">player_team_votes</span><span class="p">,</span><span class="n">df_team_highest_count</span><span class="p">]</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="n">all_rated_prices</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">monte_carlo_rated_prices</span><span class="p">,</span><span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="n">all_rated_prices</span><span class="p">[</span><span class="s1">&#39;runner_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">all_rated_prices</span><span class="p">[</span><span class="s1">&#39;runner_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="n">all_rated_prices</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;all_rated_prices.csv&#39;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="n">brownlow_prices</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;brownlow_market_prices.csv&#39;</span><span class="p">)</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="n">brownlow_prices</span><span class="p">[</span><span class="s1">&#39;runner_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">brownlow_prices</span><span class="p">[</span><span class="s1">&#39;runner_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="n">brownlow_prices</span><span class="p">[</span><span class="s1">&#39;runner_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">brownlow_prices</span><span class="p">[</span><span class="s1">&#39;runner_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;McClugagge&#39;</span><span class="p">,</span><span class="s1">&#39;McCluggage&#39;</span><span class="p">)</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="n">brownlow_rated_prices</span> <span class="o">=</span> <span class="n">brownlow_prices</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">all_rated_prices</span><span class="p">,</span><span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span><span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;market_name&#39;</span><span class="p">,</span><span class="s1">&#39;runner_name&#39;</span><span class="p">])</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="c1"># Replace &#39;inf&#39; with 1000</span>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="n">brownlow_rated_prices</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">brownlow_rated_prices</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="c1"># Cap values greater than 1000 to 1000</span>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="n">brownlow_rated_prices</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">brownlow_rated_prices</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">brownlow_rated_prices</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="c1"># Drop disqualified players</span>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="n">brownlow_rated_prices</span> <span class="o">=</span> <span class="n">brownlow_rated_prices</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>    <span class="n">brownlow_rated_prices</span><span class="p">[</span>
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a>        <span class="p">(</span><span class="n">brownlow_rated_prices</span><span class="p">[</span><span class="s1">&#39;market_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Winner&#39;</span><span class="p">)</span> <span class="o">&amp;</span> 
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a>        <span class="p">(</span><span class="n">brownlow_rated_prices</span><span class="p">[</span><span class="s1">&#39;best_back_price&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mf">1.01</span><span class="p">)</span>
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a>    <span class="p">]</span><span class="o">.</span><span class="n">index</span>
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="p">)</span>
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a><span class="c1"># Calculate Implied Value compared to market prices</span>
<a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a><span class="n">brownlow_rated_prices</span><span class="p">[</span><span class="s1">&#39;implied_value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">brownlow_rated_prices</span><span class="p">[</span><span class="s1">&#39;rated_price&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">brownlow_rated_prices</span><span class="p">[</span><span class="s1">&#39;best_back_price&#39;</span><span class="p">]</span>
<a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a><span class="n">brownlow_rated_prices</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;brownlow_rated_prices.csv&#39;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>
<h2 id="conclusion">Conclusion</h2>
<p>This code does take quite a lot of time to setup however the process is powerful and can be used across any market on the exchange.
While the Brownlow is a once yearly event, if you took the time to set this up for Match Odds or Handicap markets, it can be used on a more regular basis!</p>
<hr />
<h3 id="disclaimer">Disclaimer</h3>
<p>Note that whilst models and automated strategies are fun and rewarding to create, we can't promise that your model or betting strategy will be profitable, and we make no representations in relation to the code shared or information on this page. If you're using this code or implementing your own strategies, you do so entirely at your own risk and you are responsible for any winnings/losses incurred. Under no circumstances will Betfair be liable for any loss or damage you suffer.</p>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
    
      <nav class="md-footer__inner md-grid" aria-label="footer.title">
        
          
          <a href="../cloudOrLocalMachine/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Cloud or Local" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  Previous
                </span>
                Cloud or Local
              </div>
            </div>
          </a>
        
        
          
          <a href="../AFLPlayerDisposalsTutorial/" class="md-footer__link md-footer__link--next" aria-label="Next: Player Disposal Lines" rel="next">
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  Next
                </span>
                Player Disposal Lines
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-copyright">
  
  
</div>
        
          <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/Betfair_Aus" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://linkedin.com/company/betfair-australia" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://facebook.com/betfairaustralia" target="_blank" rel="noopener" title="facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://youtube.com/user/betfairaus" target="_blank" rel="noopener" title="youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/betfair-datascientists" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
        
      </div>

      <div class="bf-footer">
          <div class="bf-footer-inner">
              <p class="bf-light">Betfair Pty Limited is licensed and regulated by the Northern Territory Government of Australia.</p>
              <p class="bf-dark">Betfair Pty Limited's gambling operations are governed by its <a class='inner-link' href="https://www.betfair.com.au/info/responsible-gambling/">Responsible Gambling Code of Conduct</a> and for South
              Australian residents by the <a class='inner-link' href="https://www.betfair.com.au/info/pdf/SA-GCoP.pdf">South Australian Responsible Gambling Code of Practice.</a></p>
              <!-- BetStop block in white box -->
              <div class="full-screen">
                  <p style="font-family: Arial, sans-serif; font-size: 1.2rem; font-weight: bold; text-align: center;">
                    BetStop is the Australian National Self-Exclusion Register. For more information, please visit 
                    <a href="https://betstop.gov.au" style="font-family: Arial, sans-serif; font-size: 1.2rem; font-weight: bold; color: black; text-decoration: none;">
                      https://betstop.gov.au
                    </a>
                  </p>
              </div>
              <br />
              <!-- RG footer block -->
              <div class="full-screen"> <p style="font-family: Arial, sans-serif; font-size: 1.2rem; font-weight: bold; text-align: center;">What are you really gambling with&#63;</p> <p style="font-family: Arial, sans-serif; font-size: 0.8rem; font-weight: bold; text-align: center;">For free and confidential support call 1800 858 858 or visit <a href="http://www.gamblinghelponline.org.au" style="color: black; text-decoration: underline;">gamblinghelponline.org.au</a></p> </div>
              <ul class="bf-links">
                <li><a href="https://www.betfair.com.au/hub/help/account-help/responsible-gambling/">Responsible Gambling</a><span>|</span></li>
                <li><a href="http://www.betfair.com/AUS_NZL/aboutUs/Terms.and.Conditions/">Terms & Conditions</a><span>|</span></li>
                <li><a href="https://www.betfair.com.au/info/privacy-policy/">Privacy Policy</a><span>|</span></li>
                <li><a href="http://www.betfair.com/en/aboutUs/Rules.and.Regulations/">Rules & Regulations</a><span>|</span></li>
                <li><a href="https://www.betfair.com/AUS_NZL/aboutUs/Dispute.Resolution">Dispute Resolution</a></li>
              </ul>
          </div>
      </div>
    </div>

    <script src="https://js.adsrvr.org/up_loader.1.1.0.js" type="text/javascript"></script>
    <script type="text/javascript">
        ttd_dom_ready( function() {
            if (typeof TTDUniversalPixelApi === 'function') {
                var universalPixelApi = new TTDUniversalPixelApi();
                universalPixelApi.init("y12d1ir", ["8ml4f17"], "https://insight.adsrvr.org/track/up");
            }
        });
    </script>

</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["toc.integrate", "navigation.instant", "navigation.tabs", "navigation.top", "navigation.expand", "navigation.sections", "search.suggest", "search.highlight", "search.share"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
        <script src="../../js/scripts.js"></script>
      
    
  </body>
</html>