
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation, guides and articles on creating, developing and implementing automated betting strategies, using data analysis to inform betting models and how to interact with the Betfair API.">
      
      
        <meta name="author" content="Betfair Data Scientists">
      
      
        <link rel="canonical" href="https://betfair-datascientists.github.io/modelling/soccerModellingTutorialR/">
      
      
      
      
      <link rel="icon" href="../../img/BetfairFavicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
    
      
        <title>How to model the 2021 Euro & Copa America: R Tutorial - The Automation Hub</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/betfair.css">
    
      <link rel="stylesheet" href="../../css/buttons_and_animations.css">
    
      <link rel="stylesheet" href="../../css/fonts.css">
    
      <link rel="stylesheet" href="../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","UA-125973915-1"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","UA-125973915-1",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=UA-125973915-1",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="betfair" data-md-color-primary="amber" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-model-the-2021-euro-copa-america-r-tutorial" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      
  
  <header class="md-header" data-md-component="header">
    <nav class="md-header__inner md-grid" aria-label="header.title">
      <a href="../.." title="The Automation Hub" class="md-header__button md-logo" aria-label="The Automation Hub" data-md-component="logo">
        
  <img src="../../img/logo.svg" alt="logo">

      </a>
      <label class="md-header__button md-icon" for="__drawer">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
      </label>
      <div class="md-header__title" data-md-component="header-title">
        <div class="md-header__ellipsis">
          <div class="md-header__topic">
            <span class="md-ellipsis">
              The Automation Hub
            </span>
          </div>
          <div class="md-header__topic" data-md-component="header-topic">
            <span class="md-ellipsis">
              
                How to model the 2021 Euro & Copa America: R Tutorial
              
            </span>
          </div>
        </div>
      </div>

      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="betfair" data-md-color-primary="amber" data-md-color-accent="orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
              </label>
            
          
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
              </label>
            
          
        </form>
      
      

      
     
      <div class="bf-nav">
        <a class="bf-hidable" href="https://www.betfair.com.au/exchange/plus/"><svg class="exchangeLogo" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#"
          xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 38.775 4.59" width="24" height="17">
          <path class="st1" d="m 160.3,-136.95 v 26" />
          <g transform="translate(18.8,-137.15)">
            <path d="m 2.2901089,126.53441 v 5.20093 H -3.3107216 L 7.4888397,144.33446 18.2884,131.73534 h -5.598633 v -5.20093 z m -8.6000974,8.10132 -10.8017585,12.59913 h 5.60083 v 5.2998 h 10.3996581 v -5.2998 h 5.6008306 z" />
          </g>
        </svg><span> Exchange</span></a>
        <a href="https://www.betfair.com.au/hub/">Hub</a>
      </div>

      

    </nav>
    
  </header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../data/dataListing/" class="md-tabs__link">
          
  
  Data

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../wagering/betfairHowTo/" class="md-tabs__link">
          
  
  Wagering

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/apiResources/" class="md-tabs__link">
          
  
  API

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../howToModel/" class="md-tabs__link">
          
  
  Modelling

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../automation/GoldenRulesofAutomation/" class="md-tabs__link">
          
  
  Automation

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/How_to_Automate_1/" class="md-tabs__link">
          
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../mentalGame/intro/" class="md-tabs__link">
          
  
  Mental Game

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../contactUs/test/" class="md-tabs__link">
          
  
  Contact Us

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="The Automation Hub" class="md-nav__button md-logo" aria-label="The Automation Hub" data-md-component="logo">
      
  <img src="../../img/logo.svg" alt="logo">

    </a>
    The Automation Hub
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Data
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/dataListing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSV Files
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Wagering
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Wagering
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wagering/betfairHowTo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Betfair How-To
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wagering/bettingGlossary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Betting Glossary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wagering/stakingMethods/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Staking Methods and Bankroll Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wagering/valueAndOdds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Value and Odds
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wagering/commission/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commission and other charges
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/apiResources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API resources
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/apiappkey/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to access the Betfair API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/apiRtutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API tutorial in R
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/apiPythontutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API tutorial in Python
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Modelling
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Modelling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howToModel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro to modelling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataSources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pricing Data Sources
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Racing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Racing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../topazTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Greyhound Topaz API Tutorial (New)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fasttrackTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Greyhound form FastTrack API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../greyhoundModellingPython/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Greyhound modelling in Python
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Soccer
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            Soccer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../soccerModellingELO2022WorldCup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Soccer modelling tutorial in R for 2022 FIFA World Cup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../soccerModellingTutorialPython/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Soccer modelling tutorial in Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../EPLmlPython/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EPL ML walk through in Python
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    AFL
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            AFL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AFLmodellingPython/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AFL modelling walk through in Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../brownlowModelTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modelling the Brownlow Medal in Python
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Tennis
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            Tennis
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howToModelTheAusOpen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to model the Australian Open
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AusOpenRTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aus Open R Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AusOpenPythonTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aus Open Python Tutorial
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Automation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Automation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/GoldenRulesofAutomation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Golden rules of automation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tools Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Bet Angel
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Bet Angel
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/betAngel/betAngel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/betAngelbeginners/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Beginner's guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/betAngelintermediate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intermediate guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/betAngeladvanced/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/betAngelRatingsAutomation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ratings auto
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/betAngelMarketFavouriteAutomation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Market fav auto
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/betAngelTippingAutomation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tipping auto
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/betAngelSimultaneousMarkets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Simultaneous markets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/betAngelKellyStake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kelly criterion staking
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Gruss Betting Assistant
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            Gruss Betting Assistant
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/Gruss/Gruss/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/GrussSettingupbasicmarketview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup basic market view and one click betting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/grussRatingsAutomation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ratings auto
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/grussMarketFavouriteAutomation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Market fav auto
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/grusslSimultaneousMarkets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Simultaneous markets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/grussKellyStake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kelly criterion staking
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_5" >
        
          
          <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Cymatic Trader
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_5">
            <span class="md-nav__icon md-icon"></span>
            Cymatic Trader
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/CymaticTrader/CymaticTrader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/cymaticTraderRatingsAutomation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ratings auto
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_6" >
        
          
          <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Geeks Toy
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6">
            <span class="md-nav__icon md-icon"></span>
            Geeks Toy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/GeeksToyinstallationandsetup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation and setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/GeeksToybasicmarketviewstakingandoneclickbetting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup basic market view and one click betting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/geeksToyRefreshSettings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimising refresh settings
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_7" >
        
          
          <label class="md-nav__link" for="__nav_6_7" id="__nav_6_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Bet Jet Pro
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_7">
            <span class="md-nav__icon md-icon"></span>
            Bet Jet Pro
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/betJetOverview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/How_to_Automate_1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Automate 1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/How_to_Automate_2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Automate 2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/How_to_Automate_3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Automate 3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/How_to_Automate_4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Automate 4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/How_to_Automate_5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Automate 5
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/hubPredictionsModel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hub Predictions Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/processingTarFiles101/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Take away the pain! Processing TAR Files 101
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/jsonToCsvRevisited/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON to CSV | Revisited
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/backtestingRatingsTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Back testing ratings in Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/automatedBettingAnglesTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automated betting angles in Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/analysingAndPredictingMarketMovements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Do they know? Analysing Betfair market formation & market movements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/analysingAndPredictingBSP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wisdom of the crowd? Analysing & understanding BSP
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Mental Game
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Mental Game
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/roleOfEmotions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/mapYourEmotions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/handlingBadVariance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/winbyBeingGreatatLosing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/correctingyouremotions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 5
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/responsibleGambling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 6
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/InchwormConcept/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 7
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/HighExpectations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 8
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mentalGame/TappingYourIntuition/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 9
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Contact Us
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Contact Us
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contactUs/test/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Meet the Team
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="how-to-model-the-2021-euro-copa-america-r-tutorial">How to model the 2021 Euro &amp; Copa America: R Tutorial</h1>
<h2 id="the-task">The Task</h2>
<p>This notebook will outline how to train a simple classification model to predict the outcome of a soccer match using the dataset provided for the datathon.</p>
<ol>
<li>Reading data from file and get a raw dataset</li>
<li>Data cleaning and feature engineering</li>
<li>Training a model</li>
</ol>
<p>The tutorial covers the thought process of manipulating the dataset (why and how), some simple data cleaning, feature engineering and training a classification model.</p>
<p>The tutorial <strong>DOES NOT</strong> delve deep into the fundamentals of machine learning, advanced feature engineering or model tuning.</p>
<p><em>There are some helpful hints along the way though.</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a># import required libraries
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>library(tidyverse)
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>library(lubridate)
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>library(caTools) # calculate rolling average 
</code></pre></div>
<hr />
<h2 id="read-data-from-file-and-get-a-raw-dataset">Read data from file and get a raw dataset</h2>
<h4 id="change-the-data-types-date-column">Change the data types - date column.</h4>
<p>We need the date column in good order for our tutorial. <a href="assets/datathon_initial_form_data - SAMPLE.csv">Here's a sample of the data set</a> we're using for this tutorial.</p>
<p><em>In general, it's a good idea to evaluate data types of all columns that we work with to ensure they are correct.</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>df = read_csv(&quot;SoccerData.csv&quot;, guess_max = 2000)
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>df = df %&gt;% mutate(date_GMT = parse_date_time(date_GMT, &#39;%b %d %Y - %I:%M%p&#39;, tz = &quot;GMT&quot;))
</code></pre></div>
<h4 id="get-data-columns-and-create-raw-dataset">Get data columns and create raw dataset</h4>
<p>For this tutorial, let's take only a few stats columns to work with.</p>
<p><em>Typically we would explore all features and then decide which data to discard.</em></p>
<ol>
<li>Goal counts</li>
<li>Corners</li>
<li>Total shots</li>
<li>Shots on target</li>
<li>Fouls</li>
<li>Possession</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>raw_match_stats = df %&gt;%
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>  select(
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>  date_GMT,
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>  home_team_name,
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>  away_team_name,
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>  home_team_goal_count,
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>  away_team_goal_count,
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>  home_team_corner_count,
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>  away_team_corner_count,
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>  home_team_shots,
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>  away_team_shots,
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>  home_team_shots_on_target,
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>  away_team_shots_on_target,
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>  home_team_fouls,
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>  away_team_fouls,
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>  home_team_possession,
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>  away_team_possession
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>  )
</code></pre></div>
<h4 id="clean-data">Clean data</h4>
<p>As a cleaning step, we order our data by date and drop rows with NA values.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>raw_match_stats = raw_match_stats %&gt;%
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>  arrange(desc(date_GMT)) %&gt;%
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>  drop_na() %&gt;%
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>  mutate(game_id = 1:n())
</code></pre></div>
<h4 id="raw-dataset">Raw dataset</h4>
<p>This raw dataset is structured so that each match has an individual row and stats for both teams are on that row with columns titles "home" and "away".</p>
<p>Our goal is to build a machine learning (ML) model that can predict the result of a soccer match. Given that we have some match stats, we will aim to use that information to predict a WIN, LOSS or DRAW.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>raw_match_stats
</code></pre></div>
<hr />
<h2 id="data-cleaning-and-feature-engineering">Data cleaning and feature engineering</h2>
<h4 id="target-variable-match-result">Target variable - Match Result</h4>
<p>Our machine learning model aims to predict the result of a match. This "result" is called the "target variable". Our dataset has no columns showing the match result. We will create two columns for the results for each team. One of these would become the target variable for our ML model.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a># create results columns for both home and away teams (W - win, D = Draw, L = Loss).
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>raw_match_stats = raw_match_stats %&gt;%
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>  mutate(home_team_result = case_when(home_team_goal_count == away_team_goal_count ~ &quot;D&quot;,
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>                                      home_team_goal_count &gt; away_team_goal_count ~ &quot;W&quot;,
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>                                      home_team_goal_count &lt; away_team_goal_count ~ &quot;L&quot;),
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>         away_team_result = case_when(home_team_goal_count == away_team_goal_count ~ &quot;D&quot;,
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>                                      home_team_goal_count &gt; away_team_goal_count ~ &quot;L&quot;,
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>                                      home_team_goal_count &lt; away_team_goal_count ~ &quot;W&quot;))
</code></pre></div>
<h4 id="average-pre-match-stats-five-match-average">Average pre-match stats - Five match average</h4>
<p>Great! Now we have a dataset with many rows of data, with each row representing match stats and the match result (this would become our target variable).</p>
<p>But our goal is to build an ML model that predicts the match result prior to the start of a match. Are the stats from that match what we need to build this ML model? No! When predicting a match outcome BEFORE the start of the match, we are forced to rely on match stats available to us from previous matches.</p>
<p>Therefore, we need a dataset with the match result (target variable) and stats for each team heading into that match. For this tutorial, we will look at the average stats for each team in the five matches preceding each match.</p>
<p>Lets look at how we can get the average stats for the previous 5 matches for each team at each match.</p>
<ol>
<li>Split the raw_match_stats to two datasets (home_team_stats and away_team_stats).</li>
<li>Stack these two datasets so that each row is the stats for a team for one match (team_stats_per_match).</li>
<li>At each row of this dataset, get the team name, find the stats for that team during the 4. last 5 matches, and average these stats (avg_stats_per_team).
Add these stats to the team_stats_per_match dataset.</li>
</ol>
<p><em>Why did we chose five matches? Why not 10? Should we average over a time period (matches in the last year perhaps?) rather than a number? What's the least number of matches available for each competing team in the dataset? These are all interesting questions that may improve our model.</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a># Split the raw_match_stats to two datasets (home_team_stats and away_team_stats). 
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>home_team_stats = raw_match_stats %&gt;%
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>  select(game_id,
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>         date_GMT,
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>         starts_with(&quot;home_team&quot;))
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>away_team_stats = raw_match_stats %&gt;%
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>  select(game_id,
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>         date_GMT,
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>         starts_with(&quot;away_team&quot;))
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a># rename &quot;home_team&quot; and &quot;away_team&quot; columns
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>home_team_stats = rename_with(home_team_stats, ~gsub(&quot;home_team_&quot;, &quot;&quot;, .x))
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>away_team_stats = rename_with(away_team_stats, ~gsub(&quot;away_team_&quot;, &quot;&quot;, .x))
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a># Stack these two datasets so that each row is the stats for a team for one match (team_stats_per_match). 
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>team_stats_per_match = home_team_stats %&gt;%
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>  bind_rows(away_team_stats)
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a># At each row of this dataset, get the team name, find the stats for that team during the last 5 matches, and average these stats (avg_stats_per_team). 
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>avg_stats_per_team &lt;- team_stats_per_match %&gt;%
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>  group_by(name) %&gt;%
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>  filter(n() &gt; 1) %&gt;%     # remove countries with only 1 match
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>  arrange(date_GMT) %&gt;%
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>  mutate_at(
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>  vars(
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>  goal_count,
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>  corner_count,
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>  shots,
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>  shots_on_target,
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>  fouls,
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>  possession
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>  ),
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>  ## Columns for which we want a rolling mean
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>  .funs = ~ runmean(
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>  x = dplyr::lag(.x),
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>  k = 5,
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>  endrule = &quot;mean&quot;,
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>  align = &quot;right&quot;
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>  )## Rolling mean for last 5 matches
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>  ) %&gt;%
<a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>  rename(
<a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>  goals_per_match = goal_count,
<a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>  corners_per_match = corner_count,
<a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>  shots_per_match = shots,
<a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>  shotsOnTarget_per_match = shots_on_target,
<a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>  fouls_per_match = fouls,
<a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a>  possession_per_match = possession
<a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a>  )
</code></pre></div>
<h4 id="reshape-average-pre-match-stats">Reshape average pre-match stats</h4>
<p>Now that we have the average stats for each team going into every match, we can create a dataset similar to the raw_match_stats, where each row represents both teams from one match.</p>
<ol>
<li>Re-segment the home and away teams (name Team 1 and Team 2 rather than home and away).</li>
<li>Combine at each match to get a dataset with a row representing each match.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a># Add these stats to the home/away dataset
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>home_team_stats &lt;- home_team_stats %&gt;% 
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>  left_join(avg_stats_per_team)  %&gt;%
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>  arrange(game_id) %&gt;%
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>  rename_with(~paste0(&quot;team_1_&quot;, .))
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>away_team_stats &lt;- away_team_stats %&gt;% 
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>  left_join(avg_stats_per_team)  %&gt;%
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>  arrange(game_id) %&gt;%
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>  rename_with(~paste0(&quot;team_2_&quot;, .))
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a># Combine at each match to get a dataset with a row representing each match. 
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a># drop the NA rows ( earliest match for each team, i.e no previous stats)
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>match_stats = home_team_stats %&gt;%
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>  bind_cols(away_team_stats) %&gt;%
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>  drop_na()
</code></pre></div>
<h4 id="find-the-difference-of-stats-between-teams">Find the difference of stats between teams</h4>
<p>In our ML model, we will take the difference between Team 1 and Team 2 average stats as features. 6 new columns are created for this.</p>
<p><em>Would we be better off using the raw stats for each team as features?</em></p>
<p><em>Can we generate any other useful features from the dataset provided?</em></p>
<p><em>Do we need to weigh the home and away teams because home teams win more often?</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a># create columns with average stat differences between the two teams
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>match_stats = match_stats %&gt;%
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>  mutate(goals_per_match_diff = team_1_goals_per_match - team_2_goals_per_match,
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>         corners_per_match_diff = team_1_corners_per_match - team_2_corners_per_match,
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>         shots_per_match_diff = team_1_shots_per_match - team_2_shots_per_match,
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>         shotsOnTarget_per_match_diff = team_1_shotsOnTarget_per_match - team_2_shotsOnTarget_per_match,
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>         fouls_per_match_diff = team_1_fouls_per_match - team_2_fouls_per_match,
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>         possession_per_match_diff = team_1_possession_per_match - team_2_possession_per_match)
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>match_stats
</code></pre></div>
<hr />
<h2 id="train-ml-model">Train ML model</h2>
<p>In this tutorial we will:</p>
<ol>
<li>Train a model using 6 feature columns</li>
<li>Use an 80/20 split in training/test data</li>
<li>Use accuracy to evaluate our models</li>
</ol>
<p><em>It's probably worth evaluating multiple models (several models explained in this tutorial), perhaps use k-fold cross validation, and use metrics other than accuracy to evaluate a model (check the commented out code).</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>library(tidymodels)
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>library(discrim)
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>library(kknn) # kknn
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>library(kernlab) # svm
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>library(naivebayes) #naive bayes
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>library(rpart) # decision tree
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>library(nnet) # logistic regression and neural net
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>library(ranger) # random forest (modified by multiclass)
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>library(xgboost) # xgboost
</code></pre></div>
<hr />
<h2 id="get-data-from-our-dataset">Get data from our dataset</h2>
<ol>
<li>Team_1_result column - target variable</li>
<li>The difference of stats between teams (6 columns) - features</li>
</ol>
<p><em>Do we need to scale or normalize the feature columns in order for it to make mathematical sense to a ML model? This depends on the type of model we are training, but it's definitely worth investigating in order to achieve a high performing model.</em></p>
<p><em>We should also investigate the dataset to check if it's balanced on all classes or if it's skewed towards a particular class (i.e are there an equal number of wins, losses and draws?). If not, would this affect model performance?</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a># form a dataset with only target and features
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>model_data = match_stats %&gt;%
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>  mutate(target = factor(recode(team_1_result, W = 0, D = 1, L = 2))) %&gt;%
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>  select(
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>    target,
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>    goals_per_match_diff,
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>    corners_per_match_diff,
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>    shots_per_match_diff,
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>    shotsOnTarget_per_match_diff,
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>    fouls_per_match_diff,
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>    possession_per_match_diff
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>  )
</code></pre></div>
<h4 id="split-test-and-training-data">Split test and training data</h4>
<p>We train a model on the training data, and then use test data to evaluate the performance of that model.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a># For more details of using tidymodels package, check https://www.tidymodels.org/
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a># split test and train data
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>set.seed(2021)
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>data_split &lt;- initial_split(model_data, strata = target, prop = 0.8)
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a># create a recipe for data pre-processing
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>model_recipe &lt;- 
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>  recipe(target ~ ., data = model_data) %&gt;%
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>  step_zv(all_predictors())  %&gt;%
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>  step_corr(all_predictors()) %&gt;%
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>  prep()
</code></pre></div>
<h4 id="name-and-define-classifiers">Name and define classifiers</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a># Define the models
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>## knn model
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>knn_model &lt;- 
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>  nearest_neighbor() %&gt;% 
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>  set_engine(&quot;kknn&quot;) %&gt;% 
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>  set_mode(&quot;classification&quot;)
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>## svm model
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>svm_model &lt;- 
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>  svm_rbf() %&gt;%
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>  set_engine(&quot;kernlab&quot;) %&gt;%
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>  set_mode(&quot;classification&quot;) 
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>## logistic regression model
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>lr_model &lt;- 
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>  multinom_reg() %&gt;% 
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>  set_engine(&quot;nnet&quot;) %&gt;% 
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>  set_mode(&quot;classification&quot;)
<a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a>## naive bayes
<a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a>nb_model &lt;- 
<a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a>  naive_Bayes() %&gt;% 
<a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a>  set_engine(&quot;naivebayes&quot;) %&gt;% 
<a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a>  set_mode(&quot;classification&quot;)
<a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a>## decision tree model
<a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a>tree_model &lt;- 
<a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a>  decision_tree() %&gt;% 
<a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a>  set_engine(&quot;rpart&quot;) %&gt;% 
<a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a>  set_mode(&quot;classification&quot;)
<a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a># random forest
<a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a>rf_model &lt;- 
<a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a>  rand_forest() %&gt;% 
<a id="__codelineno-15-30" name="__codelineno-15-30" href="#__codelineno-15-30"></a>  set_engine(&quot;ranger&quot;) %&gt;% 
<a id="__codelineno-15-31" name="__codelineno-15-31" href="#__codelineno-15-31"></a>  set_mode(&quot;classification&quot;)
<a id="__codelineno-15-32" name="__codelineno-15-32" href="#__codelineno-15-32"></a># boosted tree (xgboost)
<a id="__codelineno-15-33" name="__codelineno-15-33" href="#__codelineno-15-33"></a>xgb_model &lt;- 
<a id="__codelineno-15-34" name="__codelineno-15-34" href="#__codelineno-15-34"></a>  boost_tree() %&gt;% 
<a id="__codelineno-15-35" name="__codelineno-15-35" href="#__codelineno-15-35"></a>  set_engine(&quot;xgboost&quot;) %&gt;% 
<a id="__codelineno-15-36" name="__codelineno-15-36" href="#__codelineno-15-36"></a>  set_mode(&quot;classification&quot;)
<a id="__codelineno-15-37" name="__codelineno-15-37" href="#__codelineno-15-37"></a># single layer neural network
<a id="__codelineno-15-38" name="__codelineno-15-38" href="#__codelineno-15-38"></a>nn_model &lt;- 
<a id="__codelineno-15-39" name="__codelineno-15-39" href="#__codelineno-15-39"></a>  mlp() %&gt;% 
<a id="__codelineno-15-40" name="__codelineno-15-40" href="#__codelineno-15-40"></a>  set_engine(&quot;nnet&quot;) %&gt;% 
<a id="__codelineno-15-41" name="__codelineno-15-41" href="#__codelineno-15-41"></a>  set_mode(&quot;classification&quot;)
</code></pre></div>
<h4 id="iterate-through-all-classifiers-and-get-their-accuracy-score">Iterate through all classifiers and get their accuracy score</h4>
<p>We can use the best performing model to make our predictions.</p>
<p><em>There are several other metrics in the code that have been commented out which might provide helpful insights on model performance.</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>accuracy_results &lt;-
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>  map_dfr(
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>    .x = list(knn_model,
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>              lr_model,
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>              nb_model,
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>              nn_model,
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>              rf_model,
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>              svm_model,
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>              tree_model,
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>              xgb_model),
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>    .f = function(the_model) {
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>      # create a work flow with recipe and model
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>      the_workflow &lt;- workflow() %&gt;%
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>        add_recipe(model_recipe) %&gt;%
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>        add_model(the_model)
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>      # fit the model with training data and evaluate with test data
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a>      the_fit &lt;- the_workflow %&gt;%
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>        last_fit(data_split)
<a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a>
<a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a>      tibble(model_name = class(the_model)[1],
<a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a>             accuracy = the_fit %&gt;% collect_metrics() %&gt;% filter(.metric == &quot;accuracy&quot;) %&gt;% select(.estimate) %&gt;% pull)
<a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a>    }
<a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a>  )
<a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a>## Displaying accuracy of the models set in descending order
<a id="__codelineno-16-26" name="__codelineno-16-26" href="#__codelineno-16-26"></a>accuracy_results %&gt;%
<a id="__codelineno-16-27" name="__codelineno-16-27" href="#__codelineno-16-27"></a>  arrange(desc(accuracy))
</code></pre></div>
<hr />
<h3 id="disclaimer">Disclaimer</h3>
<p>Note that whilst models and automated strategies are fun and rewarding to create, we can't promise that your model or betting strategy will be profitable, and we make no representations in relation to the code shared or information on this page. If you're using this code or implementing your own strategies, you do so entirely at your own risk and you are responsible for any winnings/losses incurred. Under no circumstances will Betfair be liable for any loss or damage you suffer.</p>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
    
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-copyright">
  
  
</div>
        
          <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/Betfair_Aus" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://linkedin.com/company/betfair-australia" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://facebook.com/betfairaustralia" target="_blank" rel="noopener" title="facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://youtube.com/user/betfairaus" target="_blank" rel="noopener" title="youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/betfair-datascientists" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
        
      </div>

      <div class="bf-footer">
          <div class="bf-footer-inner">
              <p class="bf-light">Betfair Pty Limited is licensed and regulated by the Northern Territory Government of Australia.</p>
              <p class="bf-dark">Betfair Pty Limited's gambling operations are governed by its <a class='inner-link' href="https://www.betfair.com.au/info/responsible-gambling/">Responsible Gambling Code of Conduct</a> and for South
              Australian residents by the <a class='inner-link' href="https://www.betfair.com.au/info/pdf/SA-GCoP.pdf">South Australian Responsible Gambling Code of Practice.</a></p>
              <p class="bf-dark">BetStop is the Australian National Self-Exclusion Register. For more information, please visit <a class="inner-link" href="https://betstop.gov.au">https://betstop.gov.au</a><br /> <div class="full-screen"> <p style="font-family: Arial, sans-serif; font-size: 1.2rem; font-weight: bold;text-align: center;">What are you really gambling with&#63</p> <p style="font-family: Arial, sans-serif; font-size: 0.8rem; font-weight: bold;text-align: center;">For free and confidential support call 1800 858 858 or visit <a href="http://www.gamblinghelponline.org.au" style="color: black; text-decoration: underline;">www.gamblinghelponline.org.au</a></p> </div> </p>
              <ul class="bf-links">
                <li><a href="https://www.betfair.com.au/hub/help/account-help/responsible-gambling/">Responsible Gambling</a><span>|</span></li>
                <li><a href="http://www.betfair.com/AUS_NZL/aboutUs/Terms.and.Conditions/">Terms & Conditions</a><span>|</span></li>
                <li><a href="https://www.betfair.com.au/info/privacy-policy/">Privacy Policy</a><span>|</span></li>
                <li><a href="http://www.betfair.com/en/aboutUs/Rules.and.Regulations/">Rules & Regulations</a><span>|</span></li>
                <li><a href="https://www.betfair.com/AUS_NZL/aboutUs/Dispute.Resolution">Dispute Resolution</a></li>
              </ul>
          </div>
      </div>
    </div>

    <script src="https://js.adsrvr.org/up_loader.1.1.0.js" type="text/javascript"></script>
    <script type="text/javascript">
        ttd_dom_ready( function() {
            if (typeof TTDUniversalPixelApi === 'function') {
                var universalPixelApi = new TTDUniversalPixelApi();
                universalPixelApi.init("y12d1ir", ["8ml4f17"], "https://insight.adsrvr.org/track/up");
            }
        });
    </script>

</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["toc.integrate", "navigation.instant", "navigation.tabs", "navigation.top", "navigation.expand", "navigation.sections", "search.suggest", "search.highlight", "search.share"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
        <script src="../../js/scripts.js"></script>
      
    
  </body>
</html>