



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation, guides and articles on creating, developing and implementing automated betting strategies, using data analysis to inform betting models and how to interact with the Betfair API.">
      
      
        <link rel="canonical" href="https://betfair-datascientists.github.io/modelling/AusOpenRTutorial/">
      
      
        <meta name="author" content="Betfair Data Scientists">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/BetfairFavicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>Aus Open R Tutorial - The Automation Hub</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.9a8eeed6.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    <link rel="stylesheet" href="../../assets/fonts/clarke-regular.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#australian-open-datathon-r-tutorial" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://betfair-datascientists.github.io" title="The Automation Hub" class="md-header-nav__button md-logo">
          
            <img src="../../img/logo.svg" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                The Automation Hub
              </span>
              <span class="md-header-nav__topic">
                Aus Open R Tutorial
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      <div class="bf-nav md-flex__cell">
        <a class="bf-hidable" href="https://www.betfair.com.au/exchange/plus/"><svg class="exchangeLogo" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38.775 4.59" width="24" height="17">
          <path class="st1" d="m 160.3,-136.95 v 26"/>
          <g transform="translate(18.8,-137.15)">
            <path d="m 2.2901089,126.53441 v 5.20093 H -3.3107216 L 7.4888397,144.33446 18.2884,131.73534 h -5.598633 v -5.20093 z m -8.6000974,8.10132 -10.8017585,12.59913 h 5.60083 v 5.2998 h 10.3996581 v -5.2998 h 5.6008306 z"/>
          </g>
        </svg><span> Exchange</span></a>
        <a href="https://www.betfair.com.au/hub/">Hub</a>
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../.." title="Home" class="md-tabs__link">
          Home
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../thirdPartyTools/overview/" title="Third Party Tools" class="md-tabs__link">
          Third Party Tools
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../api/apiappkey/" title="API" class="md-tabs__link">
          API
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../historicData/dataSources/" title="Historic Data" class="md-tabs__link">
          Historic Data
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../howToModel/" title="Modelling" class="md-tabs__link md-tabs__link--active">
          Modelling
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://betfair-datascientists.github.io" title="The Automation Hub" class="md-nav__button md-logo">
      
        <img src="../../img/logo.svg" width="48" height="48">
      
    </a>
    The Automation Hub
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Home
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Home
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../.." title="The Automation Hub" class="md-nav__link">
      The Automation Hub
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Third Party Tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Third Party Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../thirdPartyTools/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Bet Angel
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Bet Angel
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../thirdPartyTools/betAngel/betAngel/" title="Bet Angel overview" class="md-nav__link">
      Bet Angel overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../thirdPartyTools/betAngelRatingsAutomation/" title="Ratings automation (Excel)" class="md-nav__link">
      Ratings automation (Excel)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../thirdPartyTools/betAngelMarketFavouriteAutomation/" title="Market favourite automation (Excel)" class="md-nav__link">
      Market favourite automation (Excel)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../thirdPartyTools/betAngelTippingAutomation/" title="Tipping automation (Excel)" class="md-nav__link">
      Tipping automation (Excel)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../thirdPartyTools/betAngelSimultaneousMarkets/" title="Automating simultaneous markets (Excel)" class="md-nav__link">
      Automating simultaneous markets (Excel)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      Gruss
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        Gruss
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../thirdPartyTools/Gruss/Gruss/" title="Gruss overview" class="md-nav__link">
      Gruss overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../thirdPartyTools/grussRatingsAutomation/" title="Ratings automation (Excel)" class="md-nav__link">
      Ratings automation (Excel)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../thirdPartyTools/grusslSimultaneousMarkets/" title="Automating simultaneous markets (Excel)" class="md-nav__link">
      Automating simultaneous markets (Excel)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Cymatic Trader
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        Cymatic Trader
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../thirdPartyTools/CymaticTrader/CymaticTrader/" title="Cymatic Trader overview" class="md-nav__link">
      Cymatic Trader overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../thirdPartyTools/cymaticTraderRatingsAutomation/" title="Ratings automation (Excel)" class="md-nav__link">
      Ratings automation (Excel)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5" type="checkbox" id="nav-2-5">
    
    <label class="md-nav__link" for="nav-2-5">
      BF Bot Manager
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-5">
        BF Bot Manager
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../thirdPartyTools/BfBotManager/BfBotManager/" title="BF Bot Manager overview" class="md-nav__link">
      BF Bot Manager overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../thirdPartyTools/BfBotManagerAutomation/" title="Double or Bust (Rules)" class="md-nav__link">
      Double or Bust (Rules)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6" type="checkbox" id="nav-2-6">
    
    <label class="md-nav__link" for="nav-2-6">
      MarketFeeder Pro
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-6">
        MarketFeeder Pro
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../thirdPartyTools/MarketFeeder/MarketFeeder/" title="MarketFeeder Pro overview" class="md-nav__link">
      MarketFeeder Pro overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../thirdPartyTools/MarketFeeder2_6Staking/" title="2-6 Staking (Rules)" class="md-nav__link">
      2-6 Staking (Rules)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-7" type="checkbox" id="nav-2-7">
    
    <label class="md-nav__link" for="nav-2-7">
      The Bet Engine
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-7">
        The Bet Engine
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../thirdPartyTools/TheBetEngine/TheBetEngine/" title="The Bet Engine overview" class="md-nav__link">
      The Bet Engine overview
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/apiappkey/" title="How to access the Betfair API" class="md-nav__link">
      How to access the Betfair API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/apiRtutorial/" title="API tutorials in R" class="md-nav__link">
      API tutorials in R
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/apiPythontutorial/" title="API tutorial in Python" class="md-nav__link">
      API tutorial in Python
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Historic Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Historic Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../historicData/dataSources/" title="Historic Data Sources" class="md-nav__link">
      Historic Data Sources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../historicData/TheBetEngine/ThebetEngine.md" title="Downloading from the Historic Data site" class="md-nav__link">
      Downloading from the Historic Data site
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Modelling
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Modelling
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../howToModel/" title="Intro to modelling" class="md-nav__link">
      Intro to modelling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../howToModelTheAusOpen/" title="How to model the Australian Open" class="md-nav__link">
      How to model the Australian Open
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Aus Open R Tutorial
      </label>
    
    <a href="./" title="Aus Open R Tutorial" class="md-nav__link md-nav__link--active">
      Aus Open R Tutorial
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-task" title="The Task" class="md-nav__link">
    The Task
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prizes" title="Prizes" class="md-nav__link">
    Prizes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#submission" title="Submission" class="md-nav__link">
    Submission
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exploring-the-data" title="Exploring the Data" class="md-nav__link">
    Exploring the Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feature-creation" title="Feature Creation" class="md-nav__link">
    Feature Creation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-training-feature-matrix" title="Creating a Training Feature Matrix" class="md-nav__link">
    Creating a Training Feature Matrix
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-feature-matrix-for-the-2019-australian-open" title="Creating the Feature Matrix for the 2019 Australian Open" class="md-nav__link">
    Creating the Feature Matrix for the 2019 Australian Open
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generating-2019-australian-open-predictions" title="Generating 2019 Australian Open Predictions" class="md-nav__link">
    Generating 2019 Australian Open Predictions
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../AusOpenPythonTutorial/" title="Aus Open Python Tutorial" class="md-nav__link">
      Aus Open Python Tutorial
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../EPLmodelPart1/" title="EPL 01. Data acquisition & exploration" class="md-nav__link">
      EPL 01. Data acquisition & exploration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../EPLmodelPart2/" title="EPL 02. Data preparation & feature engineering" class="md-nav__link">
      EPL 02. Data preparation & feature engineering
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../EPLmodelPart3/" title="EPL 03. Model building & hyperparameter tuning" class="md-nav__link">
      EPL 03. Model building & hyperparameter tuning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../EPLmodelPart4/" title="EPL 04. Weekly predictions" class="md-nav__link">
      EPL 04. Weekly predictions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../AFLmodelPart1/" title="AFL 01. Data cleaning" class="md-nav__link">
      AFL 01. Data cleaning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../AFLmodelPart2/" title="AFL 02. Feature creation" class="md-nav__link">
      AFL 02. Feature creation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../AFLmodelPart3/" title="AFL 03. Modelling" class="md-nav__link">
      AFL 03. Modelling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../AFLmodelPart4/" title="AFL 04. Weekly predictions" class="md-nav__link">
      AFL 04. Weekly predictions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../brownlowModelTutorial/" title="Modelling the Brownlow Medal" class="md-nav__link">
      Modelling the Brownlow Medal
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-task" title="The Task" class="md-nav__link">
    The Task
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prizes" title="Prizes" class="md-nav__link">
    Prizes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#submission" title="Submission" class="md-nav__link">
    Submission
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exploring-the-data" title="Exploring the Data" class="md-nav__link">
    Exploring the Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feature-creation" title="Feature Creation" class="md-nav__link">
    Feature Creation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-training-feature-matrix" title="Creating a Training Feature Matrix" class="md-nav__link">
    Creating a Training Feature Matrix
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-feature-matrix-for-the-2019-australian-open" title="Creating the Feature Matrix for the 2019 Australian Open" class="md-nav__link">
    Creating the Feature Matrix for the 2019 Australian Open
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generating-2019-australian-open-predictions" title="Generating 2019 Australian Open Predictions" class="md-nav__link">
    Generating 2019 Australian Open Predictions
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="australian-open-datathon-r-tutorial">Australian Open Datathon R Tutorial<a class="headerlink" href="#australian-open-datathon-r-tutorial" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<h3 id="the-task">The Task<a class="headerlink" href="#the-task" title="Permanent link">&para;</a></h3>
<p>This notebook will outline how the Betfair Data Scientists went about modelling the Australian Open for Betfair's Australian Open Datathon. The task is simple: we ask you to predict the winner of every possible Australian Open matchup using data which we provide.</p>
<p>The metric used to determine the winner will be log loss, based on the actual matchups that happen in the Open. For more information on log loss, click <a href="http://wiki.fast.ai/index.php/Log_Loss">here</a>.</p>
<p>For a detailed outline of the task, the prizes, and to sign up, click <a href="https://www.betfair.com.au/hub/australian-open-datathon/">here</a>.</p>
<p>How an outline of our methodoly and thought process, read <a href="/modelling/howToModelTheAusOpen">this</a> article.</p>
<h3 id="prizes">Prizes<a class="headerlink" href="#prizes" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Place</th>
<th>Prize</th>
<th>Place</th>
<th>Prize</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>$5000</td>
<td>9</td>
<td>$500</td>
</tr>
<tr>
<td>2</td>
<td>$3000</td>
<td>10</td>
<td>$500</td>
</tr>
<tr>
<td>3</td>
<td>$2000</td>
<td>11</td>
<td>$200</td>
</tr>
<tr>
<td>4</td>
<td>$1000</td>
<td>12</td>
<td>$200</td>
</tr>
<tr>
<td>5</td>
<td>$750</td>
<td>13</td>
<td>$200</td>
</tr>
<tr>
<td>6</td>
<td>$500</td>
<td>14</td>
<td>$200</td>
</tr>
<tr>
<td>7</td>
<td>$500</td>
<td>15</td>
<td>$200</td>
</tr>
<tr>
<td>8</td>
<td>$500</td>
<td>Total</td>
<td>$15250</td>
</tr>
</tbody>
</table>
<h3 id="submission">Submission<a class="headerlink" href="#submission" title="Permanent link">&para;</a></h3>
<ul>
<li>To submit your model, email your final submission to <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#100;&#97;&#116;&#97;&#116;&#104;&#111;&#110;&#64;&#98;&#101;&#116;&#102;&#97;&#105;&#114;&#46;&#99;&#111;&#109;&#46;&#97;&#117;">&#100;&#97;&#116;&#97;&#116;&#104;&#111;&#110;&#64;&#98;&#101;&#116;&#102;&#97;&#105;&#114;&#46;&#99;&#111;&#109;&#46;&#97;&#117;</a>. Note that you don't need to email your code, just your predictions in the format that we have specified</li>
<li>No submissions will be accepted prior to the Australian Open qualifying matches being completed and the final draw list being shared with registered participants (12 January 2019)</li>
<li>Submissions need to include all potential match ups during the Australian Open, i.e. all possible combinations for each men's and women's tournaments (this will be provided after the draw is announced and the Australian Open qualifying matches are completed (Jan 12<sup>th</sup> 2019))</li>
<li>Submissions must follow the format outlined above and shown in the 'Dummy Submission File'. Any submissions that are not in the correct format will not be accepted.</li>
<li>Submissions need to include the player names for the hypothetical match up and the probability of the first player winning
i.e. player_1,player_2,probability_of_player_1_winning,</li>
<li>Submissions must be in a csv format</li>
<li>Only two models will be accepted per participant (one model for the men's draw, one model for the women's draw)</li>
</ul>
<hr />
<h2 id="exploring-the-data">Exploring the Data<a class="headerlink" href="#exploring-the-data" title="Permanent link">&para;</a></h2>
<p>First we need to get an idea of what the data looks like. Let's read the men's data in and get an idea of what it looks like. Note that you will need to install all the packages listed below unless you already have them.</p>
<p>Note that for this tutorial I will be using <code>dplyr</code>, if you are not familiar with the syntax I encourage you to read up on <a href="https://cran.r-project.org/web/packages/dplyr/vignettes/dplyr.html">the basics</a>.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #408080; font-style: italic"># Import libraries</span>
<span style="color: #008000; font-weight: bold">library</span>(dplyr)
<span style="color: #008000; font-weight: bold">library</span>(readr)
<span style="color: #008000; font-weight: bold">library</span>(tidyr)
<span style="color: #008000; font-weight: bold">library</span>(RcppRoll)
<span style="color: #008000; font-weight: bold">library</span>(tidyselect)
<span style="color: #008000; font-weight: bold">library</span>(lubridate)
<span style="color: #008000; font-weight: bold">library</span>(stringr)
<span style="color: #008000; font-weight: bold">library</span>(zoo)
<span style="color: #008000; font-weight: bold">library</span>(purrr)
<span style="color: #008000; font-weight: bold">library</span>(h2o)
<span style="color: #008000; font-weight: bold">library</span>(DT)
mens <span style="color: #666666">=</span> readr<span style="color: #666666">::</span>read_csv(<span style="color: #BA2121">&#39;data/ATP_matches.csv&#39;</span>, na <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;.&quot;</span>) <span style="color: #408080; font-style: italic"># NAs are indicated by .</span>
mens <span style="color: #666666">%&gt;%</span>
  datatable(rownames <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">FALSE</span>, extensions <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;Scroller&#39;</span>, 
            options <span style="color: #666666">=</span> <span style="color: #B00040">list</span>(dom <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;t&quot;</span>, 
            scrollY <span style="color: #666666">=</span> <span style="color: #666666">450</span>,
            scroller <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">TRUE</span>,
            scrollX <span style="color: #666666">=</span> <span style="color: #666666">600</span>,
            fixedColumns <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">TRUE</span>)) <span style="color: #666666">%&gt;%</span>
  formatRound(columns<span style="color: #666666">=</span>pluck(<span style="color: #666666">.</span>, <span style="color: #BA2121">&quot;x&quot;</span>, <span style="color: #BA2121">&quot;data&quot;</span>) <span style="color: #666666">%&gt;%</span> <span style="color: #008000">colnames</span>(), digits<span style="color: #666666">=3</span>)
</pre></div>

<table>
<thead>
<tr>
<th>Winner</th>
<th>Loser</th>
<th>Tournament</th>
<th>Tournament_Date</th>
<th>Court_Surface</th>
<th>Round_Description</th>
<th>Winner_Rank</th>
<th>Loser_Rank</th>
<th>Retirement_Ind</th>
<th>Winner_Sets_Won</th>
<th>...</th>
<th>Loser_DoubleFaults</th>
<th>Loser_FirstServes_Won</th>
<th>Loser_FirstServes_In</th>
<th>Loser_SecondServes_Won</th>
<th>Loser_SecondServes_In</th>
<th>Loser_BreakPoints_Won</th>
<th>Loser_BreakPoints</th>
<th>Loser_ReturnPoints_Won</th>
<th>Loser_ReturnPoints_Faced</th>
<th>Loser_TotalPoints_Won</th>
</tr>
</thead>
<tbody>
<tr>
<td>Edouard Roger-Vasselin</td>
<td>Eric Prodon</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>First Round</td>
<td>106</td>
<td>97</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>3</td>
<td>21</td>
<td>33</td>
<td>13</td>
<td>26</td>
<td>1</td>
<td>3</td>
<td>15</td>
<td>49</td>
<td>49</td>
</tr>
<tr>
<td>Dudi Sela</td>
<td>Fabio Fognini</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>First Round</td>
<td>83</td>
<td>48</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>4</td>
<td>17</td>
<td>32</td>
<td>5</td>
<td>26</td>
<td>0</td>
<td>1</td>
<td>8</td>
<td>33</td>
<td>30</td>
</tr>
<tr>
<td>Go Soeda</td>
<td>Frederico Gil</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>First Round</td>
<td>120</td>
<td>102</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>2</td>
<td>45</td>
<td>70</td>
<td>18</td>
<td>35</td>
<td>2</td>
<td>4</td>
<td>36</td>
<td>103</td>
<td>99</td>
</tr>
<tr>
<td>Yuki Bhambri</td>
<td>Karol Beck</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>First Round</td>
<td>345</td>
<td>101</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>1</td>
<td>15</td>
<td>33</td>
<td>13</td>
<td>29</td>
<td>2</td>
<td>3</td>
<td>15</td>
<td>46</td>
<td>43</td>
</tr>
<tr>
<td>Yuichi Sugita</td>
<td>Olivier Rochus</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>First Round</td>
<td>235</td>
<td>67</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>0</td>
<td>19</td>
<td>32</td>
<td>13</td>
<td>22</td>
<td>1</td>
<td>7</td>
<td>30</td>
<td>78</td>
<td>62</td>
</tr>
<tr>
<td>Benoit Paire</td>
<td>Pere Riba</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>First Round</td>
<td>95</td>
<td>89</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>5</td>
<td>13</td>
<td>20</td>
<td>12</td>
<td>32</td>
<td>0</td>
<td>1</td>
<td>9</td>
<td>44</td>
<td>34</td>
</tr>
<tr>
<td>Victor Hanescu</td>
<td>Sam Querrey</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>First Round</td>
<td>90</td>
<td>93</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>8</td>
<td>29</td>
<td>41</td>
<td>7</td>
<td>24</td>
<td>1</td>
<td>3</td>
<td>17</td>
<td>57</td>
<td>53</td>
</tr>
<tr>
<td>Yen-Hsun Lu</td>
<td>Thiemo de Bakker</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>First Round</td>
<td>82</td>
<td>223</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>0</td>
<td>20</td>
<td>32</td>
<td>10</td>
<td>24</td>
<td>1</td>
<td>1</td>
<td>19</td>
<td>57</td>
<td>49</td>
</tr>
<tr>
<td>Andreas Beck</td>
<td>Vasek Pospisil</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>First Round</td>
<td>98</td>
<td>119</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>3</td>
<td>39</td>
<td>57</td>
<td>16</td>
<td>38</td>
<td>1</td>
<td>5</td>
<td>24</td>
<td>74</td>
<td>79</td>
</tr>
<tr>
<td>Ivan Dodig</td>
<td>Vishnu Vardhan</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>First Round</td>
<td>36</td>
<td>313</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>5</td>
<td>41</td>
<td>59</td>
<td>13</td>
<td>27</td>
<td>2</td>
<td>8</td>
<td>34</td>
<td>101</td>
<td>88</td>
</tr>
<tr>
<td>David Goffin</td>
<td>Xavier Malisse</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>First Round</td>
<td>174</td>
<td>49</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>1</td>
<td>31</td>
<td>43</td>
<td>19</td>
<td>34</td>
<td>1</td>
<td>4</td>
<td>27</td>
<td>85</td>
<td>77</td>
</tr>
<tr>
<td>David Goffin</td>
<td>Andreas Beck</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>Second Round</td>
<td>174</td>
<td>98</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>0</td>
<td>43</td>
<td>71</td>
<td>14</td>
<td>27</td>
<td>2</td>
<td>8</td>
<td>27</td>
<td>82</td>
<td>84</td>
</tr>
<tr>
<td>Dudi Sela</td>
<td>Benoit Paire</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>Second Round</td>
<td>83</td>
<td>95</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>5</td>
<td>40</td>
<td>58</td>
<td>21</td>
<td>46</td>
<td>1</td>
<td>7</td>
<td>26</td>
<td>87</td>
<td>87</td>
</tr>
<tr>
<td>Stan Wawrinka</td>
<td>Edouard Roger-Vasselin</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>Second Round</td>
<td>17</td>
<td>106</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>0</td>
<td>43</td>
<td>70</td>
<td>16</td>
<td>34</td>
<td>4</td>
<td>6</td>
<td>28</td>
<td>82</td>
<td>87</td>
</tr>
<tr>
<td>Go Soeda</td>
<td>Ivan Dodig</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>Second Round</td>
<td>120</td>
<td>36</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>2</td>
<td>31</td>
<td>41</td>
<td>11</td>
<td>28</td>
<td>1</td>
<td>4</td>
<td>23</td>
<td>73</td>
<td>65</td>
</tr>
<tr>
<td>Milos Raonic</td>
<td>Victor Hanescu</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>Second Round</td>
<td>31</td>
<td>90</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>1</td>
<td>25</td>
<td>38</td>
<td>5</td>
<td>14</td>
<td>0</td>
<td>4</td>
<td>15</td>
<td>56</td>
<td>45</td>
</tr>
<tr>
<td>Yuichi Sugita</td>
<td>Yen-Hsun Lu</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>Second Round</td>
<td>235</td>
<td>82</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>4</td>
<td>34</td>
<td>45</td>
<td>12</td>
<td>34</td>
<td>2</td>
<td>9</td>
<td>38</td>
<td>93</td>
<td>84</td>
</tr>
<tr>
<td>Janko Tipsarevic</td>
<td>Yuki Bhambri</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>Second Round</td>
<td>9</td>
<td>345</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>2</td>
<td>12</td>
<td>22</td>
<td>9</td>
<td>17</td>
<td>0</td>
<td>1</td>
<td>8</td>
<td>41</td>
<td>29</td>
</tr>
<tr>
<td>Janko Tipsarevic</td>
<td>David Goffin</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>Quarter-finals</td>
<td>9</td>
<td>174</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>5</td>
<td>34</td>
<td>51</td>
<td>19</td>
<td>40</td>
<td>1</td>
<td>2</td>
<td>18</td>
<td>67</td>
<td>71</td>
</tr>
<tr>
<td>Milos Raonic</td>
<td>Dudi Sela</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>Quarter-finals</td>
<td>31</td>
<td>83</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>2</td>
<td>23</td>
<td>31</td>
<td>19</td>
<td>28</td>
<td>0</td>
<td>3</td>
<td>16</td>
<td>69</td>
<td>58</td>
</tr>
<tr>
<td>Go Soeda</td>
<td>Stan Wawrinka</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>Quarter-finals</td>
<td>120</td>
<td>17</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>4</td>
<td>18</td>
<td>34</td>
<td>13</td>
<td>31</td>
<td>3</td>
<td>7</td>
<td>31</td>
<td>74</td>
<td>62</td>
</tr>
<tr>
<td>Nicolas Almagro</td>
<td>Yuichi Sugita</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>Quarter-finals</td>
<td>10</td>
<td>235</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>1</td>
<td>36</td>
<td>65</td>
<td>30</td>
<td>40</td>
<td>3</td>
<td>12</td>
<td>45</td>
<td>123</td>
<td>111</td>
</tr>
<tr>
<td>Janko Tipsarevic</td>
<td>Go Soeda</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>Semi-finals</td>
<td>9</td>
<td>120</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>1</td>
<td>21</td>
<td>33</td>
<td>10</td>
<td>28</td>
<td>1</td>
<td>1</td>
<td>10</td>
<td>44</td>
<td>41</td>
</tr>
<tr>
<td>Milos Raonic</td>
<td>Nicolas Almagro</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>Semi-finals</td>
<td>31</td>
<td>10</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>0</td>
<td>31</td>
<td>45</td>
<td>8</td>
<td>15</td>
<td>0</td>
<td>3</td>
<td>12</td>
<td>54</td>
<td>51</td>
</tr>
<tr>
<td>Milos Raonic</td>
<td>Janko Tipsarevic</td>
<td>Chennai</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>Finals</td>
<td>31</td>
<td>9</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>2</td>
<td>59</td>
<td>83</td>
<td>34</td>
<td>55</td>
<td>0</td>
<td>4</td>
<td>25</td>
<td>113</td>
<td>118</td>
</tr>
<tr>
<td>Igor Andreev</td>
<td>Adrian Mannarino</td>
<td>Brisbane</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>First Round</td>
<td>115</td>
<td>87</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>3</td>
<td>24</td>
<td>35</td>
<td>13</td>
<td>25</td>
<td>1</td>
<td>3</td>
<td>21</td>
<td>70</td>
<td>58</td>
</tr>
<tr>
<td>Alexandr Dolgopolov</td>
<td>Alejandro Falla</td>
<td>Brisbane</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>First Round</td>
<td>15</td>
<td>74</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>3</td>
<td>16</td>
<td>33</td>
<td>12</td>
<td>25</td>
<td>3</td>
<td>7</td>
<td>33</td>
<td>75</td>
<td>61</td>
</tr>
<tr>
<td>Tatsuma Ito</td>
<td>Benjamin Mitchell</td>
<td>Brisbane</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>First Round</td>
<td>122</td>
<td>227</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>6</td>
<td>30</td>
<td>44</td>
<td>7</td>
<td>24</td>
<td>0</td>
<td>2</td>
<td>13</td>
<td>52</td>
<td>50</td>
</tr>
<tr>
<td>Kei Nishikori</td>
<td>Cedrik-Marcel Stebe</td>
<td>Brisbane</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>First Round</td>
<td>25</td>
<td>81</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>2</td>
<td>27</td>
<td>49</td>
<td>23</td>
<td>41</td>
<td>3</td>
<td>6</td>
<td>28</td>
<td>75</td>
<td>78</td>
</tr>
<tr>
<td>Denis Istomin</td>
<td>Florian Mayer</td>
<td>Brisbane</td>
<td>2-Jan-12</td>
<td>Hard</td>
<td>First Round</td>
<td>73</td>
<td>23</td>
<td>1</td>
<td>1</td>
<td>...</td>
<td>1</td>
<td>28</td>
<td>38</td>
<td>11</td>
<td>17</td>
<td>0</td>
<td>2</td>
<td>15</td>
<td>56</td>
<td>54</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td></td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>Malek Jaziri</td>
<td>Fernando Verdasco</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Second Round</td>
<td>55</td>
<td>27</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>6</td>
<td>46</td>
<td>60</td>
<td>16</td>
<td>35</td>
<td>3</td>
<td>13</td>
<td>39</td>
<td>104</td>
<td>101</td>
</tr>
<tr>
<td>Alexander Zverev</td>
<td>Frances Tiafoe</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Second Round</td>
<td>5</td>
<td>44</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>4</td>
<td>26</td>
<td>40</td>
<td>16</td>
<td>36</td>
<td>2</td>
<td>10</td>
<td>27</td>
<td>72</td>
<td>69</td>
</tr>
<tr>
<td>Dominic Thiem</td>
<td>Gilles Simon</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Second Round</td>
<td>8</td>
<td>31</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>1</td>
<td>13</td>
<td>26</td>
<td>12</td>
<td>25</td>
<td>2</td>
<td>2</td>
<td>23</td>
<td>59</td>
<td>48</td>
</tr>
<tr>
<td>Novak Djokovic</td>
<td>Joao Sousa</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Second Round</td>
<td>2</td>
<td>48</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>2</td>
<td>25</td>
<td>35</td>
<td>6</td>
<td>22</td>
<td>1</td>
<td>10</td>
<td>27</td>
<td>74</td>
<td>58</td>
</tr>
<tr>
<td>Karen Khachanov</td>
<td>Matthew Ebden</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Second Round</td>
<td>18</td>
<td>39</td>
<td>1</td>
<td>2</td>
<td>...</td>
<td>6</td>
<td>8</td>
<td>18</td>
<td>5</td>
<td>20</td>
<td>1</td>
<td>2</td>
<td>10</td>
<td>30</td>
<td>23</td>
</tr>
<tr>
<td>John Isner</td>
<td>Mikhail Kukushkin</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Second Round</td>
<td>9</td>
<td>54</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>1</td>
<td>54</td>
<td>80</td>
<td>24</td>
<td>39</td>
<td>0</td>
<td>1</td>
<td>13</td>
<td>90</td>
<td>91</td>
</tr>
<tr>
<td>Kevin Anderson</td>
<td>Nikoloz Basilashvili</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Second Round</td>
<td>6</td>
<td>22</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>7</td>
<td>43</td>
<td>54</td>
<td>30</td>
<td>49</td>
<td>0</td>
<td>3</td>
<td>26</td>
<td>106</td>
<td>99</td>
</tr>
<tr>
<td>Marin Cilic</td>
<td>Philipp Kohlschreiber</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Second Round</td>
<td>7</td>
<td>43</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>1</td>
<td>19</td>
<td>34</td>
<td>12</td>
<td>20</td>
<td>1</td>
<td>1</td>
<td>17</td>
<td>55</td>
<td>48</td>
</tr>
<tr>
<td>Jack Sock</td>
<td>Richard Gasquet</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Second Round</td>
<td>23</td>
<td>28</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>4</td>
<td>18</td>
<td>33</td>
<td>16</td>
<td>29</td>
<td>0</td>
<td>4</td>
<td>19</td>
<td>59</td>
<td>53</td>
</tr>
<tr>
<td>Grigor Dimitrov</td>
<td>Roberto Bautista Agut</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Second Round</td>
<td>10</td>
<td>25</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>0</td>
<td>34</td>
<td>48</td>
<td>11</td>
<td>20</td>
<td>2</td>
<td>4</td>
<td>27</td>
<td>76</td>
<td>72</td>
</tr>
<tr>
<td>Damir Dzumhur</td>
<td>Stefanos Tsitsipas</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Second Round</td>
<td>52</td>
<td>16</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>3</td>
<td>14</td>
<td>26</td>
<td>15</td>
<td>30</td>
<td>2</td>
<td>2</td>
<td>17</td>
<td>52</td>
<td>46</td>
</tr>
<tr>
<td>Dominic Thiem</td>
<td>Borna Coric</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Third Round</td>
<td>8</td>
<td>13</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>1</td>
<td>39</td>
<td>57</td>
<td>16</td>
<td>38</td>
<td>2</td>
<td>2</td>
<td>27</td>
<td>88</td>
<td>82</td>
</tr>
<tr>
<td>Novak Djokovic</td>
<td>Damir Dzumhur</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Third Round</td>
<td>2</td>
<td>52</td>
<td>1</td>
<td>2</td>
<td>...</td>
<td>4</td>
<td>15</td>
<td>28</td>
<td>7</td>
<td>18</td>
<td>0</td>
<td>0</td>
<td>8</td>
<td>28</td>
<td>30</td>
</tr>
<tr>
<td>Alexander Zverev</td>
<td>Diego Schwartzman</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Third Round</td>
<td>5</td>
<td>19</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>2</td>
<td>22</td>
<td>37</td>
<td>12</td>
<td>24</td>
<td>0</td>
<td>4</td>
<td>18</td>
<td>58</td>
<td>52</td>
</tr>
<tr>
<td>Roger Federer</td>
<td>Fabio Fognini</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Third Round</td>
<td>3</td>
<td>14</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>6</td>
<td>22</td>
<td>32</td>
<td>15</td>
<td>37</td>
<td>1</td>
<td>5</td>
<td>16</td>
<td>54</td>
<td>53</td>
</tr>
<tr>
<td>Marin Cilic</td>
<td>Grigor Dimitrov</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Third Round</td>
<td>7</td>
<td>10</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>1</td>
<td>37</td>
<td>55</td>
<td>14</td>
<td>32</td>
<td>1</td>
<td>5</td>
<td>22</td>
<td>71</td>
<td>73</td>
</tr>
<tr>
<td>Karen Khachanov</td>
<td>John Isner</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Third Round</td>
<td>18</td>
<td>9</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>4</td>
<td>67</td>
<td>80</td>
<td>19</td>
<td>38</td>
<td>0</td>
<td>0</td>
<td>17</td>
<td>100</td>
<td>103</td>
</tr>
<tr>
<td>Kei Nishikori</td>
<td>Kevin Anderson</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Third Round</td>
<td>11</td>
<td>6</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>1</td>
<td>26</td>
<td>33</td>
<td>11</td>
<td>19</td>
<td>0</td>
<td>0</td>
<td>11</td>
<td>51</td>
<td>48</td>
</tr>
<tr>
<td>Jack Sock</td>
<td>Malek Jaziri</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Third Round</td>
<td>23</td>
<td>55</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>6</td>
<td>13</td>
<td>21</td>
<td>10</td>
<td>24</td>
<td>0</td>
<td>0</td>
<td>9</td>
<td>41</td>
<td>32</td>
</tr>
<tr>
<td>Karen Khachanov</td>
<td>Alexander Zverev</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Quarter-finals</td>
<td>18</td>
<td>5</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>7</td>
<td>26</td>
<td>47</td>
<td>4</td>
<td>21</td>
<td>1</td>
<td>3</td>
<td>10</td>
<td>36</td>
<td>40</td>
</tr>
<tr>
<td>Dominic Thiem</td>
<td>Jack Sock</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Quarter-finals</td>
<td>8</td>
<td>23</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>5</td>
<td>44</td>
<td>59</td>
<td>19</td>
<td>37</td>
<td>2</td>
<td>10</td>
<td>34</td>
<td>97</td>
<td>97</td>
</tr>
<tr>
<td>Roger Federer</td>
<td>Kei Nishikori</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Quarter-finals</td>
<td>3</td>
<td>11</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>0</td>
<td>21</td>
<td>37</td>
<td>16</td>
<td>26</td>
<td>0</td>
<td>1</td>
<td>12</td>
<td>56</td>
<td>49</td>
</tr>
<tr>
<td>Novak Djokovic</td>
<td>Marin Cilic</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Quarter-finals</td>
<td>2</td>
<td>7</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>0</td>
<td>38</td>
<td>55</td>
<td>11</td>
<td>28</td>
<td>2</td>
<td>5</td>
<td>29</td>
<td>85</td>
<td>78</td>
</tr>
<tr>
<td>Karen Khachanov</td>
<td>Dominic Thiem</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Semi-finals</td>
<td>18</td>
<td>8</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>0</td>
<td>19</td>
<td>29</td>
<td>8</td>
<td>26</td>
<td>1</td>
<td>3</td>
<td>15</td>
<td>47</td>
<td>42</td>
</tr>
<tr>
<td>Novak Djokovic</td>
<td>Roger Federer</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Semi-finals</td>
<td>2</td>
<td>3</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>2</td>
<td>69</td>
<td>93</td>
<td>25</td>
<td>46</td>
<td>1</td>
<td>2</td>
<td>29</td>
<td>113</td>
<td>123</td>
</tr>
<tr>
<td>Karen Khachanov</td>
<td>Novak Djokovic</td>
<td>Paris</td>
<td>29-Oct-18</td>
<td>Indoor Hard</td>
<td>Finals</td>
<td>18</td>
<td>2</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>1</td>
<td>30</td>
<td>43</td>
<td>14</td>
<td>28</td>
<td>1</td>
<td>5</td>
<td>20</td>
<td>66</td>
<td>64</td>
</tr>
<tr>
<td>Jaume Antoni Munar Clar</td>
<td>Frances Tiafoe</td>
<td>Milan</td>
<td>5-Nov-18</td>
<td>Indoor Hard</td>
<td>NA</td>
<td>76</td>
<td>40</td>
<td>0</td>
<td>3</td>
<td>...</td>
<td>3</td>
<td>21</td>
<td>29</td>
<td>6</td>
<td>17</td>
<td>0</td>
<td>2</td>
<td>5</td>
<td>46</td>
<td>32</td>
</tr>
<tr>
<td>Frances Tiafoe</td>
<td>Hubert Hurkacz</td>
<td>Milan</td>
<td>5-Nov-18</td>
<td>Indoor Hard</td>
<td>NA</td>
<td>40</td>
<td>85</td>
<td>0</td>
<td>3</td>
<td>...</td>
<td>4</td>
<td>35</td>
<td>48</td>
<td>10</td>
<td>19</td>
<td>1</td>
<td>7</td>
<td>22</td>
<td>78</td>
<td>67</td>
</tr>
<tr>
<td>Hubert Hurkacz</td>
<td>Jaume Antoni Munar Clar</td>
<td>Milan</td>
<td>5-Nov-18</td>
<td>Indoor Hard</td>
<td>NA</td>
<td>85</td>
<td>76</td>
<td>0</td>
<td>3</td>
<td>...</td>
<td>1</td>
<td>43</td>
<td>63</td>
<td>15</td>
<td>35</td>
<td>3</td>
<td>9</td>
<td>29</td>
<td>80</td>
<td>87</td>
</tr>
<tr>
<td>Andrey Rublev</td>
<td>Liam Caruana</td>
<td>Milan</td>
<td>5-Nov-18</td>
<td>Indoor Hard</td>
<td>NA</td>
<td>68</td>
<td>NA</td>
<td>0</td>
<td>3</td>
<td>...</td>
<td>1</td>
<td>28</td>
<td>39</td>
<td>4</td>
<td>14</td>
<td>1</td>
<td>3</td>
<td>18</td>
<td>57</td>
<td>50</td>
</tr>
</tbody>
</table>
<p>As we can see, we have a <code>Winner</code> column, a <code>Loser</code> column, as well as other columns detailing the match details, and other columns which have the stats for that match. As we have a <code>Winner</code> column, if we use the current data structure to train a model we will leak the result. The model will simply learn that the actual winner comes from the <code>Winner</code> column, rather than learning from other features that we can create, such as <code>First Serve %</code>.</p>
<p>To avoid this problem, let's reshape the data from wide to long, then shuffle the data. For this, we will define a function, <code>split_winner_loser_columns</code>, which splits the raw dataframe into two dataframes, appends them together, and then shuffles the data.</p>
<p>Let's also remove all Grass and Clay matches from our data, as we will be modelling the Australian Open which is a hardcourt surface.</p>
<p>Additionally, we will add a few columns, such as <code>Match_Id</code> and <code>Total_Games</code>. These will be useful later.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>split_winner_loser_columns <span style="color: #666666">&lt;-</span> <span style="color: #008000; font-weight: bold">function</span>(df) {
  <span style="color: #408080; font-style: italic"># This function splits the raw data into two dataframes and appends them together then shuffles them</span>
  <span style="color: #408080; font-style: italic"># This output is a dataframe with only one player&#39;s stats on each row (i.e. in long format)</span>

  <span style="color: #408080; font-style: italic"># Grab a df with only the Winner&#39;s stats</span>
  winner <span style="color: #666666">=</span> df <span style="color: #666666">%&gt;%</span> 
    select(<span style="color: #666666">-</span>contains(<span style="color: #BA2121">&quot;Loser&quot;</span>)) <span style="color: #666666">%&gt;%</span> <span style="color: #408080; font-style: italic"># Select only the Winner columns + extra game info columns as a df</span>
    rename_at( <span style="color: #408080; font-style: italic"># Rename all columns containing &quot;Winner&quot; to &quot;Player&quot; </span>
      vars(contains(<span style="color: #BA2121">&quot;Winner&quot;</span>)),
      <span style="color: #666666">~</span>str_replace(<span style="color: #666666">.</span>, <span style="color: #BA2121">&quot;Winner&quot;</span>, <span style="color: #BA2121">&quot;Player&quot;</span>)
    ) <span style="color: #666666">%&gt;%</span>
    mutate(Winner <span style="color: #666666">=</span> <span style="color: #666666">1</span>) <span style="color: #408080; font-style: italic"># Create a target column</span>

  <span style="color: #408080; font-style: italic"># Repeat the process with the loser&#39;s stats</span>
  loser <span style="color: #666666">=</span> df <span style="color: #666666">%&gt;%</span>
    select(<span style="color: #666666">-</span>contains(<span style="color: #BA2121">&quot;Winner&quot;</span>)) <span style="color: #666666">%&gt;%</span>
    rename_at(
      vars(contains(<span style="color: #BA2121">&quot;Loser&quot;</span>)),
      <span style="color: #666666">~</span>str_replace(<span style="color: #666666">.</span>, <span style="color: #BA2121">&quot;Loser&quot;</span>, <span style="color: #BA2121">&quot;Player&quot;</span>)
    ) <span style="color: #666666">%&gt;%</span>
    mutate(Winner <span style="color: #666666">=</span> <span style="color: #666666">0</span>)

  <span style="color: #008000">set.seed</span>(<span style="color: #666666">183</span>) <span style="color: #408080; font-style: italic"># Set seed to replicate results - 183 is the most games played in a tennis match (Isner-Mahut)</span>

  <span style="color: #408080; font-style: italic"># Create a df that appends both the Winner and loser df together</span>
  combined_df <span style="color: #666666">=</span> winner <span style="color: #666666">%&gt;%</span> 
    <span style="color: #008000">rbind</span>(loser) <span style="color: #666666">%&gt;%</span> <span style="color: #408080; font-style: italic"># Append the loser df to the Winner df</span>
    slice(<span style="color: #008000">sample</span>(<span style="color: #666666">1:</span>n())) <span style="color: #666666">%&gt;%</span> <span style="color: #408080; font-style: italic"># Randomise row order</span>
    arrange(Match_Id) <span style="color: #666666">%&gt;%</span> <span style="color: #408080; font-style: italic"># Arrange by Match_Id</span>
    <span style="color: #008000; font-weight: bold">return</span>()
}
</pre></div>

<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #408080; font-style: italic"># Read in men and womens data; randomise the data to avoid result leakage</span>
mens <span style="color: #666666">=</span> readr<span style="color: #666666">::</span>read_csv(<span style="color: #BA2121">&#39;data/ATP_matches.csv&#39;</span>, na <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;.&quot;</span>) <span style="color: #666666">%&gt;%</span>
  filter(Court_Surface <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;Hard&quot;</span> <span style="color: #666666">|</span> Court_Surface <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;Indoor Hard&quot;</span>) <span style="color: #666666">%&gt;%</span> <span style="color: #408080; font-style: italic"># Filter to only use hardcourt games</span>
  mutate(Match_Id <span style="color: #666666">=</span> row_number(), <span style="color: #408080; font-style: italic"># Add a match ID column to be used as a key</span>
         Tournament_Date <span style="color: #666666">=</span> dmy(Tournament_Date), <span style="color: #408080; font-style: italic"># Change Tournament to datetime</span>
         Total_Games <span style="color: #666666">=</span> Winner_Games_Won <span style="color: #666666">+</span> Loser_Games_Won) <span style="color: #666666">%&gt;%</span> <span style="color: #408080; font-style: italic"># Add a total games played column</span>
  split_winner_loser_columns() <span style="color: #408080; font-style: italic"># Change the dataframe from wide to long</span>
mens <span style="color: #666666">%&gt;%</span>
  datatable(rownames <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">FALSE</span>, extensions <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;Scroller&#39;</span>, 
            options <span style="color: #666666">=</span> <span style="color: #B00040">list</span>(dom <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;t&quot;</span>, 
            scrollY <span style="color: #666666">=</span> <span style="color: #666666">450</span>,
            scroller <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">TRUE</span>,
            scrollX <span style="color: #666666">=</span> <span style="color: #666666">600</span>,
            fixedColumns <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">TRUE</span>)) <span style="color: #666666">%&gt;%</span>
  formatRound(columns<span style="color: #666666">=</span>pluck(<span style="color: #666666">.</span>, <span style="color: #BA2121">&quot;x&quot;</span>, <span style="color: #BA2121">&quot;data&quot;</span>) <span style="color: #666666">%&gt;%</span> <span style="color: #008000">colnames</span>(), digits<span style="color: #666666">=3</span>)
</pre></div>

<table>
<thead>
<tr>
<th>Player</th>
<th>Tournament</th>
<th>Tournament_Date</th>
<th>Court_Surface</th>
<th>Round_Description</th>
<th>Player_Rank</th>
<th>Retirement_Ind</th>
<th>Player_Sets_Won</th>
<th>Player_Games_Won</th>
<th>Player_Aces</th>
<th>...</th>
<th>Player_SecondServes_Won</th>
<th>Player_SecondServes_In</th>
<th>Player_BreakPoints_Won</th>
<th>Player_BreakPoints</th>
<th>Player_ReturnPoints_Won</th>
<th>Player_ReturnPoints_Faced</th>
<th>Player_TotalPoints_Won</th>
<th>Match_Id</th>
<th>Total_Games</th>
<th>Winner</th>
</tr>
</thead>
<tbody>
<tr>
<td>Eric Prodon</td>
<td>Chennai</td>
<td>2012-01-02</td>
<td>Hard</td>
<td>First Round</td>
<td>97</td>
<td>0</td>
<td>0</td>
<td>7</td>
<td>2</td>
<td>...</td>
<td>13</td>
<td>26</td>
<td>1</td>
<td>3</td>
<td>15</td>
<td>49</td>
<td>49</td>
<td>1</td>
<td>19</td>
<td>0</td>
</tr>
<tr>
<td>Edouard Roger-Vasselin</td>
<td>Chennai</td>
<td>2012-01-02</td>
<td>Hard</td>
<td>First Round</td>
<td>106</td>
<td>0</td>
<td>2</td>
<td>12</td>
<td>5</td>
<td>...</td>
<td>12</td>
<td>19</td>
<td>4</td>
<td>7</td>
<td>25</td>
<td>59</td>
<td>59</td>
<td>1</td>
<td>19</td>
<td>1</td>
</tr>
<tr>
<td>Dudi Sela</td>
<td>Chennai</td>
<td>2012-01-02</td>
<td>Hard</td>
<td>First Round</td>
<td>83</td>
<td>0</td>
<td>2</td>
<td>12</td>
<td>2</td>
<td>...</td>
<td>11</td>
<td>16</td>
<td>6</td>
<td>14</td>
<td>36</td>
<td>58</td>
<td>61</td>
<td>2</td>
<td>13</td>
<td>1</td>
</tr>
<tr>
<td>Fabio Fognini</td>
<td>Chennai</td>
<td>2012-01-02</td>
<td>Hard</td>
<td>First Round</td>
<td>48</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>...</td>
<td>5</td>
<td>26</td>
<td>0</td>
<td>1</td>
<td>8</td>
<td>33</td>
<td>30</td>
<td>2</td>
<td>13</td>
<td>0</td>
</tr>
<tr>
<td>Frederico Gil</td>
<td>Chennai</td>
<td>2012-01-02</td>
<td>Hard</td>
<td>First Round</td>
<td>102</td>
<td>0</td>
<td>1</td>
<td>14</td>
<td>5</td>
<td>...</td>
<td>18</td>
<td>35</td>
<td>2</td>
<td>4</td>
<td>36</td>
<td>103</td>
<td>99</td>
<td>3</td>
<td>33</td>
<td>0</td>
</tr>
<tr>
<td>Go Soeda</td>
<td>Chennai</td>
<td>2012-01-02</td>
<td>Hard</td>
<td>First Round</td>
<td>120</td>
<td>0</td>
<td>2</td>
<td>19</td>
<td>6</td>
<td>...</td>
<td>19</td>
<td>39</td>
<td>5</td>
<td>11</td>
<td>42</td>
<td>105</td>
<td>109</td>
<td>3</td>
<td>33</td>
<td>1</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="feature-creation">Feature Creation<a class="headerlink" href="#feature-creation" title="Permanent link">&para;</a></h2>
<p>Now that we have a fairly good understanding of what the data looks like, let's add some features. To do this we will define a function. Ideally we want to add features which will provide predictive power to our model. </p>
<p>Thinking about the dynamics of tennis, we know that players often will matches by "breaking" the opponent's serve (i.e. winning a game when the opponent is serving). This is especially important in mens tennis. Let's create a feature called <code>F_Player_BreakPoints_Per_Game</code>, which is the number of breakpoints a player gets per game that they play (even though they can only get breakpoints every second game, we will use total games). Let's also create a feature called <code>F_Player_Return_Win_Ratio</code> which is the proportion of points won when returning.</p>
<p>Similarly, "holding" serve is important (i.e. winning a game when you are serving). Let's create a feature called <code>F_Player_Serve_Win_Ratio</code> which is the proportion of points won when serving.</p>
<p>Finally, you only win a set of tennis by winning more sets than your opponent. To win a set, you need to win games. Let's create a feature called <code>F_Player_Game_Win_Percentage</code> which is the propotion of games that a player wins.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>add_ratio_features <span style="color: #666666">&lt;-</span> <span style="color: #008000; font-weight: bold">function</span>(df) {
  <span style="color: #408080; font-style: italic"># This function adds ratio features to a long df</span>
  df <span style="color: #666666">%&gt;%</span>
    mutate(
      <span style="color: #408080; font-style: italic"># Point Win ratio when serving</span>
      F_Player_Serve_Win_Ratio <span style="color: #666666">=</span> (Player_FirstServes_Won <span style="color: #666666">+</span> Player_SecondServes_Won <span style="color: #666666">-</span> Player_DoubleFaults) <span style="color: #666666">/</span> 
        (Player_FirstServes_In <span style="color: #666666">+</span> Player_SecondServes_In <span style="color: #666666">+</span> Player_DoubleFaults), 
      <span style="color: #408080; font-style: italic"># Point win ratio when returning</span>
      F_Player_Return_Win_Ratio <span style="color: #666666">=</span> Player_ReturnPoints_Won <span style="color: #666666">/</span> Player_ReturnPoints_Faced, 
      <span style="color: #408080; font-style: italic"># Breakpoints per receiving game</span>
      F_Player_BreakPoints_Per_Game <span style="color: #666666">=</span> Player_BreakPoints <span style="color: #666666">/</span> Total_Games, 
      F_Player_Game_Win_Percentage <span style="color: #666666">=</span> Player_Games_Won <span style="color: #666666">/</span> Total_Games
    ) <span style="color: #666666">%&gt;%</span>
    mutate_at(
      vars(<span style="color: #008000">colnames</span>(<span style="color: #666666">.</span>), <span style="color: #666666">-</span>contains(<span style="color: #BA2121">&quot;Rank&quot;</span>), <span style="color: #666666">-</span>Tournament_Date), <span style="color: #408080; font-style: italic"># Replace all NAs with0 apart from Rank, Date</span>
      <span style="color: #666666">~</span><span style="color: #008000">ifelse</span>(<span style="color: #008000">is.na</span>(<span style="color: #666666">.</span>), <span style="color: #666666">0</span>, <span style="color: #666666">.</span>)
    ) <span style="color: #666666">%&gt;%</span>
    <span style="color: #008000; font-weight: bold">return</span>()
}
mens <span style="color: #666666">=</span> mens <span style="color: #666666">%&gt;%</span>
  add_ratio_features() <span style="color: #408080; font-style: italic"># Add features</span>
</pre></div>

<p>Now that we have added our features, we need to create rolling averages for them. We cannot simply use current match statistics, as they will leak the result to the model. Instead, we need to use past match statistics to predict future matches. Here we will use a rolling mean with a window of 15. If the player hasn't played 15 games, we will instead use a cumulative mean. We will also lag the result so as to not leak the result.</p>
<p>This next chunk of code simply takes all the columns starting with F_ and calculates these means.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>mens <span style="color: #666666">=</span> mens <span style="color: #666666">%&gt;%</span> 
  group_by(Player) <span style="color: #666666">%&gt;%</span> <span style="color: #408080; font-style: italic"># Group by player</span>
  mutate_at( <span style="color: #408080; font-style: italic"># Create a rolling mean with window 15 for each player. </span>
    vars(starts_with(<span style="color: #BA2121">&quot;F_&quot;</span>)), <span style="color: #408080; font-style: italic"># If the player hasn&#39;t played 15 games, use a cumulative mean</span>
    <span style="color: #666666">~</span>coalesce(rollmean(<span style="color: #666666">.</span>, k <span style="color: #666666">=</span> <span style="color: #666666">15</span>, align <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;right&quot;</span>, fill <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">NA_real_</span>), cummean(<span style="color: #666666">.</span>)) <span style="color: #666666">%&gt;%</span> lag()
  ) <span style="color: #666666">%&gt;%</span>
  ungroup()
</pre></div>

<hr />
<h2 id="creating-a-training-feature-matrix">Creating a Training Feature Matrix<a class="headerlink" href="#creating-a-training-feature-matrix" title="Permanent link">&para;</a></h2>
<p>In predictive modelling language - features are data metrics we use to predict an outcome or target variable. We have several choices to make before we get to the prediction phase. What are the features? How do we structure the outcome variable? What does each row mean? Do we use all data or just a subset? We narrowed it down to two options</p>
<p>We can train the model on every tennis match in the data set, or
We can only train the model on Australian Open matches.
Doing Option 1 would mean we have a lot more data to build a strong model, but it might be challenging to work around the constraints described in the tournament structure.</p>
<p>Doing Option 2 fits better from that angle but leaves us with very few matches to train our model on.</p>
<p>We have decided to go with an option that combines strengths from both approaches, by training the model on matches from the Aus Open and the US Open because both grand slams are played on the same surface - hard court.</p>
<p>However, we also need to train our model in the same way that will be used to predict the 2019 Australian Open. When predicting the 2<sup>nd</sup> round, we won't have data from the 1<sup>st</sup> round. So we will need to build our training feature matrix with this in mind. We should extract features for a player from past games at the start of the tournament and apply them to every matchup that that player plays.</p>
<p>To do this, we will create a function, <code>extract_latest_features_for_tournament</code>, which maps over our feature dataframe for the dates in the first round of a tournament and grabs features.</p>
<p>First, we need the Australian Open and US Open results - let's grab these and then apply our function.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #408080; font-style: italic"># Get Australian Open and US Open Results</span>
aus_us_open_results <span style="color: #666666">=</span> 
  mens <span style="color: #666666">%&gt;%</span>
  filter((Tournament <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;Australian Open, Melbourne&quot;</span> <span style="color: #666666">|</span> Tournament <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;U.S. Open, New York&quot;</span>)
         <span style="color: #666666">&amp;</span> Round_Description <span style="color: #666666">!=</span> <span style="color: #BA2121">&quot;Qualifying&quot;</span> <span style="color: #666666">&amp;</span> Tournament_Date <span style="color: #666666">!=</span> <span style="color: #BA2121">&quot;2012-01-16&quot;</span>) <span style="color: #666666">%&gt;%</span> <span style="color: #408080; font-style: italic"># Filter out qualifiers</span>
  select(Match_Id, Player, Tournament, Tournament_Date, Round_Description, Winner)
<span style="color: #408080; font-style: italic"># Create a function which extracts features for each tournament</span>
extract_latest_features_for_tournament <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">function</span>(df, dte) {

  df <span style="color: #666666">%&gt;%</span> <span style="color: #408080; font-style: italic"># Filter for the 1st round</span>
    filter(Tournament_Date <span style="color: #666666">==</span> dte, Round_Description <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;First Round&quot;</span>, Tournament_Date <span style="color: #666666">!=</span> <span style="color: #BA2121">&quot;2012-01-16&quot;</span>) <span style="color: #666666">%&gt;%</span> 
    group_by(Player) <span style="color: #666666">%&gt;%</span> <span style="color: #408080; font-style: italic"># Group by player</span>
    select_at(
      vars(Match_Id, starts_with(<span style="color: #BA2121">&quot;F_&quot;</span>), Player_Rank) <span style="color: #408080; font-style: italic"># Grab the players&#39; features</span>
    ) <span style="color: #666666">%&gt;%</span>
    rename(F_Player_Rank <span style="color: #666666">=</span> Player_Rank) <span style="color: #666666">%&gt;%</span>
    ungroup() <span style="color: #666666">%&gt;%</span>
    mutate(Feature_Date <span style="color: #666666">=</span> dte) <span style="color: #666666">%&gt;%</span>
    select(Player, Feature_Date, everything())
}
<span style="color: #408080; font-style: italic"># Create a feature matrix in long format</span>
feature_matrix_long <span style="color: #666666">=</span> 
  aus_us_open_results <span style="color: #666666">%&gt;%</span>
  distinct(Tournament_Date) <span style="color: #666666">%&gt;%</span> <span style="color: #408080; font-style: italic"># Pull all Tournament Dates</span>
  pull() <span style="color: #666666">%&gt;%</span>
  map_dfr(
    <span style="color: #666666">~</span>extract_latest_features_for_tournament(mens, <span style="color: #666666">.</span>) <span style="color: #408080; font-style: italic"># Get the features</span>
  ) <span style="color: #666666">%&gt;%</span>
  filter(Feature_Date <span style="color: #666666">!=</span> <span style="color: #BA2121">&quot;2012-01-16&quot;</span>) <span style="color: #666666">%&gt;%</span> <span style="color: #408080; font-style: italic"># Filter out the first Aus Open</span>
  mutate_at( <span style="color: #408080; font-style: italic"># Replace NAs with the mean</span>
    vars(starts_with(<span style="color: #BA2121">&quot;F_&quot;</span>)),
    <span style="color: #666666">~</span><span style="color: #008000">ifelse</span>(<span style="color: #008000">is.na</span>(<span style="color: #666666">.</span>), <span style="color: #008000">mean</span>(<span style="color: #666666">.</span>, na.rm <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">TRUE</span>), <span style="color: #666666">.</span>)
  )
</pre></div>

<p>Now that we have a feature matrix in long format, we need to convert it to wide format so that the features are on the same row. To do this we will define a function <code>gather_df</code>, which converts the dataframe from long to wide.
Let's also join the results to the matrix and convert the <code>Winner</code> column to a factor. Finally, we will take the difference of player1 and player2's features, so as to reduce the dimensionality of the model.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>gather_df <span style="color: #666666">&lt;-</span> <span style="color: #008000; font-weight: bold">function</span>(df) {
  <span style="color: #408080; font-style: italic"># This function puts the df back into its original format of each row containing stats for both players</span>
  df <span style="color: #666666">%&gt;%</span>
    arrange(Match_Id) <span style="color: #666666">%&gt;%</span>
    filter(row_number() <span style="color: #666666">%%</span> <span style="color: #666666">2</span> <span style="color: #666666">!=</span> <span style="color: #666666">0</span>) <span style="color: #666666">%&gt;%</span> <span style="color: #408080; font-style: italic"># Filter for every 2nd row, starting at the 1st index. e.g. 1, 3, 5</span>
    rename_at( <span style="color: #408080; font-style: italic"># Rename columns to player_1</span>
      vars(contains(<span style="color: #BA2121">&quot;Player&quot;</span>)),
      <span style="color: #666666">~</span>str_replace(<span style="color: #666666">.</span>, <span style="color: #BA2121">&quot;Player&quot;</span>, <span style="color: #BA2121">&quot;player_1&quot;</span>)
    ) <span style="color: #666666">%&gt;%</span>
    inner_join(df <span style="color: #666666">%&gt;%</span>
                 filter(row_number() <span style="color: #666666">%%</span> <span style="color: #666666">2</span> <span style="color: #666666">==</span> <span style="color: #666666">0</span>) <span style="color: #666666">%&gt;%</span>
                 rename_at(
                   vars(contains(<span style="color: #BA2121">&quot;Player&quot;</span>)), <span style="color: #408080; font-style: italic"># Rename columns to player_2</span>
                   <span style="color: #666666">~</span>str_replace(<span style="color: #666666">.</span>, <span style="color: #BA2121">&quot;Player&quot;</span>, <span style="color: #BA2121">&quot;player_2&quot;</span>)
                 ) <span style="color: #666666">%&gt;%</span>
                 select(Match_Id, contains(<span style="color: #BA2121">&quot;Player&quot;</span>)),
               by<span style="color: #666666">=</span><span style="color: #B00040">c</span>(<span style="color: #BA2121">&#39;Match_Id&#39;</span>)
    ) <span style="color: #666666">%&gt;%</span>
    select(Match_Id, player_1, player_2, Winner, everything()) <span style="color: #666666">%&gt;%</span>
    <span style="color: #008000; font-weight: bold">return</span>()
}
<span style="color: #408080; font-style: italic"># Joining results to features</span>
feature_matrix_wide <span style="color: #666666">=</span> aus_us_open_results <span style="color: #666666">%&gt;%</span>
  inner_join(feature_matrix_long <span style="color: #666666">%&gt;%</span> 
               select(<span style="color: #666666">-</span>Match_Id), 
             by <span style="color: #666666">=</span> <span style="color: #B00040">c</span>(<span style="color: #BA2121">&quot;Player&quot;</span>, <span style="color: #BA2121">&quot;Tournament_Date&quot;</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;Feature_Date&quot;</span>)) <span style="color: #666666">%&gt;%</span>
  gather_df() <span style="color: #666666">%&gt;%</span>
  mutate(
    F_Serve_Win_Ratio_Diff <span style="color: #666666">=</span> F_player_1_Serve_Win_Ratio <span style="color: #666666">-</span> F_player_2_Serve_Win_Ratio,
    F_Return_Win_Ratio_Diff <span style="color: #666666">=</span> F_player_1_Return_Win_Ratio <span style="color: #666666">-</span> F_player_2_Return_Win_Ratio,
    F_Game_Win_Percentage_Diff <span style="color: #666666">=</span> F_player_1_Game_Win_Percentage <span style="color: #666666">-</span> F_player_2_Game_Win_Percentage,
    F_BreakPoints_Per_Game_Diff <span style="color: #666666">=</span> F_player_1_BreakPoints_Per_Game <span style="color: #666666">-</span> F_player_2_BreakPoints_Per_Game,
    F_Rank_Diff <span style="color: #666666">=</span> (F_player_1_Rank <span style="color: #666666">-</span> F_player_2_Rank),
    Winner <span style="color: #666666">=</span> <span style="color: #008000">as.factor</span>(Winner)
  ) <span style="color: #666666">%&gt;%</span>
  select(Match_Id, player_1, player_2, Tournament, Tournament_Date, Round_Description, Winner, contains(<span style="color: #BA2121">&quot;Diff&quot;</span>))
train <span style="color: #666666">=</span> feature_matrix_wide
train <span style="color: #666666">%&gt;%</span>
  datatable(rownames <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">FALSE</span>, extensions <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;Scroller&#39;</span>, 
            options <span style="color: #666666">=</span> <span style="color: #B00040">list</span>(dom <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;t&quot;</span>, 
            scrollY <span style="color: #666666">=</span> <span style="color: #666666">450</span>,
            scroller <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">TRUE</span>,
            scrollX <span style="color: #666666">=</span> <span style="color: #666666">600</span>,
            fixedColumns <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">TRUE</span>)) <span style="color: #666666">%&gt;%</span>
  formatRound(columns<span style="color: #666666">=</span>pluck(<span style="color: #666666">.</span>, <span style="color: #BA2121">&quot;x&quot;</span>, <span style="color: #BA2121">&quot;data&quot;</span>) <span style="color: #666666">%&gt;%</span> <span style="color: #008000">colnames</span>(), digits<span style="color: #666666">=3</span>)
</pre></div>

<table>
<thead>
<tr>
<th>Match_Id</th>
<th>player_1</th>
<th>player_2</th>
<th>Tournament</th>
<th>Tournament_Date</th>
<th>Round_Description</th>
<th>Winner</th>
<th>F_Serve_Win_Ratio_Diff</th>
<th>F_Return_Win_Ratio_Diff</th>
<th>F_Game_Win_Percentage_Diff</th>
<th>F_BreakPoints_Per_Game_Diff</th>
<th>F_Rank_Diff</th>
</tr>
</thead>
<tbody>
<tr>
<td>1139</td>
<td>Adrian Ungur</td>
<td>Daniel Brands</td>
<td>U.S. Open, New York</td>
<td>2012-08-27</td>
<td>First Round</td>
<td>0</td>
<td>0.03279412</td>
<td>-0.014757229</td>
<td>0.002877458</td>
<td>0.073938088</td>
<td>-13</td>
</tr>
<tr>
<td>1140</td>
<td>Albert Montanes</td>
<td>Richard Gasquet</td>
<td>U.S. Open, New York</td>
<td>2012-08-27</td>
<td>First Round</td>
<td>0</td>
<td>-0.08000322</td>
<td>-0.077451342</td>
<td>-0.131108056</td>
<td>-0.180846832</td>
<td>97</td>
</tr>
<tr>
<td>1141</td>
<td>Martin Klizan</td>
<td>Alejandro Falla</td>
<td>U.S. Open, New York</td>
<td>2012-08-27</td>
<td>First Round</td>
<td>1</td>
<td>0.07711693</td>
<td>-0.044715517</td>
<td>0.068179841</td>
<td>-0.087361962</td>
<td>1</td>
</tr>
<tr>
<td>1142</td>
<td>Alex Bogomolov Jr.</td>
<td>Andy Murray</td>
<td>U.S. Open, New York</td>
<td>2012-08-27</td>
<td>First Round</td>
<td>0</td>
<td>-0.03964074</td>
<td>-0.031700826</td>
<td>-0.059010072</td>
<td>-0.094721700</td>
<td>69</td>
</tr>
<tr>
<td>1143</td>
<td>Tommy Robredo</td>
<td>Andreas Seppi</td>
<td>U.S. Open, New York</td>
<td>2012-08-27</td>
<td>First Round</td>
<td>1</td>
<td>-0.02681392</td>
<td>0.006442134</td>
<td>-0.067779660</td>
<td>-0.009930089</td>
<td>151</td>
</tr>
<tr>
<td>1144</td>
<td>Ryan Harrison</td>
<td>Benjamin Becker</td>
<td>U.S. Open, New York</td>
<td>2012-08-27</td>
<td>First Round</td>
<td>1</td>
<td>0.04251983</td>
<td>0.018604623</td>
<td>0.026486753</td>
<td>-0.003548973</td>
<td>-24</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="creating-the-feature-matrix-for-the-2019-australian-open">Creating the Feature Matrix for the 2019 Australian Open<a class="headerlink" href="#creating-the-feature-matrix-for-the-2019-australian-open" title="Permanent link">&para;</a></h2>
<p>Now that we have our training set, <code>train</code>, we need to create a feature matrix to create predictions on. To do this, we need to generate features again. We could simply append a player list to our raw dataframe, create a mock date and then use the <code>extract_latest_features_for_tournament</code> function that we used before. 
Instead, we're going to create a lookup table for each unique player in the 2019 Australian Open. We will need to get their last 15 games and then find the mean for each feature so that our features are the same.</p>
<p>Let's first explore what the dummy submission file looks like, then use it to get the unique players.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>read_csv(<span style="color: #BA2121">&#39;data/men_dummy_submission_file.csv&#39;</span>) <span style="color: #666666">%&gt;%</span> glimpse()
</pre></div>

<p>As we can see, the dummy submission file contains every potential match up for the Open. This will be updated a few days before the Open starts with the actual players playing. Let's now create the lookup feature table.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #408080; font-style: italic"># Get a vector of unique players in this years&#39; open using the dummy submission file</span>
unique_players <span style="color: #666666">=</span> read_csv(<span style="color: #BA2121">&#39;data/men_dummy_submission_file.csv&#39;</span>) <span style="color: #666666">%&gt;%</span> pull(player_1) <span style="color: #666666">%&gt;%</span> <span style="color: #008000">unique</span>()
<span style="color: #408080; font-style: italic"># Get the last 15 games played for each unique player and find their features</span>
lookup_feature_table <span style="color: #666666">=</span> read_csv(<span style="color: #BA2121">&#39;data/ATP_matches.csv&#39;</span>, na <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;.&quot;</span>) <span style="color: #666666">%&gt;%</span>
  filter(Court_Surface <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;Hard&quot;</span> <span style="color: #666666">|</span> Court_Surface <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;Indoor Hard&quot;</span>) <span style="color: #666666">%&gt;%</span>
  mutate(Match_Id <span style="color: #666666">=</span> row_number(), <span style="color: #408080; font-style: italic"># Add a match ID column to be used as a key</span>
         Tournament_Date <span style="color: #666666">=</span> dmy(Tournament_Date), <span style="color: #408080; font-style: italic"># Change Tournament to datetime</span>
         Total_Games <span style="color: #666666">=</span> Winner_Games_Won <span style="color: #666666">+</span> Loser_Games_Won) <span style="color: #666666">%&gt;%</span> <span style="color: #408080; font-style: italic"># Add a total games played column</span>
  <span style="color: #408080; font-style: italic"># clean_missing_data() %&gt;% # Clean missing data</span>
  split_winner_loser_columns() <span style="color: #666666">%&gt;%</span> <span style="color: #408080; font-style: italic"># Change the dataframe from wide to long</span>
  add_ratio_features() <span style="color: #666666">%&gt;%</span>
  filter(Player <span style="color: #666666">%in%</span> unique_players) <span style="color: #666666">%&gt;%</span>
  group_by(Player) <span style="color: #666666">%&gt;%</span>
  top_n(<span style="color: #666666">15</span>, Match_Id) <span style="color: #666666">%&gt;%</span>
  summarise(
    F_Player_Serve_Win_Ratio <span style="color: #666666">=</span> <span style="color: #008000">mean</span>(F_Player_Serve_Win_Ratio),
    F_Player_Return_Win_Ratio <span style="color: #666666">=</span> <span style="color: #008000">mean</span>(F_Player_Return_Win_Ratio),
    F_Player_BreakPoints_Per_Game <span style="color: #666666">=</span> <span style="color: #008000">mean</span>(F_Player_BreakPoints_Per_Game),
    F_Player_Game_Win_Percentage <span style="color: #666666">=</span> <span style="color: #008000">mean</span>(F_Player_Game_Win_Percentage),
    F_Player_Rank <span style="color: #666666">=</span> last(Player_Rank)
  )
</pre></div>

<p>Now let's create features for every single combination. To do this we'll join our <code>lookup_feature_table</code> to the <code>player_1</code> and <code>player_2</code> columns in the <code>dummy_submission_file</code>.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #408080; font-style: italic"># Create feature matrix for the Australian Open for all player 1s</span>
features_player_1 <span style="color: #666666">=</span> read_csv(<span style="color: #BA2121">&#39;data/men_dummy_submission_file.csv&#39;</span>) <span style="color: #666666">%&gt;%</span>
  select(player_1) <span style="color: #666666">%&gt;%</span>
  inner_join(lookup_feature_table, by<span style="color: #666666">=</span><span style="color: #B00040">c</span>(<span style="color: #BA2121">&quot;player_1&quot;</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;Player&quot;</span>)) <span style="color: #666666">%&gt;%</span>
  rename(F_player_1_Serve_Win_Ratio <span style="color: #666666">=</span> F_Player_Serve_Win_Ratio,
         F_player_1_Return_Win_Ratio <span style="color: #666666">=</span> F_Player_Return_Win_Ratio,
         F_player_1_BreakPoints_Per_Game <span style="color: #666666">=</span> F_Player_BreakPoints_Per_Game,
         F_player_1_Game_Win_Percentage <span style="color: #666666">=</span> F_Player_Game_Win_Percentage,
         F_player_1_Rank <span style="color: #666666">=</span> F_Player_Rank)
<span style="color: #408080; font-style: italic"># Create feature matrix for the Australian Open for all player 2s</span>
features_player_2 <span style="color: #666666">=</span> read_csv(<span style="color: #BA2121">&#39;data/men_dummy_submission_file.csv&#39;</span>) <span style="color: #666666">%&gt;%</span>
  select(player_2) <span style="color: #666666">%&gt;%</span>
  inner_join(lookup_feature_table, by<span style="color: #666666">=</span><span style="color: #B00040">c</span>(<span style="color: #BA2121">&quot;player_2&quot;</span> <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;Player&quot;</span>)) <span style="color: #666666">%&gt;%</span>
  rename(F_player_2_Serve_Win_Ratio <span style="color: #666666">=</span> F_Player_Serve_Win_Ratio,
         F_player_2_Return_Win_Ratio <span style="color: #666666">=</span> F_Player_Return_Win_Ratio,
         F_player_2_BreakPoints_Per_Game <span style="color: #666666">=</span> F_Player_BreakPoints_Per_Game,
         F_player_2_Game_Win_Percentage <span style="color: #666666">=</span> F_Player_Game_Win_Percentage,
         F_player_2_Rank <span style="color: #666666">=</span> F_Player_Rank)
<span style="color: #408080; font-style: italic"># Join the two dfs together and subtract features to create Difference features</span>
aus_open_2019_features <span style="color: #666666">=</span> features_player_1 <span style="color: #666666">%&gt;%</span> 
  bind_cols(features_player_2) <span style="color: #666666">%&gt;%</span>
  select(player_1, player_2, everything()) <span style="color: #666666">%&gt;%</span>
  mutate(
    F_Serve_Win_Ratio_Diff <span style="color: #666666">=</span> F_player_1_Serve_Win_Ratio <span style="color: #666666">-</span> F_player_2_Serve_Win_Ratio,
    F_Return_Win_Ratio_Diff <span style="color: #666666">=</span> F_player_1_Return_Win_Ratio <span style="color: #666666">-</span> F_player_2_Return_Win_Ratio,
    F_Game_Win_Percentage_Diff <span style="color: #666666">=</span> F_player_1_Game_Win_Percentage <span style="color: #666666">-</span> F_player_2_Game_Win_Percentage,
    F_BreakPoints_Per_Game_Diff <span style="color: #666666">=</span> F_player_1_BreakPoints_Per_Game <span style="color: #666666">-</span> F_player_2_BreakPoints_Per_Game,
    F_Rank_Diff <span style="color: #666666">=</span> (F_player_1_Rank <span style="color: #666666">-</span> F_player_2_Rank)
  ) <span style="color: #666666">%&gt;%</span>
  select(player_1, player_2, contains(<span style="color: #BA2121">&quot;Diff&quot;</span>))
aus_open_2019_features  <span style="color: #666666">%&gt;%</span>
  datatable(rownames <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">FALSE</span>, extensions <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;Scroller&#39;</span>, 
            options <span style="color: #666666">=</span> <span style="color: #B00040">list</span>(dom <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;t&quot;</span>,
                          scrollY <span style="color: #666666">=</span> <span style="color: #666666">450</span>,
                          scroller <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">TRUE</span>,
                          scrollX <span style="color: #666666">=</span> <span style="color: #666666">600</span>,
                          fixedColumns <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">TRUE</span>)) <span style="color: #666666">%&gt;%</span>
  formatRound(columns<span style="color: #666666">=</span>pluck(<span style="color: #666666">.</span>, <span style="color: #BA2121">&quot;x&quot;</span>, <span style="color: #BA2121">&quot;data&quot;</span>) <span style="color: #666666">%&gt;%</span> <span style="color: #008000">colnames</span>(), digits<span style="color: #666666">=3</span>)
</pre></div>

<table>
<thead>
<tr>
<th>player_1</th>
<th>player_2</th>
<th>F_Serve_Win_Ratio_Diff</th>
<th>F_Return_Win_Ratio_Diff</th>
<th>F_Game_Win_Percentage_Diff</th>
<th>F_BreakPoints_Per_Game_Diff</th>
<th>F_Rank_Diff</th>
</tr>
</thead>
<tbody>
<tr>
<td>Novak Djokovic</td>
<td>Rafael Nadal</td>
<td>0.06347805</td>
<td>0.02503802</td>
<td>0.07002382</td>
<td>0.08951024</td>
<td>1</td>
</tr>
<tr>
<td>Novak Djokovic</td>
<td>Roger Federer</td>
<td>0.06583364</td>
<td>0.03628491</td>
<td>0.07661295</td>
<td>0.15455628</td>
<td>-1</td>
</tr>
<tr>
<td>Novak Djokovic</td>
<td>Juan Martin del Potro</td>
<td>0.01067079</td>
<td>0.03436023</td>
<td>0.06382353</td>
<td>0.11259979</td>
<td>-2</td>
</tr>
<tr>
<td>Novak Djokovic</td>
<td>Alexander Zverev</td>
<td>0.11117863</td>
<td>0.03125651</td>
<td>0.11055585</td>
<td>0.08661036</td>
<td>-3</td>
</tr>
<tr>
<td>Novak Djokovic</td>
<td>Kevin Anderson</td>
<td>0.02132375</td>
<td>0.10449337</td>
<td>0.11184503</td>
<td>0.23684083</td>
<td>-4</td>
</tr>
<tr>
<td>Novak Djokovic</td>
<td>Marin Cilic</td>
<td>0.08410746</td>
<td>0.02434916</td>
<td>0.07653035</td>
<td>0.08355134</td>
<td>-5</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="generating-2019-australian-open-predictions">Generating 2019 Australian Open Predictions<a class="headerlink" href="#generating-2019-australian-open-predictions" title="Permanent link">&para;</a></h2>
<p>Now that we have our features, we can finally train our model and generate predictions for the 2019 Australian Open. Due to its simplicity, we will use h2o's Auto Machine Learning function <code>h2o.automl</code>. This will train a heap of different models and optimise the hyperparameters, as well as creating stacked ensembles automatically for us. We will use optimising by log loss.</p>
<p>First, we must create h2o frames for our training and feature dataframes. Then we will run <code>h2o.automl</code>. Note that we can set the <code>max_runtime_secs</code> parameter. As this is a notebook, I have set it for 30 seconds - but I suggest you give it 10 minutes to create the best model. We can then create our predictions and assign them back to our <code>aus_open_2019_features</code> dataframe. Finally, we will group_by player and find the best player, on average.</p>
<p><div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #408080; font-style: italic">## Setup H2O</span>
h2o.init(ip <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;localhost&quot;</span>,
         port <span style="color: #666666">=</span> <span style="color: #666666">54321</span>,
         enable_assertions <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">TRUE</span>,
         nthreads <span style="color: #666666">=</span> <span style="color: #666666">2</span>,
         max_mem_size <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;24g&quot;</span>

)
<span style="color: #408080; font-style: italic">## Sending file to h2o</span>
train_h2o <span style="color: #666666">=</span> feature_matrix_wide <span style="color: #666666">%&gt;%</span>
  select(contains(<span style="color: #BA2121">&quot;Diff&quot;</span>), Winner) <span style="color: #666666">%&gt;%</span>
  as.h2o(destination_frame <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;train_h2o&quot;</span>)
aus_open_2019_features_h2o <span style="color: #666666">=</span> aus_open_2019_features <span style="color: #666666">%&gt;%</span>
  select(contains(<span style="color: #BA2121">&quot;Diff&quot;</span>)) <span style="color: #666666">%&gt;%</span>
  as.h2o(destination_frame <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;aus_open_2019_features_h2o&quot;</span>)
<span style="color: #408080; font-style: italic">## Running Auto ML </span>
mens_model <span style="color: #666666">=</span> h2o.automl(y <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;Winner&quot;</span>,
                        training_frame <span style="color: #666666">=</span> train_h2o,
                        max_runtime_secs <span style="color: #666666">=</span> <span style="color: #666666">30</span>,
                        max_models <span style="color: #666666">=</span> <span style="color: #666666">100</span>,
                        stopping_metric <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;logloss&quot;</span>,
                        sort_metric <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;logloss&quot;</span>,
                        balance_classes <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">TRUE</span>,
                        seed <span style="color: #666666">=</span> <span style="color: #666666">183</span>) <span style="color: #408080; font-style: italic"># Set seed to replicate results - 183 is the most games played in a tennis match (Isner-Mahut)</span>
<span style="color: #408080; font-style: italic">## Predictions on test frame</span>
predictions <span style="color: #666666">=</span> h2o.predict(mens_model<span style="color: #666666">@</span>leader, aus_open_2019_features_h2o) <span style="color: #666666">%&gt;%</span>
  <span style="color: #008000">as.data.frame</span>()
aus_open_2019_features<span style="color: #666666">$</span>prob_player_1 <span style="color: #666666">=</span> predictions<span style="color: #666666">$</span>p1
aus_open_2019_features<span style="color: #666666">$</span>prob_player_2 <span style="color: #666666">=</span> predictions<span style="color: #666666">$</span>p0
h2o.shutdown(prompt <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">FALSE</span>)
</pre></div>
Now let's find the best player by taking the mean of the prediction probability by player.
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>aus_open_2019_features <span style="color: #666666">%&gt;%</span> 
  select(player_1, starts_with(<span style="color: #BA2121">&quot;F_&quot;</span>), prob_player_1) <span style="color: #666666">%&gt;%</span>
  group_by(player_1) <span style="color: #666666">%&gt;%</span>
  summarise_all(<span style="color: #008000">mean</span>) <span style="color: #666666">%&gt;%</span>
  arrange(desc(prob_player_1)) <span style="color: #666666">%&gt;%</span>
  datatable(rownames <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">FALSE</span>, extensions <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;Scroller&#39;</span>, 
            options <span style="color: #666666">=</span> <span style="color: #B00040">list</span>(dom <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;t&quot;</span>,
                          scrollY <span style="color: #666666">=</span> <span style="color: #666666">450</span>,
                          scroller <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">TRUE</span>,
                          scrollX <span style="color: #666666">=</span> <span style="color: #666666">600</span>,
                          fixedColumns <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">TRUE</span>)) <span style="color: #666666">%&gt;%</span>
  formatRound(columns<span style="color: #666666">=</span>pluck(<span style="color: #666666">.</span>, <span style="color: #BA2121">&quot;x&quot;</span>, <span style="color: #BA2121">&quot;data&quot;</span>) <span style="color: #666666">%&gt;%</span> <span style="color: #008000">colnames</span>(), digits<span style="color: #666666">=3</span>)
</pre></div></p>
<table>
<thead>
<tr>
<th>player_1</th>
<th>F_Serve_Win_Ratio_Diff</th>
<th>F_Return_Win_Ratio_Diff</th>
<th>F_Game_Win_Percentage_Diff</th>
<th>F_BreakPoints_Per_Game_Diff</th>
<th>F_Rank_Diff</th>
<th>prob_player_1</th>
</tr>
</thead>
<tbody>
<tr>
<td>Novak Djokovic</td>
<td>0.1109364627</td>
<td>0.076150615</td>
<td>0.1483970690</td>
<td>0.17144300</td>
<td>NA</td>
<td>0.8616486</td>
</tr>
<tr>
<td>Karen Khachanov</td>
<td>0.0960639298</td>
<td>0.061436164</td>
<td>0.1059967623</td>
<td>0.04544955</td>
<td>NA</td>
<td>0.8339594</td>
</tr>
<tr>
<td>Juan Martin del Potro</td>
<td>0.1003931993</td>
<td>0.042025222</td>
<td>0.0847985439</td>
<td>0.05943767</td>
<td>NA</td>
<td>0.8218308</td>
</tr>
<tr>
<td>Rafael Nadal</td>
<td>0.0480432305</td>
<td>0.051531252</td>
<td>0.0790179917</td>
<td>0.08181694</td>
<td>NA</td>
<td>0.8032543</td>
</tr>
<tr>
<td>Gilles Simon</td>
<td>0.0646937767</td>
<td>0.084843307</td>
<td>0.0901401318</td>
<td>0.08675350</td>
<td>NA</td>
<td>0.7985995</td>
</tr>
<tr>
<td>Roger Federer</td>
<td>0.0452014997</td>
<td>0.040992497</td>
<td>0.0725719954</td>
<td>0.01817046</td>
<td>NA</td>
<td>0.7962289</td>
</tr>
<tr>
<td>Kei Nishikori</td>
<td>0.0777155934</td>
<td>0.018720226</td>
<td>0.0800648870</td>
<td>0.02740276</td>
<td>NA</td>
<td>0.7843631</td>
</tr>
<tr>
<td>Marin Cilic</td>
<td>0.0285413602</td>
<td>0.053017465</td>
<td>0.0736687072</td>
<td>0.08883055</td>
<td>NA</td>
<td>0.7804876</td>
</tr>
<tr>
<td>Tomas Berdych</td>
<td>0.0471654691</td>
<td>0.047289449</td>
<td>0.0737401748</td>
<td>0.10584114</td>
<td>NA</td>
<td>0.7739211</td>
</tr>
<tr>
<td>Daniil Medvedev</td>
<td>0.0275430665</td>
<td>0.031121856</td>
<td>0.0721948279</td>
<td>0.01803757</td>
<td>NA</td>
<td>0.7543269</td>
</tr>
<tr>
<td>Stefanos Tsitsipas</td>
<td>0.0470382377</td>
<td>0.023825850</td>
<td>0.0577628626</td>
<td>0.02105227</td>
<td>NA</td>
<td>0.7511674</td>
</tr>
<tr>
<td>Dominic Thiem</td>
<td>0.0258904189</td>
<td>0.032481624</td>
<td>0.0483707080</td>
<td>0.05857158</td>
<td>NA</td>
<td>0.7451547</td>
</tr>
<tr>
<td>Alexander Zverev</td>
<td>0.0006199716</td>
<td>0.044811275</td>
<td>0.0380134371</td>
<td>0.08423392</td>
<td>NA</td>
<td>0.7374897</td>
</tr>
<tr>
<td>Kyle Edmund</td>
<td>0.0558006240</td>
<td>0.011963627</td>
<td>0.0478850676</td>
<td>0.05142186</td>
<td>NA</td>
<td>0.7304873</td>
</tr>
<tr>
<td>Pablo Carreno Busta</td>
<td>0.0321878318</td>
<td>0.029862068</td>
<td>0.0413674481</td>
<td>-0.00229784</td>
<td>NA</td>
<td>0.7302043</td>
</tr>
<tr>
<td>Borna Coric</td>
<td>0.0762084129</td>
<td>-0.010097922</td>
<td>0.0413621283</td>
<td>-0.01924267</td>
<td>NA</td>
<td>0.7268124</td>
</tr>
<tr>
<td>Kevin Anderson</td>
<td>0.0907358428</td>
<td>-0.027171681</td>
<td>0.0381421997</td>
<td>-0.06362578</td>
<td>NA</td>
<td>0.7260799</td>
</tr>
<tr>
<td>David Goffin</td>
<td>-0.0034821911</td>
<td>0.037247336</td>
<td>0.0162572061</td>
<td>0.05603565</td>
<td>NA</td>
<td>0.7155908</td>
</tr>
<tr>
<td>Fernando Verdasco</td>
<td>0.0229261365</td>
<td>0.032884054</td>
<td>0.0521212576</td>
<td>0.04668854</td>
<td>NA</td>
<td>0.7120831</td>
</tr>
<tr>
<td>Roberto Bautista Agut</td>
<td>0.0047641170</td>
<td>0.049939608</td>
<td>0.0218975349</td>
<td>0.07331023</td>
<td>NA</td>
<td>0.7009891</td>
</tr>
<tr>
<td>Milos Raonic</td>
<td>0.0849726089</td>
<td>-0.028732182</td>
<td>0.0385944327</td>
<td>-0.08009382</td>
<td>NA</td>
<td>0.6986865</td>
</tr>
<tr>
<td>Fabio Fognini</td>
<td>-0.0394792678</td>
<td>0.047935185</td>
<td>0.0226546894</td>
<td>0.06213496</td>
<td>NA</td>
<td>0.6982031</td>
</tr>
<tr>
<td>Hyeon Chung</td>
<td>0.0042489153</td>
<td>0.047722133</td>
<td>0.0158096386</td>
<td>0.04823304</td>
<td>NA</td>
<td>0.6958943</td>
</tr>
<tr>
<td>Jack Sock</td>
<td>-0.0099659903</td>
<td>0.026454984</td>
<td>0.0186547428</td>
<td>0.02307214</td>
<td>NA</td>
<td>0.6757770</td>
</tr>
<tr>
<td>Diego Schwartzman</td>
<td>-0.0317130675</td>
<td>0.032098381</td>
<td>0.0006215006</td>
<td>0.05621187</td>
<td>NA</td>
<td>0.6631067</td>
</tr>
<tr>
<td>John Millman</td>
<td>0.0016290285</td>
<td>0.042676556</td>
<td>0.0119857356</td>
<td>0.06228135</td>
<td>NA</td>
<td>0.6603912</td>
</tr>
<tr>
<td>Nikoloz Basilashvili</td>
<td>-0.0099968609</td>
<td>0.005561102</td>
<td>0.0473876170</td>
<td>0.03661962</td>
<td>NA</td>
<td>0.6602628</td>
</tr>
<tr>
<td>John Isner</td>
<td>0.1346946527</td>
<td>-0.070556940</td>
<td>0.0161348609</td>
<td>-0.11425009</td>
<td>NA</td>
<td>0.6598097</td>
</tr>
<tr>
<td>Gael Monfils</td>
<td>-0.0074254934</td>
<td>0.024286746</td>
<td>0.0295568649</td>
<td>0.04007519</td>
<td>NA</td>
<td>0.6449506</td>
</tr>
<tr>
<td>Richard Gasquet</td>
<td>0.0296009556</td>
<td>-0.011382437</td>
<td>0.0013138324</td>
<td>-0.03972967</td>
<td>NA</td>
<td>0.6442043</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>Laslo Djere</td>
<td>-0.042300822</td>
<td>-0.0150684095</td>
<td>-0.064667709</td>
<td>-0.0349151578</td>
<td>NA</td>
<td>0.3606923</td>
</tr>
<tr>
<td>David Ferrer</td>
<td>-0.036179509</td>
<td>0.0532782117</td>
<td>0.012751020</td>
<td>0.0914824480</td>
<td>NA</td>
<td>0.3488057</td>
</tr>
<tr>
<td>Bradley Klahn</td>
<td>-0.001248083</td>
<td>-0.0444982448</td>
<td>-0.025987040</td>
<td>-0.1181295700</td>
<td>NA</td>
<td>0.3487806</td>
</tr>
<tr>
<td>Marcel Granollers</td>
<td>-0.031011830</td>
<td>-0.0094056152</td>
<td>-0.049853664</td>
<td>0.0136841358</td>
<td>NA</td>
<td>0.3460035</td>
</tr>
<tr>
<td>Ricardas Berankis</td>
<td>-0.022557215</td>
<td>-0.0103782963</td>
<td>-0.047937290</td>
<td>-0.0468488990</td>
<td>NA</td>
<td>0.3454980</td>
</tr>
<tr>
<td>Radu Albot</td>
<td>-0.040829057</td>
<td>0.0076150564</td>
<td>-0.034891704</td>
<td>0.0443672533</td>
<td>NA</td>
<td>0.3420615</td>
</tr>
<tr>
<td>Jordan Thompson</td>
<td>-0.068554906</td>
<td>0.0261969117</td>
<td>-0.044349181</td>
<td>0.0206636045</td>
<td>NA</td>
<td>0.3358572</td>
</tr>
<tr>
<td>Thomas Fabbiano</td>
<td>-0.060583307</td>
<td>0.0275756029</td>
<td>-0.025883493</td>
<td>0.0709707306</td>
<td>NA</td>
<td>0.3319778</td>
</tr>
<tr>
<td>Roberto Carballes Baena</td>
<td>-0.054016396</td>
<td>-0.0091521177</td>
<td>-0.019093050</td>
<td>0.0347187874</td>
<td>NA</td>
<td>0.3312105</td>
</tr>
<tr>
<td>Paolo Lorenzi</td>
<td>-0.038613500</td>
<td>-0.0212206827</td>
<td>-0.052602703</td>
<td>0.0199474025</td>
<td>NA</td>
<td>0.3299791</td>
</tr>
<tr>
<td>Guido Andreozzi</td>
<td>-0.038614385</td>
<td>-0.0133763922</td>
<td>0.029549861</td>
<td>0.0636745661</td>
<td>NA</td>
<td>0.3288762</td>
</tr>
<tr>
<td>Peter Polansky</td>
<td>0.007461636</td>
<td>-0.0163389196</td>
<td>-0.024034159</td>
<td>-0.0442144260</td>
<td>NA</td>
<td>0.3216756</td>
</tr>
<tr>
<td>Ernests Gulbis</td>
<td>-0.062827089</td>
<td>-0.0134699552</td>
<td>-0.027633425</td>
<td>-0.0518663252</td>
<td>NA</td>
<td>0.3123511</td>
</tr>
<tr>
<td>Thiago Monteiro</td>
<td>0.001235931</td>
<td>-0.0288349103</td>
<td>-0.043831840</td>
<td>-0.0654744344</td>
<td>NA</td>
<td>0.3122069</td>
</tr>
<tr>
<td>Casper Ruud</td>
<td>0.016838968</td>
<td>-0.0178511679</td>
<td>0.015234507</td>
<td>0.0219131874</td>
<td>NA</td>
<td>0.3119321</td>
</tr>
<tr>
<td>Marco Trungelliti</td>
<td>-0.022148774</td>
<td>-0.0005658242</td>
<td>0.048542554</td>
<td>0.1243537739</td>
<td>NA</td>
<td>0.3092636</td>
</tr>
<tr>
<td>Jiri Vesely</td>
<td>-0.050204009</td>
<td>-0.0351868278</td>
<td>-0.042887646</td>
<td>-0.0160467165</td>
<td>NA</td>
<td>0.3089287</td>
</tr>
<tr>
<td>Guillermo Garcia-Lopez</td>
<td>-0.090076100</td>
<td>-0.0108663630</td>
<td>-0.048712763</td>
<td>-0.0124446402</td>
<td>NA</td>
<td>0.3080898</td>
</tr>
<tr>
<td>Michael Mmoh</td>
<td>-0.063802934</td>
<td>-0.0079053251</td>
<td>-0.011112236</td>
<td>-0.0332042032</td>
<td>NA</td>
<td>0.2822330</td>
</tr>
<tr>
<td>Jason Kubler</td>
<td>-0.124758873</td>
<td>-0.0202756806</td>
<td>-0.013998570</td>
<td>0.1020895301</td>
<td>NA</td>
<td>0.2814246</td>
</tr>
<tr>
<td>Ruben Bemelmans</td>
<td>-0.029036164</td>
<td>-0.0138846550</td>
<td>-0.032256254</td>
<td>-0.0363563402</td>
<td>NA</td>
<td>0.2772185</td>
</tr>
<tr>
<td>Bjorn Fratangelo</td>
<td>-0.014149222</td>
<td>0.0033574304</td>
<td>-0.019931504</td>
<td>-0.0360199607</td>
<td>NA</td>
<td>0.2652527</td>
</tr>
<tr>
<td>Pablo Andujar</td>
<td>-0.042869833</td>
<td>-0.0488261697</td>
<td>-0.070057834</td>
<td>-0.0164918910</td>
<td>NA</td>
<td>0.2647100</td>
</tr>
<tr>
<td>Christian Garin</td>
<td>-0.046150875</td>
<td>0.0235799476</td>
<td>-0.006209664</td>
<td>0.0736304057</td>
<td>NA</td>
<td>0.2631607</td>
</tr>
<tr>
<td>Ivo Karlovic</td>
<td>0.071597162</td>
<td>-0.1093833837</td>
<td>0.001410787</td>
<td>-0.1237762218</td>
<td>NA</td>
<td>0.2500242</td>
</tr>
<tr>
<td>Juan Ignacio Londero</td>
<td>-0.026454456</td>
<td>-0.0715665271</td>
<td>-0.016749898</td>
<td>-0.0363353678</td>
<td>NA</td>
<td>0.2351747</td>
</tr>
<tr>
<td>Ramkumar Ramanathan</td>
<td>-0.005371622</td>
<td>-0.0606138479</td>
<td>-0.041631884</td>
<td>-0.0005573405</td>
<td>NA</td>
<td>0.2272977</td>
</tr>
<tr>
<td>Reilly Opelka</td>
<td>0.025704824</td>
<td>-0.0607219257</td>
<td>-0.015474944</td>
<td>-0.0720809006</td>
<td>NA</td>
<td>0.2262993</td>
</tr>
<tr>
<td>Carlos Berlocq</td>
<td>-0.063580460</td>
<td>0.0074576369</td>
<td>-0.054277974</td>
<td>-0.0165235079</td>
<td>NA</td>
<td>0.2112275</td>
</tr>
<tr>
<td>Pedro Sousa</td>
<td>-0.197333352</td>
<td>-0.0734557562</td>
<td>-0.161962722</td>
<td>-0.1023311674</td>
<td>NA</td>
<td>0.1502313</td>
</tr>
</tbody>
</table>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../howToModelTheAusOpen/" title="How to model the Australian Open" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                How to model the Australian Open
              </span>
            </div>
          </a>
        
        
          <a href="../AusOpenPythonTutorial/" title="Aus Open Python Tutorial" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Aus Open Python Tutorial
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://twitter.com/Betfair_Aus" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com/company/betfair-australia" class="md-footer-social__link fa fa-linkedin"></a>
    
      <a href="https://facebook.com/betfairaustralia" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://youtube.com/user/betfairaus" class="md-footer-social__link fa fa-youtube"></a>
    
      <a href="https://github.com/betfair-datascientists" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
    <div class="bf-footer">
      <p class="bf-light">Betfair Pty Limited is licensed and regulated by the Northern Territory Government of Australia.</p>
      <p class="bf-dark">Betfair Pty Limited's gambling operations are governed by its Responsible Gambling Code of Conduct and for South
      Australian residents by the South Australian Responsible Gambling Code of Practice.<br>Think! About your choices. Dont let the game play you. Stay in control. Gamble Responsibly.
      Call Gambling Help 1800 858 858 <a href="https://gamblinghelponline.org.au">www.gamblinghelponline.org.au</a></p>
      <ul class="bf-links">
        <li><a href="https://www.betfair.com.au/hub/help/account-help/responsible-gambling/">Responsible Gambling</a><span>|</span></li>
        <li><a href="http://www.betfair.com/AUS_NZL/aboutUs/Terms.and.Conditions/">Terms & Conditions</a><span>|</span></li>
        <li><a href="https://www.betfair.com.au/info/privacy-policy/">Privacy Policy</a><span>|</span></li>
        <li><a href="http://www.betfair.com/en/aboutUs/Rules.and.Regulations/">Rules & Regulations</a><span>|</span></li>
        <li><a href="https://www.betfair.com/AUS_NZL/aboutUs/Dispute.Resolution">Dispute Resolution</a></li>
      </ul>
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.83382bb6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../search/main.js"></script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-125973915-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>